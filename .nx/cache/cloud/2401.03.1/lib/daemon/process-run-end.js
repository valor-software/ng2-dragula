"use strict";var of=Object.create;var Zr=Object.defineProperty;var af=Object.getOwnPropertyDescriptor;var cf=Object.getOwnPropertyNames;var uf=Object.getPrototypeOf,lf=Object.prototype.hasOwnProperty;var le=(r,e)=>()=>(r&&(e=r(r=0)),e);var E=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Pe=(r,e)=>{for(var t in e)Zr(r,t,{get:e[t],enumerable:!0})},ra=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of cf(e))!lf.call(r,i)&&i!==t&&Zr(r,i,{get:()=>e[i],enumerable:!(s=af(e,i))||s.enumerable});return r};var hf=(r,e,t)=>(t=r!=null?of(uf(r)):{},ra(e||!r||!r.__esModule?Zr(t,"default",{value:r,enumerable:!0}):t,r)),ke=r=>ra(Zr({},"__esModule",{value:!0}),r);var sa={};Pe(sa,{configureLightClientRequire:()=>ff,configuredPaths:()=>gi,lightClientRequire:()=>F});function ff(r){gi=r,F=function(e){if(gi.length===0)throw new Error("Light client require must have paths configured with `configureLightClientRequire`.");let t;try{t=require.resolve(e,{paths:r})}catch(s){throw process.env.NX_VERBOSE_LOGGING==="true"&&console.error(`Was not able to require.resolve module ${e} from the following paths: ${r}. This may be expected.`),s}try{return require(t)}catch(s){throw process.env.NX_VERBOSE_LOGGING==="true"&&console.error(`Was not able require module ${e} from path ${t}. This may be expected. `),s}}}var F,gi,gr=le(()=>{"use strict";gi=[]});var ia=E(ee=>{"use strict";var vi=require("path");gr();try{try{let r;try{r=F("nx/src/utils/app-root").workspaceRoot}catch{r=F("nx/src/utils/workspace-root").workspaceRoot}let{getDependencyConfigs:e}=F("nx/src/tasks-runner/utils"),t=F("nx/tasks-runners/default").default,{CompositeLifeCycle:s}=F("nx/src/tasks-runner/life-cycle"),i=null;try{i=F("nx/src/index").initTasksRunner}catch{}let n;try{n=F("nx/src/devkit-exports").cacheDir}catch{try{n=F("nx/src/utils/cache-directory").cacheDir}catch{n=(0,vi.join)(r,"./node_modules/.cache/nx")}}let o=F("nx/src/tasks-runner/utils").isCacheableTask;ee.cacheDirectory=n,ee.runnerReturnsPromise=!0,ee.tasksRunner=t,ee.CompositeLifeCycle=s,ee.getDependencyConfigs=e,ee.initTasksRunner=i,ee.isCacheableTask=o}catch{let{appRootPath:e}=F("@nrwl/tao/src/utils/app-root"),{getDependencyConfigs:t}=F("@nrwl/workspace/src/tasks-runner/utils"),{tasksRunnerV2:s}=F("@nrwl/workspace/src/tasks-runner/tasks-runner-v2"),i;try{i=F("@nrwl/workspace/src/tasks-runner/life-cycle").CompositeLifeCycle}catch{}let n=F("@nrwl/workspace/src/tasks-runner/utils").isCacheableTask;ee.cacheDirectory=(0,vi.join)(e,"./node_modules/.cache/nx"),ee.runnerReturnsPromise=!1,ee.tasksRunner=s,ee.CompositeLifeCycle=i,ee.getDependencyConfigs=t,ee.initTasksRunner=null,ee.isCacheableTask=n}}catch(r){process.env.NX_VERBOSE_LOGGING==="true"&&console.log(r),console.error("NX CLOUD ERROR"),console.error("---------------------------------------"),console.error("This version of Nx Cloud is incompatible with the @nrwl/* and @nx/* packages in your workspace, or Nx was not installed properly."),console.error(""),console.error("Verify your install step was successful, and if it was,"),console.error("match your @nrwl/nx-cloud version to the same major version of your @nx/* and @nrwl/* packages and try again."),console.error("---------------------------------------"),process.exit(1)}});function na(){return process.env.CI==="true"||process.env.TF_BUILD==="true"||process.env.GITHUB_ACTIONS==="true"||process.env.BUILDKITE==="true"||process.env.CIRCLECI==="true"||process.env.CIRRUS_CI==="true"||process.env.TRAVIS==="true"||!!process.env["bamboo.buildKey"]||!!process.env.CODEBUILD_BUILD_ID||!!process.env.GITLAB_CI||!!process.env.HEROKU_TEST_RUN_ID||!!process.env.BUILD_ID||!!process.env.BUILD_BUILDID||!!process.env.TEAMCITY_VERSION}var oa=le(()=>{"use strict"});var la=E((my,Ci)=>{"use strict";var df=require("fs"),aa=require("path"),pf=require("os");function ca(r){console.log(`[dotenv][DEBUG] ${r}`)}var mf=`
`,Ef=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,yf=/\\n/g,_f=/\r\n|\n|\r/;function ua(r,e){let t=!!(e&&e.debug),s={};return r.toString().split(_f).forEach(function(i,n){let o=i.match(Ef);if(o!=null){let c=o[1],a=o[2]||"",l=a.length-1,u=a[0]==='"'&&a[l]==='"';a[0]==="'"&&a[l]==="'"||u?(a=a.substring(1,l),u&&(a=a.replace(yf,mf))):a=a.trim(),s[c]=a}else t&&ca(`did not match key and value when parsing line ${n+1}: ${i}`)}),s}function Rf(r){return r[0]==="~"?aa.join(pf.homedir(),r.slice(1)):r}function gf(r){let e=aa.resolve(process.cwd(),".env"),t="utf8",s=!1;r&&(r.path!=null&&(e=Rf(r.path)),r.encoding!=null&&(t=r.encoding),r.debug!=null&&(s=!0));try{let i=ua(df.readFileSync(e,{encoding:t}),{debug:s});return Object.keys(i).forEach(function(n){Object.prototype.hasOwnProperty.call(process.env,n)?s&&ca(`"${n}" is already defined in \`process.env\` and will not be overwritten`):process.env[n]=i[n]}),{parsed:i}}catch(i){return{error:i}}}Ci.exports.config=gf;Ci.exports.parse=ua});var ha=E((vr,wi)=>{"use strict";(function(r,e){typeof vr=="object"&&typeof wi=="object"?wi.exports=e(require("child_process"),require("crypto")):typeof define=="function"&&define.amd?define(["child_process","crypto"],e):typeof vr=="object"?vr["electron-machine-id"]=e(require("child_process"),require("crypto")):r["electron-machine-id"]=e(r.child_process,r.crypto)})(vr,function(r,e){return function(t){function s(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}var i={};return s.m=t,s.c=i,s.p="",s(0)}([function(t,s,i){t.exports=i(34)},function(t,s,i){var n=i(29)("wks"),o=i(33),c=i(2).Symbol,a=typeof c=="function",l=t.exports=function(u){return n[u]||(n[u]=a&&c[u]||(a?c:o)("Symbol."+u))};l.store=n},function(t,s){var i=t.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=i)},function(t,s,i){var n=i(9);t.exports=function(o){if(!n(o))throw TypeError(o+" is not an object!");return o}},function(t,s,i){t.exports=!i(24)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(t,s,i){var n=i(12),o=i(17);t.exports=i(4)?function(c,a,l){return n.f(c,a,o(1,l))}:function(c,a,l){return c[a]=l,c}},function(t,s){var i=t.exports={version:"2.4.0"};typeof __e=="number"&&(__e=i)},function(t,s,i){var n=i(14);t.exports=function(o,c,a){if(n(o),c===void 0)return o;switch(a){case 1:return function(l){return o.call(c,l)};case 2:return function(l,u){return o.call(c,l,u)};case 3:return function(l,u,h){return o.call(c,l,u,h)}}return function(){return o.apply(c,arguments)}}},function(t,s){var i={}.hasOwnProperty;t.exports=function(n,o){return i.call(n,o)}},function(t,s){t.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},function(t,s){t.exports={}},function(t,s){var i={}.toString;t.exports=function(n){return i.call(n).slice(8,-1)}},function(t,s,i){var n=i(3),o=i(26),c=i(32),a=Object.defineProperty;s.f=i(4)?Object.defineProperty:function(l,u,h){if(n(l),u=c(u,!0),n(h),o)try{return a(l,u,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported!");return"value"in h&&(l[u]=h.value),l}},function(t,s,i){var n=i(42),o=i(15);t.exports=function(c){return n(o(c))}},function(t,s){t.exports=function(i){if(typeof i!="function")throw TypeError(i+" is not a function!");return i}},function(t,s){t.exports=function(i){if(i==null)throw TypeError("Can't call method on  "+i);return i}},function(t,s,i){var n=i(9),o=i(2).document,c=n(o)&&n(o.createElement);t.exports=function(a){return c?o.createElement(a):{}}},function(t,s){t.exports=function(i,n){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:n}}},function(t,s,i){var n=i(12).f,o=i(8),c=i(1)("toStringTag");t.exports=function(a,l,u){a&&!o(a=u?a:a.prototype,c)&&n(a,c,{configurable:!0,value:l})}},function(t,s,i){var n=i(29)("keys"),o=i(33);t.exports=function(c){return n[c]||(n[c]=o(c))}},function(t,s){var i=Math.ceil,n=Math.floor;t.exports=function(o){return isNaN(o=+o)?0:(o>0?n:i)(o)}},function(t,s,i){var n=i(11),o=i(1)("toStringTag"),c=n(function(){return arguments}())=="Arguments",a=function(l,u){try{return l[u]}catch{}};t.exports=function(l){var u,h,f;return l===void 0?"Undefined":l===null?"Null":typeof(h=a(u=Object(l),o))=="string"?h:c?n(u):(f=n(u))=="Object"&&typeof u.callee=="function"?"Arguments":f}},function(t,s){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,s,i){var n=i(2),o=i(6),c=i(7),a=i(5),l="prototype",u=function(h,f,d){var p,y,_,g=h&u.F,w=h&u.G,S=h&u.S,O=h&u.P,L=h&u.B,v=h&u.W,A=w?o:o[f]||(o[f]={}),I=A[l],M=w?n:S?n[f]:(n[f]||{})[l];w&&(d=f);for(p in d)y=!g&&M&&M[p]!==void 0,y&&p in A||(_=y?M[p]:d[p],A[p]=w&&typeof M[p]!="function"?d[p]:L&&y?c(_,n):v&&M[p]==_?function(q){var ue=function(se,H,Ee){if(this instanceof q){switch(arguments.length){case 0:return new q;case 1:return new q(se);case 2:return new q(se,H)}return new q(se,H,Ee)}return q.apply(this,arguments)};return ue[l]=q[l],ue}(_):O&&typeof _=="function"?c(Function.call,_):_,O&&((A.virtual||(A.virtual={}))[p]=_,h&u.R&&I&&!I[p]&&a(I,p,_)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,s){t.exports=function(i){try{return!!i()}catch{return!0}}},function(t,s,i){t.exports=i(2).document&&document.documentElement},function(t,s,i){t.exports=!i(4)&&!i(24)(function(){return Object.defineProperty(i(16)("div"),"a",{get:function(){return 7}}).a!=7})},function(t,s,i){"use strict";var n=i(28),o=i(23),c=i(57),a=i(5),l=i(8),u=i(10),h=i(45),f=i(18),d=i(52),p=i(1)("iterator"),y=!([].keys&&"next"in[].keys()),_="@@iterator",g="keys",w="values",S=function(){return this};t.exports=function(O,L,v,A,I,M,q){h(v,L,A);var ue,se,H,Ee=function(R){if(!y&&R in T)return T[R];switch(R){case g:return function(){return new v(this,R)};case w:return function(){return new v(this,R)}}return function(){return new v(this,R)}},k=L+" Iterator",we=I==w,ie=!1,T=O.prototype,X=T[p]||T[_]||I&&T[I],z=X||Ee(I),be=I?we?Ee("entries"):z:void 0,m=L=="Array"&&T.entries||X;if(m&&(H=d(m.call(new O)),H!==Object.prototype&&(f(H,k,!0),n||l(H,p)||a(H,p,S))),we&&X&&X.name!==w&&(ie=!0,z=function(){return X.call(this)}),n&&!q||!y&&!ie&&T[p]||a(T,p,z),u[L]=z,u[k]=S,I)if(ue={values:we?z:Ee(w),keys:M?z:Ee(g),entries:be},q)for(se in ue)se in T||c(T,se,ue[se]);else o(o.P+o.F*(y||ie),L,ue);return ue}},function(t,s){t.exports=!0},function(t,s,i){var n=i(2),o="__core-js_shared__",c=n[o]||(n[o]={});t.exports=function(a){return c[a]||(c[a]={})}},function(t,s,i){var n,o,c,a=i(7),l=i(41),u=i(25),h=i(16),f=i(2),d=f.process,p=f.setImmediate,y=f.clearImmediate,_=f.MessageChannel,g=0,w={},S="onreadystatechange",O=function(){var v=+this;if(w.hasOwnProperty(v)){var A=w[v];delete w[v],A()}},L=function(v){O.call(v.data)};p&&y||(p=function(v){for(var A=[],I=1;arguments.length>I;)A.push(arguments[I++]);return w[++g]=function(){l(typeof v=="function"?v:Function(v),A)},n(g),g},y=function(v){delete w[v]},i(11)(d)=="process"?n=function(v){d.nextTick(a(O,v,1))}:_?(o=new _,c=o.port2,o.port1.onmessage=L,n=a(c.postMessage,c,1)):f.addEventListener&&typeof postMessage=="function"&&!f.importScripts?(n=function(v){f.postMessage(v+"","*")},f.addEventListener("message",L,!1)):n=S in h("script")?function(v){u.appendChild(h("script"))[S]=function(){u.removeChild(this),O.call(v)}}:function(v){setTimeout(a(O,v,1),0)}),t.exports={set:p,clear:y}},function(t,s,i){var n=i(20),o=Math.min;t.exports=function(c){return c>0?o(n(c),9007199254740991):0}},function(t,s,i){var n=i(9);t.exports=function(o,c){if(!n(o))return o;var a,l;if(c&&typeof(a=o.toString)=="function"&&!n(l=a.call(o))||typeof(a=o.valueOf)=="function"&&!n(l=a.call(o))||!c&&typeof(a=o.toString)=="function"&&!n(l=a.call(o)))return l;throw TypeError("Can't convert object to primitive value")}},function(t,s){var i=0,n=Math.random();t.exports=function(o){return"Symbol(".concat(o===void 0?"":o,")_",(++i+n).toString(36))}},function(t,s,i){"use strict";function n(S){return S&&S.__esModule?S:{default:S}}function o(){return process.platform!=="win32"?"":process.arch==="ia32"&&process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?"mixed":"native"}function c(S){return(0,p.createHash)("sha256").update(S).digest("hex")}function a(S){switch(_){case"darwin":return S.split("IOPlatformUUID")[1].split(`
`)[0].replace(/\=|\s+|\"/gi,"").toLowerCase();case"win32":return S.toString().split("REG_SZ")[1].replace(/\r+|\n+|\s+/gi,"").toLowerCase();case"linux":return S.toString().replace(/\r+|\n+|\s+/gi,"").toLowerCase();case"freebsd":return S.toString().replace(/\r+|\n+|\s+/gi,"").toLowerCase();default:throw new Error("Unsupported platform: "+process.platform)}}function l(S){var O=a((0,d.execSync)(w[_]).toString());return S?O:c(O)}function u(S){return new f.default(function(O,L){return(0,d.exec)(w[_],{},function(v,A,I){if(v)return L(new Error("Error while obtaining machine id: "+v.stack));var M=a(A.toString());return O(S?M:c(M))})})}Object.defineProperty(s,"__esModule",{value:!0});var h=i(35),f=n(h);s.machineIdSync=l,s.machineId=u;var d=i(70),p=i(71),y=process,_=y.platform,g={native:"%windir%\\System32",mixed:"%windir%\\sysnative\\cmd.exe /c %windir%\\System32"},w={darwin:"ioreg -rd1 -c IOPlatformExpertDevice",win32:g[o()]+"\\REG.exe QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",linux:"( cat /var/lib/dbus/machine-id /etc/machine-id 2> /dev/null || hostname ) | head -n 1 || :",freebsd:"kenv -q smbios.system.uuid || sysctl -n kern.hostuuid"}},function(t,s,i){t.exports={default:i(36),__esModule:!0}},function(t,s,i){i(66),i(68),i(69),i(67),t.exports=i(6).Promise},function(t,s){t.exports=function(){}},function(t,s){t.exports=function(i,n,o,c){if(!(i instanceof n)||c!==void 0&&c in i)throw TypeError(o+": incorrect invocation!");return i}},function(t,s,i){var n=i(13),o=i(31),c=i(62);t.exports=function(a){return function(l,u,h){var f,d=n(l),p=o(d.length),y=c(h,p);if(a&&u!=u){for(;p>y;)if(f=d[y++],f!=f)return!0}else for(;p>y;y++)if((a||y in d)&&d[y]===u)return a||y||0;return!a&&-1}}},function(t,d,i){var n=i(7),o=i(44),c=i(43),a=i(3),l=i(31),u=i(64),h={},f={},d=t.exports=function(p,y,_,g,w){var S,O,L,v,A=w?function(){return p}:u(p),I=n(_,g,y?2:1),M=0;if(typeof A!="function")throw TypeError(p+" is not iterable!");if(c(A)){for(S=l(p.length);S>M;M++)if(v=y?I(a(O=p[M])[0],O[1]):I(p[M]),v===h||v===f)return v}else for(L=A.call(p);!(O=L.next()).done;)if(v=o(L,I,O.value,y),v===h||v===f)return v};d.BREAK=h,d.RETURN=f},function(t,s){t.exports=function(i,n,o){var c=o===void 0;switch(n.length){case 0:return c?i():i.call(o);case 1:return c?i(n[0]):i.call(o,n[0]);case 2:return c?i(n[0],n[1]):i.call(o,n[0],n[1]);case 3:return c?i(n[0],n[1],n[2]):i.call(o,n[0],n[1],n[2]);case 4:return c?i(n[0],n[1],n[2],n[3]):i.call(o,n[0],n[1],n[2],n[3])}return i.apply(o,n)}},function(t,s,i){var n=i(11);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(o){return n(o)=="String"?o.split(""):Object(o)}},function(t,s,i){var n=i(10),o=i(1)("iterator"),c=Array.prototype;t.exports=function(a){return a!==void 0&&(n.Array===a||c[o]===a)}},function(t,s,i){var n=i(3);t.exports=function(o,c,a,l){try{return l?c(n(a)[0],a[1]):c(a)}catch(h){var u=o.return;throw u!==void 0&&n(u.call(o)),h}}},function(t,s,i){"use strict";var n=i(49),o=i(17),c=i(18),a={};i(5)(a,i(1)("iterator"),function(){return this}),t.exports=function(l,u,h){l.prototype=n(a,{next:o(1,h)}),c(l,u+" Iterator")}},function(t,s,i){var n=i(1)("iterator"),o=!1;try{var c=[7][n]();c.return=function(){o=!0},Array.from(c,function(){throw 2})}catch{}t.exports=function(a,l){if(!l&&!o)return!1;var u=!1;try{var h=[7],f=h[n]();f.next=function(){return{done:u=!0}},h[n]=function(){return f},a(h)}catch{}return u}},function(t,s){t.exports=function(i,n){return{value:n,done:!!i}}},function(t,s,i){var n=i(2),o=i(30).set,c=n.MutationObserver||n.WebKitMutationObserver,a=n.process,l=n.Promise,u=i(11)(a)=="process";t.exports=function(){var h,f,d,p=function(){var w,S;for(u&&(w=a.domain)&&w.exit();h;){S=h.fn,h=h.next;try{S()}catch(O){throw h?d():f=void 0,O}}f=void 0,w&&w.enter()};if(u)d=function(){a.nextTick(p)};else if(c){var y=!0,_=document.createTextNode("");new c(p).observe(_,{characterData:!0}),d=function(){_.data=y=!y}}else if(l&&l.resolve){var g=l.resolve();d=function(){g.then(p)}}else d=function(){o.call(n,p)};return function(w){var S={fn:w,next:void 0};f&&(f.next=S),h||(h=S,d()),f=S}}},function(t,s,i){var n=i(3),o=i(50),c=i(22),a=i(19)("IE_PROTO"),l=function(){},u="prototype",h=function(){var f,d=i(16)("iframe"),p=c.length,y=">";for(d.style.display="none",i(25).appendChild(d),d.src="javascript:",f=d.contentWindow.document,f.open(),f.write("<script>document.F=Object</script"+y),f.close(),h=f.F;p--;)delete h[u][c[p]];return h()};t.exports=Object.create||function(f,d){var p;return f!==null?(l[u]=n(f),p=new l,l[u]=null,p[a]=f):p=h(),d===void 0?p:o(p,d)}},function(t,s,i){var n=i(12),o=i(3),c=i(54);t.exports=i(4)?Object.defineProperties:function(a,l){o(a);for(var u,h=c(l),f=h.length,d=0;f>d;)n.f(a,u=h[d++],l[u]);return a}},function(t,s,i){var n=i(55),o=i(17),c=i(13),a=i(32),l=i(8),u=i(26),h=Object.getOwnPropertyDescriptor;s.f=i(4)?h:function(f,d){if(f=c(f),d=a(d,!0),u)try{return h(f,d)}catch{}if(l(f,d))return o(!n.f.call(f,d),f[d])}},function(t,s,i){var n=i(8),o=i(63),c=i(19)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(l){return l=o(l),n(l,c)?l[c]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?a:null}},function(t,s,i){var n=i(8),o=i(13),c=i(39)(!1),a=i(19)("IE_PROTO");t.exports=function(l,u){var h,f=o(l),d=0,p=[];for(h in f)h!=a&&n(f,h)&&p.push(h);for(;u.length>d;)n(f,h=u[d++])&&(~c(p,h)||p.push(h));return p}},function(t,s,i){var n=i(53),o=i(22);t.exports=Object.keys||function(c){return n(c,o)}},function(t,s){s.f={}.propertyIsEnumerable},function(t,s,i){var n=i(5);t.exports=function(o,c,a){for(var l in c)a&&o[l]?o[l]=c[l]:n(o,l,c[l]);return o}},function(t,s,i){t.exports=i(5)},function(t,s,i){var n=i(9),o=i(3),c=function(a,l){if(o(a),!n(l)&&l!==null)throw TypeError(l+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(a,l,u){try{u=i(7)(Function.call,i(51).f(Object.prototype,"__proto__").set,2),u(a,[]),l=!(a instanceof Array)}catch{l=!0}return function(h,f){return c(h,f),l?h.__proto__=f:u(h,f),h}}({},!1):void 0),check:c}},function(t,s,i){"use strict";var n=i(2),o=i(6),c=i(12),a=i(4),l=i(1)("species");t.exports=function(u){var h=typeof o[u]=="function"?o[u]:n[u];a&&h&&!h[l]&&c.f(h,l,{configurable:!0,get:function(){return this}})}},function(t,s,i){var n=i(3),o=i(14),c=i(1)("species");t.exports=function(a,l){var u,h=n(a).constructor;return h===void 0||(u=n(h)[c])==null?l:o(u)}},function(t,s,i){var n=i(20),o=i(15);t.exports=function(c){return function(a,l){var u,h,f=String(o(a)),d=n(l),p=f.length;return d<0||d>=p?c?"":void 0:(u=f.charCodeAt(d),u<55296||u>56319||d+1===p||(h=f.charCodeAt(d+1))<56320||h>57343?c?f.charAt(d):u:c?f.slice(d,d+2):(u-55296<<10)+(h-56320)+65536)}}},function(t,s,i){var n=i(20),o=Math.max,c=Math.min;t.exports=function(a,l){return a=n(a),a<0?o(a+l,0):c(a,l)}},function(t,s,i){var n=i(15);t.exports=function(o){return Object(n(o))}},function(t,s,i){var n=i(21),o=i(1)("iterator"),c=i(10);t.exports=i(6).getIteratorMethod=function(a){if(a!=null)return a[o]||a["@@iterator"]||c[n(a)]}},function(t,s,i){"use strict";var n=i(37),o=i(47),c=i(10),a=i(13);t.exports=i(27)(Array,"Array",function(l,u){this._t=a(l),this._i=0,this._k=u},function(){var l=this._t,u=this._k,h=this._i++;return!l||h>=l.length?(this._t=void 0,o(1)):u=="keys"?o(0,h):u=="values"?o(0,l[h]):o(0,[h,l[h]])},"values"),c.Arguments=c.Array,n("keys"),n("values"),n("entries")},function(t,s){},function(t,s,i){"use strict";var n,o,c,a=i(28),l=i(2),u=i(7),h=i(21),f=i(23),d=i(9),p=(i(3),i(14)),y=i(38),_=i(40),g=(i(58).set,i(60)),w=i(30).set,S=i(48)(),O="Promise",L=l.TypeError,A=l.process,v=l[O],A=l.process,I=h(A)=="process",M=function(){},q=!!function(){try{var m=v.resolve(1),R=(m.constructor={})[i(1)("species")]=function(C){C(M,M)};return(I||typeof PromiseRejectionEvent=="function")&&m.then(M)instanceof R}catch{}}(),ue=function(m,R){return m===R||m===v&&R===c},se=function(m){var R;return!(!d(m)||typeof(R=m.then)!="function")&&R},H=function(m){return ue(v,m)?new Ee(m):new o(m)},Ee=o=function(m){var R,C;this.promise=new m(function(x,K){if(R!==void 0||C!==void 0)throw L("Bad Promise constructor");R=x,C=K}),this.resolve=p(R),this.reject=p(C)},k=function(m){try{m()}catch(R){return{error:R}}},we=function(m,R){if(!m._n){m._n=!0;var C=m._c;S(function(){for(var x=m._v,K=m._s==1,ft=0,Ut=function(Ye){var Ne,Wr,_r=K?Ye.ok:Ye.fail,Rr=Ye.resolve,Ft=Ye.reject,Yr=Ye.domain;try{_r?(K||(m._h==2&&X(m),m._h=1),_r===!0?Ne=x:(Yr&&Yr.enter(),Ne=_r(x),Yr&&Yr.exit()),Ne===Ye.promise?Ft(L("Promise-chain cycle")):(Wr=se(Ne))?Wr.call(Ne,Rr,Ft):Rr(Ne)):Ft(x)}catch(nf){Ft(nf)}};C.length>ft;)Ut(C[ft++]);m._c=[],m._n=!1,R&&!m._h&&ie(m)})}},ie=function(m){w.call(l,function(){var R,C,x,K=m._v;if(T(m)&&(R=k(function(){I?A.emit("unhandledRejection",K,m):(C=l.onunhandledrejection)?C({promise:m,reason:K}):(x=l.console)&&x.error&&x.error("Unhandled promise rejection",K)}),m._h=I||T(m)?2:1),m._a=void 0,R)throw R.error})},T=function(m){if(m._h==1)return!1;for(var R,C=m._a||m._c,x=0;C.length>x;)if(R=C[x++],R.fail||!T(R.promise))return!1;return!0},X=function(m){w.call(l,function(){var R;I?A.emit("rejectionHandled",m):(R=l.onrejectionhandled)&&R({promise:m,reason:m._v})})},z=function(m){var R=this;R._d||(R._d=!0,R=R._w||R,R._v=m,R._s=2,R._a||(R._a=R._c.slice()),we(R,!0))},be=function(m){var R,C=this;if(!C._d){C._d=!0,C=C._w||C;try{if(C===m)throw L("Promise can't be resolved itself");(R=se(m))?S(function(){var x={_w:C,_d:!1};try{R.call(m,u(be,x,1),u(z,x,1))}catch(K){z.call(x,K)}}):(C._v=m,C._s=1,we(C,!1))}catch(x){z.call({_w:C,_d:!1},x)}}};q||(v=function(m){y(this,v,O,"_h"),p(m),n.call(this);try{m(u(be,this,1),u(z,this,1))}catch(R){z.call(this,R)}},n=function(m){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=i(56)(v.prototype,{then:function(m,R){var C=H(g(this,v));return C.ok=typeof m!="function"||m,C.fail=typeof R=="function"&&R,C.domain=I?A.domain:void 0,this._c.push(C),this._a&&this._a.push(C),this._s&&we(this,!1),C.promise},catch:function(m){return this.then(void 0,m)}}),Ee=function(){var m=new n;this.promise=m,this.resolve=u(be,m,1),this.reject=u(z,m,1)}),f(f.G+f.W+f.F*!q,{Promise:v}),i(18)(v,O),i(59)(O),c=i(6)[O],f(f.S+f.F*!q,O,{reject:function(m){var R=H(this),C=R.reject;return C(m),R.promise}}),f(f.S+f.F*(a||!q),O,{resolve:function(m){if(m instanceof v&&ue(m.constructor,this))return m;var R=H(this),C=R.resolve;return C(m),R.promise}}),f(f.S+f.F*!(q&&i(46)(function(m){v.all(m).catch(M)})),O,{all:function(m){var R=this,C=H(R),x=C.resolve,K=C.reject,ft=k(function(){var Ut=[],Ye=0,Ne=1;_(m,!1,function(Wr){var _r=Ye++,Rr=!1;Ut.push(void 0),Ne++,R.resolve(Wr).then(function(Ft){Rr||(Rr=!0,Ut[_r]=Ft,--Ne||x(Ut))},K)}),--Ne||x(Ut)});return ft&&K(ft.error),C.promise},race:function(m){var R=this,C=H(R),x=C.reject,K=k(function(){_(m,!1,function(ft){R.resolve(ft).then(C.resolve,x)})});return K&&x(K.error),C.promise}})},function(t,s,i){"use strict";var n=i(61)(!0);i(27)(String,"String",function(o){this._t=String(o),this._i=0},function(){var o,c=this._t,a=this._i;return a>=c.length?{value:void 0,done:!0}:(o=n(c,a),this._i+=o.length,{value:o,done:!1})})},function(t,s,i){i(65);for(var n=i(2),o=i(5),c=i(10),a=i(1)("toStringTag"),l=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var h=l[u],f=n[h],d=f&&f.prototype;d&&!d[a]&&o(d,a,h),c[h]=c.Array}},function(t,s){t.exports=require("child_process")},function(t,s){t.exports=require("crypto")}])})});var Ze=E(dt=>{"use strict";gr();try{try{let{output:r}=F("nx/src/utils/output"),e;try{e=F("nx/src/utils/app-root").workspaceRoot}catch{e=F("nx/src/utils/workspace-root").workspaceRoot}dt.workspaceRoot=e,dt.output=r}catch{let{output:e}=F("@nrwl/workspace/src/utilities/output"),{appRootPath:t}=F("@nrwl/tao/src/utils/app-root");dt.workspaceRoot=t,dt.output=e}}catch{let e=t=>{var s;return`${t.title}

${(s=t.bodyLines)==null?void 0:s.join(`
`)}`};dt.output={note:t=>console.info(e(t)),error:t=>console.error(e(t)),warn:t=>console.warn(e(t)),success:t=>console.log(e(t)),addVerticalSeparator:()=>"",addNewline:()=>console.log(`
`)},dt.workspaceRoot=process.cwd()}});var ya={};Pe(ya,{ACCESS_TOKEN:()=>kt,DEFAULT_FILE_SIZE_LIMIT:()=>Pt,DISTRIBUTED_TASK_EXECUTION_INTERNAL_ERROR_STATUS_CODE:()=>xf,ENCRYPTION_KEY:()=>ma,NO_COMPLETED_TASKS_TIMEOUT:()=>Of,NO_MESSAGES_TIMEOUT:()=>Sf,NUMBER_OF_AXIOS_RETRIES:()=>wr,NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT:()=>If,NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE:()=>bf,NX_CLOUD_FORCE_METRICS:()=>Oi,NX_CLOUD_NO_TIMEOUTS:()=>Se,NX_CLOUD_UNLIMITED_OUTPUT:()=>Tf,NX_NO_CLOUD:()=>Nf,UNLIMITED_FILE_SIZE:()=>Mt,UNLIMITED_TIMEOUT:()=>Bt,VERBOSE_LOGGING:()=>U,agentRunningInDistributedExecution:()=>Lf,extractGitRef:()=>Df,extractGitSha:()=>Sr,getBranch:()=>Or,getCIExecutionEnv:()=>Cr,getCIExecutionId:()=>Ti,getCiEnvVars:()=>Pf,getMachineInfo:()=>Bf,getRunGroup:()=>xi,nxInvokedByRunner:()=>Af,parseCommand:()=>Mf});function Lf(r){return!!r}function Af(){return process.env.NX_INVOKED_BY_RUNNER==="true"||process.env.NX_CLOUD==="false"}function Sr(){try{return(0,Si.execSync)("git rev-parse HEAD",{stdio:"pipe"}).toString().trim()}catch{return}}function Df(){try{return(0,Si.execSync)("git rev-parse --symbolic-full-name HEAD",{stdio:"pipe"}).toString().trim()}catch{return}}function Uf(){try{let r=(0,pa.readFileSync)((0,Jr.join)(wf,"nx-cloud.env"));return vf.parse(r)}catch{return{}}}function Ff(){let r=Uf();kt=process.env.NX_CLOUD_AUTH_TOKEN||process.env.NX_CLOUD_ACCESS_TOKEN||r.NX_CLOUD_AUTH_TOKEN||r.NX_CLOUD_ACCESS_TOKEN,ma=process.env.NX_CLOUD_ENCRYPTION_KEY||r.NX_CLOUD_ENCRYPTION_KEY,U=process.env.NX_VERBOSE_LOGGING==="true"||r.NX_VERBOSE_LOGGING==="true",Se=process.env.NX_CLOUD_NO_TIMEOUTS==="true"||r.NX_CLOUD_NO_TIMEOUTS==="true"}function Ti(){return Ea()}function Ea(){return process.env.NX_CI_EXECUTION_ID!==void 0?process.env.NX_CI_EXECUTION_ID:process.env.NX_RUN_GROUP!==void 0?process.env.NX_RUN_GROUP:process.env.CIRCLECI!==void 0&&process.env.CIRCLE_WORKFLOW_ID?process.env.CIRCLE_WORKFLOW_ID:process.env.TRAVIS_BUILD_ID!==void 0?process.env.TRAVIS_BUILD_ID:process.env.GITHUB_ACTIONS&&process.env.GITHUB_RUN_ID?`${process.env.GITHUB_RUN_ID}-${process.env.GITHUB_RUN_ATTEMPT}`:process.env.BUILD_BUILDID?process.env.BUILD_BUILDID:process.env.BITBUCKET_BUILD_NUMBER!==void 0?process.env.BITBUCKET_BUILD_NUMBER:process.env.VERCEL_GIT_COMMIT_SHA!==void 0?process.env.VERCEL_GIT_COMMIT_SHA:process.env.CI_PIPELINE_ID?process.env.CI_PIPELINE_ID:process.env.BUILD_TAG?process.env.BUILD_TAG:null}function Cr(){return process.env.NX_CI_EXECUTION_ENV??""}function xi(){if(process.env.NX_RUN_GROUP!==void 0)return process.env.NX_RUN_GROUP;let r=Ea();return r?Cr()?`${r}-${Cr()}`:r:Sr()}function Or(){if(process.env.NX_BRANCH!==void 0)return process.env.NX_BRANCH;if(process.env.CIRCLECI!==void 0){if(process.env.CIRCLE_PR_NUMBER!==void 0)return process.env.CIRCLE_PR_NUMBER;if(process.env.CIRCLE_PULL_REQUEST!==void 0){let r=process.env.CIRCLE_PULL_REQUEST.split("/");return r[r.length-1]}else if(process.env.CIRCLE_BRANCH!==void 0)return process.env.CIRCLE_BRANCH}if(process.env.TRAVIS_PULL_REQUEST!==void 0)return process.env.TRAVIS_PULL_REQUEST;if(process.env.GITHUB_ACTIONS){if(process.env.GITHUB_REF){let r=process.env.GITHUB_REF.match(/refs\/pull\/(\d+)\/merge/);if(r)return r[1]}return process.env.GITHUB_HEAD_REF??""}return process.env.BITBUCKET_PR_ID!==void 0?process.env.BITBUCKET_PR_ID:process.env.VERCEL_GIT_COMMIT_REF!==void 0?process.env.VERCEL_GIT_COMMIT_REF:process.env.CI_MERGE_REQUEST_IID?process.env.CI_MERGE_REQUEST_IID:process.env.CI_COMMIT_BRANCH?process.env.CI_COMMIT_BRANCH:process.env.GIT_BRANCH?process.env.GIT_BRANCH:null}function Bf(){let r=require("os"),e=(0,da.createHash)("md5");return e.update(Cf()),{machineId:e.digest("base64"),platform:r.platform(),version:r.version?r.version():"",cpuCores:r.cpus().length}}function Mf(){let r=(0,Jr.parse)(process.argv[1]).name,e=`${process.argv.slice(2).join(" ")}`;return`${r} ${e}`}function Pf(r,e){let t=["NX_VERBOSE_LOGGING","NX_CLOUD_DEBUG_URLS","NX_CLOUD_ACCESS_TOKEN"];r&&r.split(",").forEach(n=>{t.push(n.trim())});let s=Object.fromEntries(t.map(n=>[n,process.env[n]]).filter(([,n])=>n!==void 0));s.NX_VERBOSE_LOGGING=U,s.NX_CLOUD_ACCESS_TOKEN=kt??e;let i=Object.fromEntries(Object.entries(s).filter(([,n])=>n!==void 0));return U&&(fa.note({title:"Environment variables passed to cloud:",bodyLines:Object.entries(i).map(([n,o])=>`${n}: ${o}`)}),fa.addNewline()),i}var Si,da,pa,Jr,vf,Cf,fa,wf,Bt,Sf,Of,Mt,Tf,Pt,xf,If,bf,Oi,wr,Nf,kt,ma,U,Se,pt=le(()=>{"use strict";Si=require("child_process"),da=require("crypto"),pa=require("fs"),Jr=require("path");oa();vf=la(),{machineIdSync:Cf}=ha(),{output:fa,workspaceRoot:wf}=Ze(),Bt=9999999,Sf=process.env.NX_CLOUD_AGENT_TIMEOUT_MS?Number(process.env.NX_CLOUD_AGENT_TIMEOUT_MS):36e5,Of=process.env.NX_CLOUD_ORCHESTRATOR_TIMEOUT_MS?Number(process.env.NX_CLOUD_ORCHESTRATOR_TIMEOUT_MS):36e5,Mt=1e3*1e3*1e4,Tf=process.env.NX_CLOUD_UNLIMITED_OUTPUT==="true",Pt=1e3*1e3*300,xf=166,If=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT?Number(process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT):null,bf=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE!="false",Oi=process.env.NX_CLOUD_FORCE_METRICS==="true",wr=process.env.NX_CLOUD_NUMBER_OF_RETRIES?Number(process.env.NX_CLOUD_NUMBER_OF_RETRIES):na()?10:1,Nf=process.env.NX_NO_CLOUD==="true";Ff()});function qt(r){return new Promise(e=>{setTimeout(()=>e(null),r)})}var Ii=le(()=>{"use strict"});var bi=E((gy,_a)=>{"use strict";_a.exports=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}}});var te=E((vy,va)=>{"use strict";var kf=bi(),mt=Object.prototype.toString;function Ai(r){return mt.call(r)==="[object Array]"}function Ni(r){return typeof r>"u"}function qf(r){return r!==null&&!Ni(r)&&r.constructor!==null&&!Ni(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Hf(r){return mt.call(r)==="[object ArrayBuffer]"}function Gf(r){return typeof FormData<"u"&&r instanceof FormData}function zf(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r.buffer instanceof ArrayBuffer,e}function Vf(r){return typeof r=="string"}function $f(r){return typeof r=="number"}function Ra(r){return r!==null&&typeof r=="object"}function Qr(r){if(mt.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function jf(r){return mt.call(r)==="[object Date]"}function Xf(r){return mt.call(r)==="[object File]"}function Kf(r){return mt.call(r)==="[object Blob]"}function ga(r){return mt.call(r)==="[object Function]"}function Wf(r){return Ra(r)&&ga(r.pipe)}function Yf(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}function Zf(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Jf(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Di(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),Ai(r))for(var t=0,s=r.length;t<s;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function Li(){var r={};function e(i,n){Qr(r[n])&&Qr(i)?r[n]=Li(r[n],i):Qr(i)?r[n]=Li({},i):Ai(i)?r[n]=i.slice():r[n]=i}for(var t=0,s=arguments.length;t<s;t++)Di(arguments[t],e);return r}function Qf(r,e,t){return Di(e,function(i,n){t&&typeof i=="function"?r[n]=kf(i,t):r[n]=i}),r}function ed(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}va.exports={isArray:Ai,isArrayBuffer:Hf,isBuffer:qf,isFormData:Gf,isArrayBufferView:zf,isString:Vf,isNumber:$f,isObject:Ra,isPlainObject:Qr,isUndefined:Ni,isDate:jf,isFile:Xf,isBlob:Kf,isFunction:ga,isStream:Wf,isURLSearchParams:Yf,isStandardBrowserEnv:Jf,forEach:Di,merge:Li,extend:Qf,trim:Zf,stripBOM:ed}});var es=E((Cy,wa)=>{"use strict";var Ht=te();function Ca(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}wa.exports=function(e,t,s){if(!t)return e;var i;if(s)i=s(t);else if(Ht.isURLSearchParams(t))i=t.toString();else{var n=[];Ht.forEach(t,function(a,l){a===null||typeof a>"u"||(Ht.isArray(a)?l=l+"[]":a=[a],Ht.forEach(a,function(h){Ht.isDate(h)?h=h.toISOString():Ht.isObject(h)&&(h=JSON.stringify(h)),n.push(Ca(l)+"="+Ca(h))}))}),i=n.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var Oa=E((wy,Sa)=>{"use strict";var td=te();function ts(){this.handlers=[]}ts.prototype.use=function(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};ts.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};ts.prototype.forEach=function(e){td.forEach(this.handlers,function(s){s!==null&&e(s)})};Sa.exports=ts});var xa=E((Sy,Ta)=>{"use strict";var rd=te();Ta.exports=function(e,t){rd.forEach(e,function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])})}});var rs=E((Oy,Ia)=>{"use strict";Ia.exports=function(e,t,s,i,n){return e.config=t,s&&(e.code=s),e.request=i,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var ss=E((Ty,ba)=>{"use strict";var sd=rs();ba.exports=function(e,t,s,i,n){var o=new Error(e);return sd(o,t,s,i,n)}});var Ui=E((xy,Na)=>{"use strict";var id=ss();Na.exports=function(e,t,s){var i=s.config.validateStatus;!s.status||!i||i(s.status)?e(s):t(id("Request failed with status code "+s.status,s.config,null,s.request,s))}});var Aa=E((Iy,La)=>{"use strict";var is=te();La.exports=is.isStandardBrowserEnv()?function(){return{write:function(t,s,i,n,o,c){var a=[];a.push(t+"="+encodeURIComponent(s)),is.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),is.isString(n)&&a.push("path="+n),is.isString(o)&&a.push("domain="+o),c===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Ua=E((by,Da)=>{"use strict";Da.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var Ba=E((Ny,Fa)=>{"use strict";Fa.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var Fi=E((Ly,Ma)=>{"use strict";var nd=Ua(),od=Ba();Ma.exports=function(e,t){return e&&!nd(t)?od(e,t):t}});var ka=E((Ay,Pa)=>{"use strict";var Bi=te(),ad=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Pa.exports=function(e){var t={},s,i,n;return e&&Bi.forEach(e.split(`
`),function(c){if(n=c.indexOf(":"),s=Bi.trim(c.substr(0,n)).toLowerCase(),i=Bi.trim(c.substr(n+1)),s){if(t[s]&&ad.indexOf(s)>=0)return;s==="set-cookie"?t[s]=(t[s]?t[s]:[]).concat([i]):t[s]=t[s]?t[s]+", "+i:i}}),t}});var Ga=E((Dy,Ha)=>{"use strict";var qa=te();Ha.exports=qa.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),s;function i(n){var o=n;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return s=i(window.location.href),function(o){var c=qa.isString(o)?i(o):o;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}()});var Va=E((Uy,za)=>{"use strict";var ns=te(),cd=Ui(),ud=Aa(),ld=es(),hd=Fi(),fd=ka(),dd=Ga(),Mi=ss();za.exports=function(e){return new Promise(function(s,i){var n=e.data,o=e.headers,c=e.responseType;ns.isFormData(n)&&delete o["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(l+":"+u)}var h=hd(e.baseURL,e.url);a.open(e.method.toUpperCase(),ld(h,e.params,e.paramsSerializer),!0),a.timeout=e.timeout;function f(){if(a){var p="getAllResponseHeaders"in a?fd(a.getAllResponseHeaders()):null,y=!c||c==="text"||c==="json"?a.responseText:a.response,_={data:y,status:a.status,statusText:a.statusText,headers:p,config:e,request:a};cd(s,i,_),a=null}}if("onloadend"in a?a.onloadend=f:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(f)},a.onabort=function(){a&&(i(Mi("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){i(Mi("Network Error",e,null,a)),a=null},a.ontimeout=function(){var y="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(y=e.timeoutErrorMessage),i(Mi(y,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",a)),a=null},ns.isStandardBrowserEnv()){var d=(e.withCredentials||dd(h))&&e.xsrfCookieName?ud.read(e.xsrfCookieName):void 0;d&&(o[e.xsrfHeaderName]=d)}"setRequestHeader"in a&&ns.forEach(o,function(y,_){typeof n>"u"&&_.toLowerCase()==="content-type"?delete o[_]:a.setRequestHeader(_,y)}),ns.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),c&&c!=="json"&&(a.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(y){a&&(a.abort(),i(y),a=null)}),n||(n=null),a.send(n)})}});var ja=E((Fy,$a)=>{"use strict";var Gt=1e3,zt=Gt*60,Vt=zt*60,Et=Vt*24,pd=Et*7,md=Et*365.25;$a.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Ed(r);if(t==="number"&&isFinite(r))return e.long?_d(r):yd(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Ed(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return t*md;case"weeks":case"week":case"w":return t*pd;case"days":case"day":case"d":return t*Et;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Vt;case"minutes":case"minute":case"mins":case"min":case"m":return t*zt;case"seconds":case"second":case"secs":case"sec":case"s":return t*Gt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function yd(r){var e=Math.abs(r);return e>=Et?Math.round(r/Et)+"d":e>=Vt?Math.round(r/Vt)+"h":e>=zt?Math.round(r/zt)+"m":e>=Gt?Math.round(r/Gt)+"s":r+"ms"}function _d(r){var e=Math.abs(r);return e>=Et?os(r,e,Et,"day"):e>=Vt?os(r,e,Vt,"hour"):e>=zt?os(r,e,zt,"minute"):e>=Gt?os(r,e,Gt,"second"):r+" ms"}function os(r,e,t,s){var i=e>=t*1.5;return Math.round(r/t)+" "+s+(i?"s":"")}});var Pi=E((By,Xa)=>{"use strict";function Rd(r){t.debug=t,t.default=t,t.coerce=a,t.disable=n,t.enable=i,t.enabled=o,t.humanize=ja(),t.destroy=l,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let h=0;for(let f=0;f<u.length;f++)h=(h<<5)-h+u.charCodeAt(f),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=e;function t(u){let h,f=null,d,p;function y(..._){if(!y.enabled)return;let g=y,w=Number(new Date),S=w-(h||w);g.diff=S,g.prev=h,g.curr=w,h=w,_[0]=t.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let O=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(v,A)=>{if(v==="%%")return"%";O++;let I=t.formatters[A];if(typeof I=="function"){let M=_[O];v=I.call(g,M),_.splice(O,1),O--}return v}),t.formatArgs.call(g,_),(g.log||t.log).apply(g,_)}return y.namespace=u,y.useColors=t.useColors(),y.color=t.selectColor(u),y.extend=s,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(d!==t.namespaces&&(d=t.namespaces,p=t.enabled(u)),p),set:_=>{f=_}}),typeof t.init=="function"&&t.init(y),y}function s(u,h){let f=t(this.namespace+(typeof h>"u"?":":h)+u);return f.log=this.log,f}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let h,f=(typeof u=="string"?u:"").split(/[\s,]+/),d=f.length;for(h=0;h<d;h++)f[h]&&(u=f[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function n(){let u=[...t.names.map(c),...t.skips.map(c).map(h=>"-"+h)].join(",");return t.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let h,f;for(h=0,f=t.skips.length;h<f;h++)if(t.skips[h].test(u))return!1;for(h=0,f=t.names.length;h<f;h++)if(t.names[h].test(u))return!0;return!1}function c(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function a(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Xa.exports=Rd});var Ka=E((he,as)=>{"use strict";he.formatArgs=vd;he.save=Cd;he.load=wd;he.useColors=gd;he.storage=Sd();he.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();he.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gd(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function vd(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+as.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,s=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(s=t))}),r.splice(s,0,e)}he.log=console.debug||console.log||(()=>{});function Cd(r){try{r?he.storage.setItem("debug",r):he.storage.removeItem("debug")}catch{}}function wd(){let r;try{r=he.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function Sd(){try{return localStorage}catch{}}as.exports=Pi()(he);var{formatters:Od}=as.exports;Od.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Ya=E((My,Wa)=>{"use strict";Wa.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",s=e.indexOf(t+r),i=e.indexOf("--");return s!==-1&&(i===-1||s<i)}});var Qa=E((Py,Ja)=>{"use strict";var Td=require("os"),Za=require("tty"),ye=Ya(),{env:V}=process,Je;ye("no-color")||ye("no-colors")||ye("color=false")||ye("color=never")?Je=0:(ye("color")||ye("colors")||ye("color=true")||ye("color=always"))&&(Je=1);"FORCE_COLOR"in V&&(V.FORCE_COLOR==="true"?Je=1:V.FORCE_COLOR==="false"?Je=0:Je=V.FORCE_COLOR.length===0?1:Math.min(parseInt(V.FORCE_COLOR,10),3));function ki(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function qi(r,e){if(Je===0)return 0;if(ye("color=16m")||ye("color=full")||ye("color=truecolor"))return 3;if(ye("color=256"))return 2;if(r&&!e&&Je===void 0)return 0;let t=Je||0;if(V.TERM==="dumb")return t;if(process.platform==="win32"){let s=Td.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in V)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(s=>s in V)||V.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in V)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(V.TEAMCITY_VERSION)?1:0;if(V.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in V){let s=parseInt((V.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(V.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(V.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(V.TERM)||"COLORTERM"in V?1:t}function xd(r){let e=qi(r,r&&r.isTTY);return ki(e)}Ja.exports={supportsColor:xd,stdout:ki(qi(!0,Za.isatty(1))),stderr:ki(qi(!0,Za.isatty(2)))}});var tc=E((j,us)=>{"use strict";var Id=require("tty"),cs=require("util");j.init=Fd;j.log=Ad;j.formatArgs=Nd;j.save=Dd;j.load=Ud;j.useColors=bd;j.destroy=cs.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");j.colors=[6,2,3,4,5,1];try{let r=Qa();r&&(r.stderr||r).level>=2&&(j.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}j.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,n)=>n.toUpperCase()),s=process.env[e];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),r[t]=s,r},{});function bd(){return"colors"in j.inspectOpts?!!j.inspectOpts.colors:Id.isatty(process.stderr.fd)}function Nd(r){let{namespace:e,useColors:t}=this;if(t){let s=this.color,i="\x1B[3"+(s<8?s:"8;5;"+s),n=`  ${i};1m${e} \x1B[0m`;r[0]=n+r[0].split(`
`).join(`
`+n),r.push(i+"m+"+us.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=Ld()+e+" "+r[0]}function Ld(){return j.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Ad(...r){return process.stderr.write(cs.format(...r)+`
`)}function Dd(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function Ud(){return process.env.DEBUG}function Fd(r){r.inspectOpts={};let e=Object.keys(j.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=j.inspectOpts[e[t]]}us.exports=Pi()(j);var{formatters:ec}=us.exports;ec.o=function(r){return this.inspectOpts.colors=this.useColors,cs.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};ec.O=function(r){return this.inspectOpts.colors=this.useColors,cs.inspect(r,this.inspectOpts)}});var rc=E((ky,Hi)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Hi.exports=Ka():Hi.exports=tc()});var ic=E((qy,sc)=>{"use strict";var Tr;sc.exports=function(){if(!Tr){try{Tr=rc()("follow-redirects")}catch{}typeof Tr!="function"&&(Tr=function(){})}Tr.apply(null,arguments)}});var Wi=E((Hy,Ki)=>{"use strict";var yt=require("url"),Gi=yt.URL,Bd=require("http"),Md=require("https"),Vi=require("stream").Writable,ac=require("assert"),cc=ic(),$i=["abort","aborted","connect","error","socket","timeout"],ji=Object.create(null);$i.forEach(function(r){ji[r]=function(e,t,s){this._redirectable.emit(r,e,t,s)}});var Pd=Ir("ERR_INVALID_URL","Invalid URL",TypeError),nc=Ir("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),kd=Ir("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),qd=Ir("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Hd=Ir("ERR_STREAM_WRITE_AFTER_END","write after end"),Gd=Vi.prototype.destroy||lc;function ne(r,e){Vi.call(this),this._sanitizeOptions(r),this._options=r,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var t=this;this._onNativeResponse=function(s){t._processResponse(s)},this._performRequest()}ne.prototype=Object.create(Vi.prototype);ne.prototype.abort=function(){Xi(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};ne.prototype.destroy=function(r){return Xi(this._currentRequest,r),Gd.call(this,r),this};ne.prototype.write=function(r,e,t){if(this._ending)throw new Hd;if(!_t(r)&&!Vd(r))throw new TypeError("data should be a string, Buffer or Uint8Array");if(xr(e)&&(t=e,e=null),r.length===0){t&&t();return}this._requestBodyLength+r.length<=this._options.maxBodyLength?(this._requestBodyLength+=r.length,this._requestBodyBuffers.push({data:r,encoding:e}),this._currentRequest.write(r,e,t)):(this.emit("error",new qd),this.abort())};ne.prototype.end=function(r,e,t){if(xr(r)?(t=r,r=e=null):xr(e)&&(t=e,e=null),!r)this._ended=this._ending=!0,this._currentRequest.end(null,null,t);else{var s=this,i=this._currentRequest;this.write(r,e,function(){s._ended=!0,i.end(null,null,t)}),this._ending=!0}};ne.prototype.setHeader=function(r,e){this._options.headers[r]=e,this._currentRequest.setHeader(r,e)};ne.prototype.removeHeader=function(r){delete this._options.headers[r],this._currentRequest.removeHeader(r)};ne.prototype.setTimeout=function(r,e){var t=this;function s(o){o.setTimeout(r),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.emit("timeout"),n()},r),s(o)}function n(){t._timeout&&(clearTimeout(t._timeout),t._timeout=null),t.removeListener("abort",n),t.removeListener("error",n),t.removeListener("response",n),t.removeListener("close",n),e&&t.removeListener("timeout",e),t.socket||t._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",s),this.on("abort",n),this.on("error",n),this.on("response",n),this.on("close",n),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(r){ne.prototype[r]=function(e,t){return this._currentRequest[r](e,t)}});["aborted","connection","socket"].forEach(function(r){Object.defineProperty(ne.prototype,r,{get:function(){return this._currentRequest[r]}})});ne.prototype._sanitizeOptions=function(r){if(r.headers||(r.headers={}),r.host&&(r.hostname||(r.hostname=r.host),delete r.host),!r.pathname&&r.path){var e=r.path.indexOf("?");e<0?r.pathname=r.path:(r.pathname=r.path.substring(0,e),r.search=r.path.substring(e))}};ne.prototype._performRequest=function(){var r=this._options.protocol,e=this._options.nativeProtocols[r];if(!e){this.emit("error",new TypeError("Unsupported protocol "+r));return}if(this._options.agents){var t=r.slice(0,-1);this._options.agent=this._options.agents[t]}var s=this._currentRequest=e.request(this._options,this._onNativeResponse);s._redirectable=this;for(var i of $i)s.on(i,ji[i]);if(this._currentUrl=/^\//.test(this._options.path)?yt.format(this._options):this._options.path,this._isRedirect){var n=0,o=this,c=this._requestBodyBuffers;(function a(l){if(s===o._currentRequest)if(l)o.emit("error",l);else if(n<c.length){var u=c[n++];s.finished||s.write(u.data,u.encoding,a)}else o._ended&&s.end()})()}};ne.prototype._processResponse=function(r){var e=r.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:r.headers,statusCode:e});var t=r.headers.location;if(!t||this._options.followRedirects===!1||e<300||e>=400){r.responseUrl=this._currentUrl,r.redirects=this._redirects,this.emit("response",r),this._requestBodyBuffers=[];return}if(Xi(this._currentRequest),r.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new kd);return}var s,i=this._options.beforeRedirect;i&&(s=Object.assign({Host:r.req.getHeader("host")},this._options.headers));var n=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],zi(/^content-/i,this._options.headers));var o=zi(/^host$/i,this._options.headers),c=yt.parse(this._currentUrl),a=o||c.host,l=/^\w+:/.test(t)?this._currentUrl:yt.format(Object.assign(c,{host:a})),u;try{u=yt.resolve(l,t)}catch(p){this.emit("error",new nc({cause:p}));return}cc("redirecting to",u),this._isRedirect=!0;var h=yt.parse(u);if(Object.assign(this._options,h),(h.protocol!==c.protocol&&h.protocol!=="https:"||h.host!==a&&!zd(h.host,a))&&zi(/^(?:authorization|cookie)$/i,this._options.headers),xr(i)){var f={headers:r.headers,statusCode:e},d={url:l,method:n,headers:s};try{i(this._options,f,d)}catch(p){this.emit("error",p);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(p){this.emit("error",new nc({cause:p}))}};function uc(r){var e={maxRedirects:21,maxBodyLength:10485760},t={};return Object.keys(r).forEach(function(s){var i=s+":",n=t[i]=r[s],o=e[s]=Object.create(n);function c(l,u,h){if(_t(l)){var f;try{f=oc(new Gi(l))}catch{f=yt.parse(l)}if(!_t(f.protocol))throw new Pd({input:l});l=f}else Gi&&l instanceof Gi?l=oc(l):(h=u,u=l,l={protocol:i});return xr(u)&&(h=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=t,!_t(u.host)&&!_t(u.hostname)&&(u.hostname="::1"),ac.equal(u.protocol,i,"protocol mismatch"),cc("options",u),new ne(u,h)}function a(l,u,h){var f=o.request(l,u,h);return f.end(),f}Object.defineProperties(o,{request:{value:c,configurable:!0,enumerable:!0,writable:!0},get:{value:a,configurable:!0,enumerable:!0,writable:!0}})}),e}function lc(){}function oc(r){var e={protocol:r.protocol,hostname:r.hostname.startsWith("[")?r.hostname.slice(1,-1):r.hostname,hash:r.hash,search:r.search,pathname:r.pathname,path:r.pathname+r.search,href:r.href};return r.port!==""&&(e.port=Number(r.port)),e}function zi(r,e){var t;for(var s in e)r.test(s)&&(t=e[s],delete e[s]);return t===null||typeof t>"u"?void 0:String(t).trim()}function Ir(r,e,t){function s(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=r,this.message=this.cause?e+": "+this.cause.message:e}return s.prototype=new(t||Error),s.prototype.constructor=s,s.prototype.name="Error ["+r+"]",s}function Xi(r,e){for(var t of $i)r.removeListener(t,ji[t]);r.on("error",lc),r.destroy(e)}function zd(r,e){ac(_t(r)&&_t(e));var t=r.length-e.length-1;return t>0&&r[t]==="."&&r.endsWith(e)}function _t(r){return typeof r=="string"||r instanceof String}function xr(r){return typeof r=="function"}function Vd(r){return typeof r=="object"&&"length"in r}Ki.exports=uc({http:Bd,https:Md});Ki.exports.wrap=uc});var Yi=E((Gy,$d)=>{$d.exports={name:"axios",version:"0.21.2",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var Ec=E((zy,mc)=>{"use strict";var br=te(),hc=Ui(),jd=Fi(),Xd=es(),Kd=require("http"),Wd=require("https"),Yd=Wi().http,Zd=Wi().https,fc=require("url"),Jd=require("zlib"),Qd=Yi(),ls=ss(),Zi=rs(),dc=/https:?/;function pc(r,e,t){if(r.hostname=e.host,r.host=e.host,r.port=e.port,r.path=t,e.auth){var s=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");r.headers["Proxy-Authorization"]="Basic "+s}r.beforeRedirect=function(n){n.headers.host=n.host,pc(n,e,n.href)}}mc.exports=function(e){return new Promise(function(s,i){var n=function(T){s(T)},o=function(T){i(T)},c=e.data,a=e.headers;if("User-Agent"in a||"user-agent"in a?!a["User-Agent"]&&!a["user-agent"]&&(delete a["User-Agent"],delete a["user-agent"]):a["User-Agent"]="axios/"+Qd.version,c&&!br.isStream(c)){if(!Buffer.isBuffer(c))if(br.isArrayBuffer(c))c=Buffer.from(new Uint8Array(c));else if(br.isString(c))c=Buffer.from(c,"utf-8");else return o(ls("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));a["Content-Length"]=c.length}var l=void 0;if(e.auth){var u=e.auth.username||"",h=e.auth.password||"";l=u+":"+h}var f=jd(e.baseURL,e.url),d=fc.parse(f),p=d.protocol||"http:";if(!l&&d.auth){var y=d.auth.split(":"),_=y[0]||"",g=y[1]||"";l=_+":"+g}l&&delete a.Authorization;var w=dc.test(p),S=w?e.httpsAgent:e.httpAgent,O={path:Xd(d.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:a,agent:S,agents:{http:e.httpAgent,https:e.httpsAgent},auth:l};e.socketPath?O.socketPath=e.socketPath:(O.hostname=d.hostname,O.port=d.port);var L=e.proxy;if(!L&&L!==!1){var v=p.slice(0,-1)+"_proxy",A=process.env[v]||process.env[v.toUpperCase()];if(A){var I=fc.parse(A),M=process.env.no_proxy||process.env.NO_PROXY,q=!0;if(M){var ue=M.split(",").map(function(T){return T.trim()});q=!ue.some(function(T){return T?T==="*"||T[0]==="."&&d.hostname.substr(d.hostname.length-T.length)===T?!0:d.hostname===T:!1})}if(q&&(L={host:I.hostname,port:I.port,protocol:I.protocol},I.auth)){var se=I.auth.split(":");L.auth={username:se[0],password:se[1]}}}}L&&(O.headers.host=d.hostname+(d.port?":"+d.port:""),pc(O,L,p+"//"+d.hostname+(d.port?":"+d.port:"")+O.path));var H,Ee=w&&(L?dc.test(L.protocol):!0);e.transport?H=e.transport:e.maxRedirects===0?H=Ee?Wd:Kd:(e.maxRedirects&&(O.maxRedirects=e.maxRedirects),H=Ee?Zd:Yd),e.maxBodyLength>-1&&(O.maxBodyLength=e.maxBodyLength);var k=H.request(O,function(T){if(!k.aborted){var X=T,z=T.req||k;if(T.statusCode!==204&&z.method!=="HEAD"&&e.decompress!==!1)switch(T.headers["content-encoding"]){case"gzip":case"compress":case"deflate":X=X.pipe(Jd.createUnzip()),delete T.headers["content-encoding"];break}var be={status:T.statusCode,statusText:T.statusMessage,headers:T.headers,config:e,request:z};if(e.responseType==="stream")be.data=X,hc(n,o,be);else{var m=[],R=0;X.on("data",function(x){m.push(x),R+=x.length,e.maxContentLength>-1&&R>e.maxContentLength&&(X.destroy(),o(ls("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,z)))}),X.on("error",function(x){k.aborted||o(Zi(x,e,null,z))}),X.on("end",function(){var x=Buffer.concat(m);e.responseType!=="arraybuffer"&&(x=x.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(x=br.stripBOM(x))),be.data=x,hc(n,o,be)})}}});if(k.on("error",function(T){k.aborted&&T.code!=="ERR_FR_TOO_MANY_REDIRECTS"||o(Zi(T,e,null,k))}),e.timeout){var we=parseInt(e.timeout,10);if(isNaN(we)){o(ls("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",k));return}k.setTimeout(we,function(){k.abort(),o(ls("timeout of "+we+"ms exceeded",e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",k))})}e.cancelToken&&e.cancelToken.promise.then(function(T){k.aborted||(k.abort(),o(T))}),br.isStream(c)?c.on("error",function(T){o(Zi(T,e,null,k))}).pipe(k):k.end(c)})}});var fs=E((Vy,Rc)=>{"use strict";var re=te(),yc=xa(),ep=rs(),tp={"Content-Type":"application/x-www-form-urlencoded"};function _c(r,e){!re.isUndefined(r)&&re.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function rp(){var r;return typeof XMLHttpRequest<"u"?r=Va():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(r=Ec()),r}var hs={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:rp(),transformRequest:[function(e,t){return yc(t,"Accept"),yc(t,"Content-Type"),re.isFormData(e)||re.isArrayBuffer(e)||re.isBuffer(e)||re.isStream(e)||re.isFile(e)||re.isBlob(e)?e:re.isArrayBufferView(e)?e.buffer:re.isURLSearchParams(e)?(_c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):re.isObject(e)||t&&t["Content-Type"]==="application/json"?(_c(t,"application/json"),JSON.stringify(e)):e}],transformResponse:[function(e){var t=this.transitional,s=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,n=!s&&this.responseType==="json";if(n||i&&re.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(n)throw o.name==="SyntaxError"?ep(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};hs.headers={common:{Accept:"application/json, text/plain, */*"}};re.forEach(["delete","get","head"],function(e){hs.headers[e]={}});re.forEach(["post","put","patch"],function(e){hs.headers[e]=re.merge(tp)});Rc.exports=hs});var vc=E(($y,gc)=>{"use strict";var sp=te(),ip=fs();gc.exports=function(e,t,s){var i=this||ip;return sp.forEach(s,function(o){e=o.call(i,e,t)}),e}});var Ji=E((jy,Cc)=>{"use strict";Cc.exports=function(e){return!!(e&&e.__CANCEL__)}});var Oc=E((Xy,Sc)=>{"use strict";var wc=te(),Qi=vc(),np=Ji(),op=fs();function en(r){r.cancelToken&&r.cancelToken.throwIfRequested()}Sc.exports=function(e){en(e),e.headers=e.headers||{},e.data=Qi.call(e,e.data,e.headers,e.transformRequest),e.headers=wc.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),wc.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||op.adapter;return t(e).then(function(i){return en(e),i.data=Qi.call(e,i.data,i.headers,e.transformResponse),i},function(i){return np(i)||(en(e),i&&i.response&&(i.response.data=Qi.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var tn=E((Ky,Tc)=>{"use strict";var W=te();Tc.exports=function(e,t){t=t||{};var s={},i=["url","method","data"],n=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],c=["validateStatus"];function a(f,d){return W.isPlainObject(f)&&W.isPlainObject(d)?W.merge(f,d):W.isPlainObject(d)?W.merge({},d):W.isArray(d)?d.slice():d}function l(f){W.isUndefined(t[f])?W.isUndefined(e[f])||(s[f]=a(void 0,e[f])):s[f]=a(e[f],t[f])}W.forEach(i,function(d){W.isUndefined(t[d])||(s[d]=a(void 0,t[d]))}),W.forEach(n,l),W.forEach(o,function(d){W.isUndefined(t[d])?W.isUndefined(e[d])||(s[d]=a(void 0,e[d])):s[d]=a(void 0,t[d])}),W.forEach(c,function(d){d in t?s[d]=a(e[d],t[d]):d in e&&(s[d]=a(void 0,e[d]))});var u=i.concat(n).concat(o).concat(c),h=Object.keys(e).concat(Object.keys(t)).filter(function(d){return u.indexOf(d)===-1});return W.forEach(h,l),s}});var Lc=E((Wy,Nc)=>{"use strict";var Ic=Yi(),rn={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){rn[r]=function(s){return typeof s===r||"a"+(e<1?"n ":" ")+r}});var xc={},ap=Ic.version.split(".");function bc(r,e){for(var t=e?e.split("."):ap,s=r.split("."),i=0;i<3;i++){if(t[i]>s[i])return!0;if(t[i]<s[i])return!1}return!1}rn.transitional=function(e,t,s){var i=t&&bc(t);function n(o,c){return"[Axios v"+Ic.version+"] Transitional option '"+o+"'"+c+(s?". "+s:"")}return function(o,c,a){if(e===!1)throw new Error(n(c," has been removed in "+t));return i&&!xc[c]&&(xc[c]=!0,console.warn(n(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,c,a):!0}};function cp(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var s=Object.keys(r),i=s.length;i-- >0;){var n=s[i],o=e[n];if(o){var c=r[n],a=c===void 0||o(c,n,r);if(a!==!0)throw new TypeError("option "+n+" must be "+a);continue}if(t!==!0)throw Error("Unknown option "+n)}}Nc.exports={isOlderVersion:bc,assertOptions:cp,validators:rn}});var Mc=E((Yy,Bc)=>{"use strict";var Uc=te(),up=es(),Ac=Oa(),Dc=Oc(),ds=tn(),Fc=Lc(),$t=Fc.validators;function Nr(r){this.defaults=r,this.interceptors={request:new Ac,response:new Ac}}Nr.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=ds(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&Fc.assertOptions(t,{silentJSONParsing:$t.transitional($t.boolean,"1.0.0"),forcedJSONParsing:$t.transitional($t.boolean,"1.0.0"),clarifyTimeoutError:$t.transitional($t.boolean,"1.0.0")},!1);var s=[],i=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(e)===!1||(i=i&&f.synchronous,s.unshift(f.fulfilled,f.rejected))});var n=[];this.interceptors.response.forEach(function(f){n.push(f.fulfilled,f.rejected)});var o;if(!i){var c=[Dc,void 0];for(Array.prototype.unshift.apply(c,s),c.concat(n),o=Promise.resolve(e);c.length;)o=o.then(c.shift(),c.shift());return o}for(var a=e;s.length;){var l=s.shift(),u=s.shift();try{a=l(a)}catch(h){u(h);break}}try{o=Dc(a)}catch(h){return Promise.reject(h)}for(;n.length;)o=o.then(n.shift(),n.shift());return o};Nr.prototype.getUri=function(e){return e=ds(this.defaults,e),up(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Uc.forEach(["delete","get","head","options"],function(e){Nr.prototype[e]=function(t,s){return this.request(ds(s||{},{method:e,url:t,data:(s||{}).data}))}});Uc.forEach(["post","put","patch"],function(e){Nr.prototype[e]=function(t,s,i){return this.request(ds(i||{},{method:e,url:t,data:s}))}});Bc.exports=Nr});var nn=E((Zy,Pc)=>{"use strict";function sn(r){this.message=r}sn.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};sn.prototype.__CANCEL__=!0;Pc.exports=sn});var qc=E((Jy,kc)=>{"use strict";var lp=nn();function ps(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;r(function(i){t.reason||(t.reason=new lp(i),e(t.reason))})}ps.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};ps.source=function(){var e,t=new ps(function(i){e=i});return{token:t,cancel:e}};kc.exports=ps});var Gc=E((Qy,Hc)=>{"use strict";Hc.exports=function(e){return function(s){return e.apply(null,s)}}});var Vc=E((e_,zc)=>{"use strict";zc.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var Xc=E((t_,on)=>{"use strict";var $c=te(),hp=bi(),ms=Mc(),fp=tn(),dp=fs();function jc(r){var e=new ms(r),t=hp(ms.prototype.request,e);return $c.extend(t,ms.prototype,e),$c.extend(t,e),t}var Oe=jc(dp);Oe.Axios=ms;Oe.create=function(e){return jc(fp(Oe.defaults,e))};Oe.Cancel=nn();Oe.CancelToken=qc();Oe.isCancel=Ji();Oe.all=function(e){return Promise.all(e)};Oe.spread=Gc();Oe.isAxiosError=Vc();on.exports=Oe;on.exports.default=Oe});var an=E((r_,Kc)=>{"use strict";Kc.exports=Xc()});function jt(r,e=1e4){let t=n=>n,s=process.env.NX_CLOUD_API||r.url||"https://cloud.nx.app",i=kt?kt:r.accessToken;if(!i)throw new Error("Unable to authenticate. Either define accessToken in nx.json or set the NX_CLOUD_ACCESS_TOKEN env variable.");if(r.customProxyConfigPath){let{nxCloudProxyConfig:n}=require((0,Wc.join)(process.cwd(),r.customProxyConfigPath));t=n??t}return pp.create(t({baseURL:s,timeout:Se?Bt:e,headers:{authorization:i,"Nx-Cloud-Client-Version":r.clientVersion||"unknown"}}))}async function ln(r,e){let t=new Date,s=await e();return U&&console.log(`${r}: ${new Date().getTime()-t.getTime()}`),s}async function qe(r,e=wr){try{return await r()}catch(t){let s=t.response&&t.response.status||t.code;(s===401||s===403)&&(e=0);let i=t.response?t.response.data.message?t.response.data.message:t.response.data:t.message;if(e===0)throw typeof i!="string"&&(i=t.message),U&&cn.note({title:`Connection to Nx Cloud failed with status code ${s}`,bodyLines:[`${s}: ${i}`]}),new un("failure",mp(s),t);if(s==429){if(!Es){let n=1e4+(wr+1-e)*6e4*Math.random();cn.note({title:`Received Code ${s}. ${i} Retrying in ${n}ms.`}),Es=qt(n)}await Es,Es=null}else{let n=1e3+(wr+1-e)*4e3*Math.random();U&&cn.note({title:`Received Code ${s}. Retrying in ${n}ms.`}),await qt(n)}return qe(r,e-1)}}function mp(r){let e=`${r}:`;switch(r){case 403:return`${e} Access to resource is not authorized.`;case 404:return`${e} Cannot find requested resource.`;case 500:return`${e} Unexpected server error.`;case"ECONNABORTED":case"ETIMEOUT":return`${e} Connection timed out, check for other network problems.`;case"ECONNRESET":return`${e} The connection to Nx Cloud was closed suddenly.`;case"ECONNREFUSED":return`${e} Cannot connect to server. Please check that you have the correct server address and port number.`;case"ENOTFOUND":return`${e} DNS error due to invalid host. Are you accessing Nx Cloud from a network proxy?`;case"SELF_SIGNED_CERT_IN_CHAIN":return`${e} Found a self-signed cert in certificate chain. Ensure you have verified trust for all certs in your network.`;default:return`${e} Unable to connect to Nx Cloud.`}}var Wc,cn,pp,un,Es,Lr=le(()=>{"use strict";Wc=require("path");pt();Ii();({output:cn}=Ze()),pp=an(),un=class{constructor(e,t,s){this.type=e;this.message=t;this.axiosException=s}};Es=null});function ys(r){Ep()?(process.stdout.write(`   ${hn(r)}`),Le.addNewline(),Le.addNewline()):yp()?(Le.addNewline(),process.stdout.write(`${hn(r)}`),Le.addNewline(),Le.addNewline()):(process.stdout.write(`  ${hn(r)}`),Le.addNewline(),Le.addNewline())}function Ep(){try{return F("nx/src/tasks-runner/life-cycles/dynamic-run-many-terminal-output-life-cycle"),!0}catch{try{return F("@nrwl/workspace/src/tasks-runner/life-cycles/dynamic-run-many-terminal-output-life-cycle"),!0}catch{return!1}}}function hn(r){let e;if(typeof Le.dim=="function")return Le.dim(r);try{return Le.colors.gray(r)}catch{return r}}function yp(){return process.argv.indexOf("run-many")===-1&&process.argv.indexOf("affected")===-1}var Le,fn=le(()=>{"use strict";gr();({output:Le}=Ze())});var Zc={};Pe(Zc,{RUNNER_FAILURE_PERF_ENTRY:()=>gt,createMetricRecorder:()=>Rt,mapRespToPerfEntry:()=>Te,submitRunMetrics:()=>gp});var dn,Yc,Rt,Te,gt,_p,Rp,gp,_s=le(()=>{"use strict";dn=require("perf_hooks");Lr();pt();fn();Yc=[],Rt=r=>{let e=dn.performance.now();return{recordMetric:s=>{let i=dn.performance.now();s.durationMs=i-e,s.entryType=r,Yc.push(s)}}},Te=r=>{var e;return{success:((e=r==null?void 0:r.status)==null?void 0:e.toString().startsWith("2"))??!1,statusCode:(r==null?void 0:r.status)??-1}},gt={success:!1,statusCode:-1},_p=.1,Rp=.01,gp=r=>{let e;Or()?e=_p:e=Rp;try{return Oi||Math.random()<e?(U&&ys("Submitting runner metrics for this run."),jt(r).post("/nx-cloud/save-metrics",{entries:Yc}).catch(s=>{})):Promise.resolve()}catch{}}});var Xt=E((h_,Qc)=>{"use strict";var Jc=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);Qc.exports=r=>r?Object.keys(r).map(e=>[Jc.has(e)?Jc.get(e):e,r[e]]).reduce((e,t)=>(e[t[0]]=t[1],e),Object.create(null)):{}});var Wt=E((f_,cu)=>{"use strict";var eu=typeof process=="object"&&process?process:{stdout:null,stderr:null},vp=require("events"),tu=require("stream"),ru=require("string_decoder").StringDecoder,He=Symbol("EOF"),Ge=Symbol("maybeEmitEnd"),Qe=Symbol("emittedEnd"),Rs=Symbol("emittingEnd"),Ar=Symbol("emittedError"),gs=Symbol("closed"),su=Symbol("read"),vs=Symbol("flush"),iu=Symbol("flushChunk"),oe=Symbol("encoding"),ze=Symbol("decoder"),Cs=Symbol("flowing"),Dr=Symbol("paused"),Kt=Symbol("resume"),$=Symbol("bufferLength"),pn=Symbol("bufferPush"),mn=Symbol("bufferShift"),Y=Symbol("objectMode"),Z=Symbol("destroyed"),En=Symbol("emitData"),nu=Symbol("emitEnd"),yn=Symbol("emitEnd2"),Ve=Symbol("async"),Ur=r=>Promise.resolve().then(r),ou=global._MP_NO_ITERATOR_SYMBOLS_!=="1",Cp=ou&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),wp=ou&&Symbol.iterator||Symbol("iterator not implemented"),Sp=r=>r==="end"||r==="finish"||r==="prefinish",Op=r=>r instanceof ArrayBuffer||typeof r=="object"&&r.constructor&&r.constructor.name==="ArrayBuffer"&&r.byteLength>=0,Tp=r=>!Buffer.isBuffer(r)&&ArrayBuffer.isView(r),ws=class{constructor(e,t,s){this.src=e,this.dest=t,this.opts=s,this.ondrain=()=>e[Kt](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},_n=class extends ws{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,s){super(e,t,s),this.proxyErrors=i=>t.emit("error",i),e.on("error",this.proxyErrors)}};cu.exports=class au extends tu{constructor(e){super(),this[Cs]=!1,this[Dr]=!1,this.pipes=[],this.buffer=[],this[Y]=e&&e.objectMode||!1,this[Y]?this[oe]=null:this[oe]=e&&e.encoding||null,this[oe]==="buffer"&&(this[oe]=null),this[Ve]=e&&!!e.async||!1,this[ze]=this[oe]?new ru(this[oe]):null,this[He]=!1,this[Qe]=!1,this[Rs]=!1,this[gs]=!1,this[Ar]=null,this.writable=!0,this.readable=!0,this[$]=0,this[Z]=!1}get bufferLength(){return this[$]}get encoding(){return this[oe]}set encoding(e){if(this[Y])throw new Error("cannot set encoding in objectMode");if(this[oe]&&e!==this[oe]&&(this[ze]&&this[ze].lastNeed||this[$]))throw new Error("cannot change encoding");this[oe]!==e&&(this[ze]=e?new ru(e):null,this.buffer.length&&(this.buffer=this.buffer.map(t=>this[ze].write(t)))),this[oe]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Y]}set objectMode(e){this[Y]=this[Y]||!!e}get async(){return this[Ve]}set async(e){this[Ve]=this[Ve]||!!e}write(e,t,s){if(this[He])throw new Error("write after end");if(this[Z])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(s=t,t="utf8"),t||(t="utf8");let i=this[Ve]?Ur:n=>n();return!this[Y]&&!Buffer.isBuffer(e)&&(Tp(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Op(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Y]?(this.flowing&&this[$]!==0&&this[vs](!0),this.flowing?this.emit("data",e):this[pn](e),this[$]!==0&&this.emit("readable"),s&&i(s),this.flowing):e.length?(typeof e=="string"&&!(t===this[oe]&&!this[ze].lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[oe]&&(e=this[ze].write(e)),this.flowing&&this[$]!==0&&this[vs](!0),this.flowing?this.emit("data",e):this[pn](e),this[$]!==0&&this.emit("readable"),s&&i(s),this.flowing):(this[$]!==0&&this.emit("readable"),s&&i(s),this.flowing)}read(e){if(this[Z])return null;if(this[$]===0||e===0||e>this[$])return this[Ge](),null;this[Y]&&(e=null),this.buffer.length>1&&!this[Y]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[$])]);let t=this[su](e||null,this.buffer[0]);return this[Ge](),t}[su](e,t){return e===t.length||e===null?this[mn]():(this.buffer[0]=t.slice(e),t=t.slice(0,e),this[$]-=e),this.emit("data",t),!this.buffer.length&&!this[He]&&this.emit("drain"),t}end(e,t,s){return typeof e=="function"&&(s=e,e=null),typeof t=="function"&&(s=t,t="utf8"),e&&this.write(e,t),s&&this.once("end",s),this[He]=!0,this.writable=!1,(this.flowing||!this[Dr])&&this[Ge](),this}[Kt](){this[Z]||(this[Dr]=!1,this[Cs]=!0,this.emit("resume"),this.buffer.length?this[vs]():this[He]?this[Ge]():this.emit("drain"))}resume(){return this[Kt]()}pause(){this[Cs]=!1,this[Dr]=!0}get destroyed(){return this[Z]}get flowing(){return this[Cs]}get paused(){return this[Dr]}[pn](e){this[Y]?this[$]+=1:this[$]+=e.length,this.buffer.push(e)}[mn](){return this.buffer.length&&(this[Y]?this[$]-=1:this[$]-=this.buffer[0].length),this.buffer.shift()}[vs](e){do;while(this[iu](this[mn]()));!e&&!this.buffer.length&&!this[He]&&this.emit("drain")}[iu](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,t){if(this[Z])return;let s=this[Qe];return t=t||{},e===eu.stdout||e===eu.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,s?t.end&&e.end():(this.pipes.push(t.proxyErrors?new _n(this,e,t):new ws(this,e,t)),this[Ve]?Ur(()=>this[Kt]()):this[Kt]()),e}unpipe(e){let t=this.pipes.find(s=>s.dest===e);t&&(this.pipes.splice(this.pipes.indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let s=super.on(e,t);return e==="data"&&!this.pipes.length&&!this.flowing?this[Kt]():e==="readable"&&this[$]!==0?super.emit("readable"):Sp(e)&&this[Qe]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Ar]&&(this[Ve]?Ur(()=>t.call(this,this[Ar])):t.call(this,this[Ar])),s}get emittedEnd(){return this[Qe]}[Ge](){!this[Rs]&&!this[Qe]&&!this[Z]&&this.buffer.length===0&&this[He]&&(this[Rs]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[gs]&&this.emit("close"),this[Rs]=!1)}emit(e,t,...s){if(e!=="error"&&e!=="close"&&e!==Z&&this[Z])return;if(e==="data")return t?this[Ve]?Ur(()=>this[En](t)):this[En](t):!1;if(e==="end")return this[nu]();if(e==="close"){if(this[gs]=!0,!this[Qe]&&!this[Z])return;let n=super.emit("close");return this.removeAllListeners("close"),n}else if(e==="error"){this[Ar]=t;let n=super.emit("error",t);return this[Ge](),n}else if(e==="resume"){let n=super.emit("resume");return this[Ge](),n}else if(e==="finish"||e==="prefinish"){let n=super.emit(e);return this.removeAllListeners(e),n}let i=super.emit(e,t,...s);return this[Ge](),i}[En](e){for(let s of this.pipes)s.dest.write(e)===!1&&this.pause();let t=super.emit("data",e);return this[Ge](),t}[nu](){this[Qe]||(this[Qe]=!0,this.readable=!1,this[Ve]?Ur(()=>this[yn]()):this[yn]())}[yn](){if(this[ze]){let t=this[ze].end();if(t){for(let s of this.pipes)s.dest.write(t);super.emit("data",t)}}for(let t of this.pipes)t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Y]||(e.dataLength=0);let t=this.promise();return this.on("data",s=>{e.push(s),this[Y]||(e.dataLength+=s.length)}),t.then(()=>e)}concat(){return this[Y]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Y]?Promise.reject(new Error("cannot concat in objectMode")):this[oe]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,t)=>{this.on(Z,()=>t(new Error("stream destroyed"))),this.on("error",s=>t(s)),this.on("end",()=>e())})}[Cp](){return{next:()=>{let t=this.read();if(t!==null)return Promise.resolve({done:!1,value:t});if(this[He])return Promise.resolve({done:!0});let s=null,i=null,n=l=>{this.removeListener("data",o),this.removeListener("end",c),i(l)},o=l=>{this.removeListener("error",n),this.removeListener("end",c),this.pause(),s({value:l,done:!!this[He]})},c=()=>{this.removeListener("error",n),this.removeListener("data",o),s({done:!0})},a=()=>n(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,s=l,this.once(Z,a),this.once("error",n),this.once("end",c),this.once("data",o)})}}}[wp](){return{next:()=>{let t=this.read();return{value:t,done:t===null}}}}destroy(e){return this[Z]?(e?this.emit("error",e):this.emit(Z),this):(this[Z]=!0,this.buffer.length=0,this[$]=0,typeof this.close=="function"&&!this[gs]&&this.close(),e?this.emit("error",e):this.emit(Z),this)}static isStream(e){return!!e&&(e instanceof au||e instanceof tu||e instanceof vp&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var lu=E((d_,uu)=>{"use strict";var xp=require("zlib").constants||{ZLIB_VERNUM:4736};uu.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},xp))});var Un=E(fe=>{"use strict";var wn=require("assert"),et=require("buffer").Buffer,du=require("zlib"),vt=fe.constants=lu(),Ip=Wt(),hu=et.concat,Ct=Symbol("_superWrite"),Zt=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},bp=Symbol("opts"),Fr=Symbol("flushFlag"),fu=Symbol("finishFlushFlag"),Dn=Symbol("fullFlushFlag"),B=Symbol("handle"),Ss=Symbol("onError"),Yt=Symbol("sawError"),Rn=Symbol("level"),gn=Symbol("strategy"),vn=Symbol("ended"),p_=Symbol("_defaultFullFlush"),Os=class extends Ip{constructor(e,t){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[Yt]=!1,this[vn]=!1,this[bp]=e,this[Fr]=e.flush,this[fu]=e.finishFlush;try{this[B]=new du[t](e)}catch(s){throw new Zt(s)}this[Ss]=s=>{this[Yt]||(this[Yt]=!0,this.close(),this.emit("error",s))},this[B].on("error",s=>this[Ss](new Zt(s))),this.once("end",()=>this.close)}close(){this[B]&&(this[B].close(),this[B]=null,this.emit("close"))}reset(){if(!this[Yt])return wn(this[B],"zlib binding closed"),this[B].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[Dn]),this.write(Object.assign(et.alloc(0),{[Fr]:e})))}end(e,t,s){return e&&this.write(e,t),this.flush(this[fu]),this[vn]=!0,super.end(null,null,s)}get ended(){return this[vn]}write(e,t,s){if(typeof t=="function"&&(s=t,t="utf8"),typeof e=="string"&&(e=et.from(e,t)),this[Yt])return;wn(this[B],"zlib binding closed");let i=this[B]._handle,n=i.close;i.close=()=>{};let o=this[B].close;this[B].close=()=>{},et.concat=l=>l;let c;try{let l=typeof e[Fr]=="number"?e[Fr]:this[Fr];c=this[B]._processChunk(e,l),et.concat=hu}catch(l){et.concat=hu,this[Ss](new Zt(l))}finally{this[B]&&(this[B]._handle=i,i.close=n,this[B].close=o,this[B].removeAllListeners("error"))}this[B]&&this[B].on("error",l=>this[Ss](new Zt(l)));let a;if(c)if(Array.isArray(c)&&c.length>0){a=this[Ct](et.from(c[0]));for(let l=1;l<c.length;l++)a=this[Ct](c[l])}else a=this[Ct](et.from(c));return s&&s(),a}[Ct](e){return super.write(e)}},$e=class extends Os{constructor(e,t){e=e||{},e.flush=e.flush||vt.Z_NO_FLUSH,e.finishFlush=e.finishFlush||vt.Z_FINISH,super(e,t),this[Dn]=vt.Z_FULL_FLUSH,this[Rn]=e.level,this[gn]=e.strategy}params(e,t){if(!this[Yt]){if(!this[B])throw new Error("cannot switch params when binding is closed");if(!this[B].params)throw new Error("not supported in this implementation");if(this[Rn]!==e||this[gn]!==t){this.flush(vt.Z_SYNC_FLUSH),wn(this[B],"zlib binding closed");let s=this[B].flush;this[B].flush=(i,n)=>{this.flush(i),n()};try{this[B].params(e,t)}finally{this[B].flush=s}this[B]&&(this[Rn]=e,this[gn]=t)}}}},Sn=class extends $e{constructor(e){super(e,"Deflate")}},On=class extends $e{constructor(e){super(e,"Inflate")}},Cn=Symbol("_portable"),Tn=class extends $e{constructor(e){super(e,"Gzip"),this[Cn]=e&&!!e.portable}[Ct](e){return this[Cn]?(this[Cn]=!1,e[9]=255,super[Ct](e)):super[Ct](e)}},xn=class extends $e{constructor(e){super(e,"Gunzip")}},In=class extends $e{constructor(e){super(e,"DeflateRaw")}},bn=class extends $e{constructor(e){super(e,"InflateRaw")}},Nn=class extends $e{constructor(e){super(e,"Unzip")}},Ts=class extends Os{constructor(e,t){e=e||{},e.flush=e.flush||vt.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||vt.BROTLI_OPERATION_FINISH,super(e,t),this[Dn]=vt.BROTLI_OPERATION_FLUSH}},Ln=class extends Ts{constructor(e){super(e,"BrotliCompress")}},An=class extends Ts{constructor(e){super(e,"BrotliDecompress")}};fe.Deflate=Sn;fe.Inflate=On;fe.Gzip=Tn;fe.Gunzip=xn;fe.DeflateRaw=In;fe.InflateRaw=bn;fe.Unzip=Nn;typeof du.BrotliCompress=="function"?(fe.BrotliCompress=Ln,fe.BrotliDecompress=An):fe.BrotliCompress=fe.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Jt=E((y_,pu)=>{"use strict";var Np=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;pu.exports=Np!=="win32"?r=>r:r=>r&&r.replace(/\\/g,"/")});var xs=E((R_,mu)=>{"use strict";var Lp=Wt(),Fn=Jt(),Bn=Symbol("slurp");mu.exports=class extends Lp{constructor(e,t,s){switch(super(),this.pause(),this.extended=t,this.globalExtended=s,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Fn(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=Fn(e.linkpath),this.uname=e.uname,this.gname=e.gname,t&&this[Bn](t),s&&this[Bn](s,!0)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");let s=this.remain,i=this.blockRemain;return this.remain=Math.max(0,s-t),this.blockRemain=Math.max(0,i-t),this.ignore?!0:s>=t?super.write(e):super.write(e.slice(0,s))}[Bn](e,t){for(let s in e)e[s]!==null&&e[s]!==void 0&&!(t&&s==="path")&&(this[s]=s==="path"||s==="linkpath"?Fn(e[s]):e[s])}}});var Mn=E(Is=>{"use strict";Is.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Is.code=new Map(Array.from(Is.name).map(r=>[r[1],r[0]]))});var Ru=E((v_,_u)=>{"use strict";var Ap=(r,e)=>{if(Number.isSafeInteger(r))r<0?Up(r,e):Dp(r,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},Dp=(r,e)=>{e[0]=128;for(var t=e.length;t>1;t--)e[t-1]=r&255,r=Math.floor(r/256)},Up=(r,e)=>{e[0]=255;var t=!1;r=r*-1;for(var s=e.length;s>1;s--){var i=r&255;r=Math.floor(r/256),t?e[s-1]=Eu(i):i===0?e[s-1]=0:(t=!0,e[s-1]=yu(i))}},Fp=r=>{let e=r[0],t=e===128?Mp(r.slice(1,r.length)):e===255?Bp(r):null;if(t===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(t))throw Error("parsed number outside of javascript safe integer range");return t},Bp=r=>{for(var e=r.length,t=0,s=!1,i=e-1;i>-1;i--){var n=r[i],o;s?o=Eu(n):n===0?o=n:(s=!0,o=yu(n)),o!==0&&(t-=o*Math.pow(256,e-i-1))}return t},Mp=r=>{for(var e=r.length,t=0,s=e-1;s>-1;s--){var i=r[s];i!==0&&(t+=i*Math.pow(256,e-s-1))}return t},Eu=r=>(255^r)&255,yu=r=>(255^r)+1&255;_u.exports={encode:Ap,parse:Fp}});var er=E((C_,vu)=>{"use strict";var Pn=Mn(),Qt=require("path").posix,gu=Ru(),kn=Symbol("slurp"),de=Symbol("type"),Gn=class{constructor(e,t,s,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[de]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,t||0,s,i):e&&this.set(e)}decode(e,t,s,i){if(t||(t=0),!e||!(e.length>=t+512))throw new Error("need 512 bytes for header");if(this.path=wt(e,t,100),this.mode=tt(e,t+100,8),this.uid=tt(e,t+108,8),this.gid=tt(e,t+116,8),this.size=tt(e,t+124,12),this.mtime=qn(e,t+136,12),this.cksum=tt(e,t+148,12),this[kn](s),this[kn](i,!0),this[de]=wt(e,t+156,1),this[de]===""&&(this[de]="0"),this[de]==="0"&&this.path.substr(-1)==="/"&&(this[de]="5"),this[de]==="5"&&(this.size=0),this.linkpath=wt(e,t+157,100),e.slice(t+257,t+265).toString()==="ustar\x0000")if(this.uname=wt(e,t+265,32),this.gname=wt(e,t+297,32),this.devmaj=tt(e,t+329,8),this.devmin=tt(e,t+337,8),e[t+475]!==0){let o=wt(e,t+345,155);this.path=o+"/"+this.path}else{let o=wt(e,t+345,130);o&&(this.path=o+"/"+this.path),this.atime=qn(e,t+476,12),this.ctime=qn(e,t+488,12)}let n=8*32;for(let o=t;o<t+148;o++)n+=e[o];for(let o=t+156;o<t+512;o++)n+=e[o];this.cksumValid=n===this.cksum,this.cksum===null&&n===8*32&&(this.nullBlock=!0)}[kn](e,t){for(let s in e)e[s]!==null&&e[s]!==void 0&&!(t&&s==="path")&&(this[s]=e[s])}encode(e,t){if(e||(e=this.block=Buffer.alloc(512),t=0),t||(t=0),!(e.length>=t+512))throw new Error("need 512 bytes for header");let s=this.ctime||this.atime?130:155,i=Pp(this.path||"",s),n=i[0],o=i[1];this.needPax=i[2],this.needPax=St(e,t,100,n)||this.needPax,this.needPax=rt(e,t+100,8,this.mode)||this.needPax,this.needPax=rt(e,t+108,8,this.uid)||this.needPax,this.needPax=rt(e,t+116,8,this.gid)||this.needPax,this.needPax=rt(e,t+124,12,this.size)||this.needPax,this.needPax=Hn(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this[de].charCodeAt(0),this.needPax=St(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=St(e,t+265,32,this.uname)||this.needPax,this.needPax=St(e,t+297,32,this.gname)||this.needPax,this.needPax=rt(e,t+329,8,this.devmaj)||this.needPax,this.needPax=rt(e,t+337,8,this.devmin)||this.needPax,this.needPax=St(e,t+345,s,o)||this.needPax,e[t+475]!==0?this.needPax=St(e,t+345,155,o)||this.needPax:(this.needPax=St(e,t+345,130,o)||this.needPax,this.needPax=Hn(e,t+476,12,this.atime)||this.needPax,this.needPax=Hn(e,t+488,12,this.ctime)||this.needPax);let c=8*32;for(let a=t;a<t+148;a++)c+=e[a];for(let a=t+156;a<t+512;a++)c+=e[a];return this.cksum=c,rt(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let t in e)e[t]!==null&&e[t]!==void 0&&(this[t]=e[t])}get type(){return Pn.name.get(this[de])||this[de]}get typeKey(){return this[de]}set type(e){Pn.code.has(e)?this[de]=Pn.code.get(e):this[de]=e}},Pp=(r,e)=>{let s=r,i="",n,o=Qt.parse(r).root||".";if(Buffer.byteLength(s)<100)n=[s,i,!1];else{i=Qt.dirname(s),s=Qt.basename(s);do Buffer.byteLength(s)<=100&&Buffer.byteLength(i)<=e?n=[s,i,!1]:Buffer.byteLength(s)>100&&Buffer.byteLength(i)<=e?n=[s.substr(0,99),i,!0]:(s=Qt.join(Qt.basename(i),s),i=Qt.dirname(i));while(i!==o&&!n);n||(n=[r.substr(0,99),"",!0])}return n},wt=(r,e,t)=>r.slice(e,e+t).toString("utf8").replace(/\0.*/,""),qn=(r,e,t)=>kp(tt(r,e,t)),kp=r=>r===null?null:new Date(r*1e3),tt=(r,e,t)=>r[e]&128?gu.parse(r.slice(e,e+t)):Hp(r,e,t),qp=r=>isNaN(r)?null:r,Hp=(r,e,t)=>qp(parseInt(r.slice(e,e+t).toString("utf8").replace(/\0.*$/,"").trim(),8)),Gp={12:8589934591,8:2097151},rt=(r,e,t,s)=>s===null?!1:s>Gp[t]||s<0?(gu.encode(s,r.slice(e,e+t)),!0):(zp(r,e,t,s),!1),zp=(r,e,t,s)=>r.write(Vp(s,t),e,t,"ascii"),Vp=(r,e)=>$p(Math.floor(r).toString(8),e),$p=(r,e)=>(r.length===e-1?r:new Array(e-r.length-1).join("0")+r+" ")+"\0",Hn=(r,e,t,s)=>s===null?!1:rt(r,e,t,s.getTime()/1e3),jp=new Array(156).join("\0"),St=(r,e,t,s)=>s===null?!1:(r.write(s+jp,e,t,"utf8"),s.length!==Buffer.byteLength(s)||s.length>t);vu.exports=Gn});var bs=E((w_,Cu)=>{"use strict";var Xp=er(),Kp=require("path"),Br=class{constructor(e,t){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=t||!1}encode(){let e=this.encodeBody();if(e==="")return null;let t=Buffer.byteLength(e),s=512*Math.ceil(1+t/512),i=Buffer.allocUnsafe(s);for(let n=0;n<512;n++)i[n]=0;new Xp({path:("PaxHeader/"+Kp.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:t,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,t,"utf8");for(let n=t+512;n<i.length;n++)i[n]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let t=this[e]instanceof Date?this[e].getTime()/1e3:this[e],s=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+t+`
`,i=Buffer.byteLength(s),n=Math.floor(Math.log(i)/Math.log(10))+1;return i+n>=Math.pow(10,n)&&(n+=1),n+i+s}};Br.parse=(r,e,t)=>new Br(Wp(Yp(r),e),t);var Wp=(r,e)=>e?Object.keys(r).reduce((t,s)=>(t[s]=r[s],t),e):r,Yp=r=>r.replace(/\n$/,"").split(`
`).reduce(Zp,Object.create(null)),Zp=(r,e)=>{let t=parseInt(e,10);if(t!==Buffer.byteLength(e)+1)return r;e=e.substr((t+" ").length);let s=e.split("="),i=s.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return r;let n=s.join("=");return r[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(n*1e3):/^[0-9]+$/.test(n)?+n:n,r};Cu.exports=Br});var tr=E((S_,wu)=>{"use strict";wu.exports=r=>{let e=r.length-1,t=-1;for(;e>-1&&r.charAt(e)==="/";)t=e,e--;return t===-1?r:r.slice(0,t)}});var Ns=E((O_,Su)=>{"use strict";Su.exports=r=>class extends r{warn(e,t,s={}){this.file&&(s.file=this.file),this.cwd&&(s.cwd=this.cwd),s.code=t instanceof Error&&t.code||e,s.tarCode=e,!this.strict&&s.recoverable!==!1?(t instanceof Error&&(s=Object.assign(t,s),t=t.message),this.emit("warn",s.tarCode,t,s)):t instanceof Error?this.emit("error",Object.assign(t,s)):this.emit("error",Object.assign(new Error(`${e}: ${t}`),s))}}});var Vn=E((x_,Ou)=>{"use strict";var Ls=["|","<",">","?",":"],zn=Ls.map(r=>String.fromCharCode(61440+r.charCodeAt(0))),Jp=new Map(Ls.map((r,e)=>[r,zn[e]])),Qp=new Map(zn.map((r,e)=>[r,Ls[e]]));Ou.exports={encode:r=>Ls.reduce((e,t)=>e.split(t).join(Jp.get(t)),r),decode:r=>zn.reduce((e,t)=>e.split(t).join(Qp.get(t)),r)}});var $n=E((I_,xu)=>{"use strict";var{isAbsolute:em,parse:Tu}=require("path").win32;xu.exports=r=>{let e="",t=Tu(r);for(;em(r)||t.root;){let s=r.charAt(0)==="/"&&r.slice(0,4)!=="//?/"?"/":t.root;r=r.substr(s.length),e+=s,t=Tu(r)}return[e,r]}});var bu=E((b_,Iu)=>{"use strict";Iu.exports=(r,e,t)=>(r&=4095,t&&(r=(r|384)&-19),e&&(r&256&&(r|=64),r&32&&(r|=8),r&4&&(r|=1)),r)});var to=E((A_,zu)=>{"use strict";var Bu=Wt(),Mu=bs(),Pu=er(),De=require("fs"),Nu=require("path"),Ae=Jt(),tm=tr(),ku=(r,e)=>e?(r=Ae(r).replace(/^\.(\/|$)/,""),tm(e)+"/"+r):Ae(r),rm=16*1024*1024,Lu=Symbol("process"),Au=Symbol("file"),Du=Symbol("directory"),Xn=Symbol("symlink"),Uu=Symbol("hardlink"),Mr=Symbol("header"),As=Symbol("read"),Kn=Symbol("lstat"),Ds=Symbol("onlstat"),Wn=Symbol("onread"),Yn=Symbol("onreadlink"),Zn=Symbol("openfile"),Jn=Symbol("onopenfile"),st=Symbol("close"),Us=Symbol("mode"),Qn=Symbol("awaitDrain"),jn=Symbol("ondrain"),Ue=Symbol("prefix"),Fu=Symbol("hadError"),qu=Ns(),sm=Vn(),Hu=$n(),Gu=bu(),Fs=qu(class extends Bu{constructor(e,t){if(t=t||{},super(t),typeof e!="string")throw new TypeError("path is required");this.path=Ae(e),this.portable=!!t.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=t.maxReadSize||rm,this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.preservePaths=!!t.preservePaths,this.cwd=Ae(t.cwd||process.cwd()),this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.prefix=t.prefix?Ae(t.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let s=!1;if(!this.preservePaths){let[i,n]=Hu(this.path);i&&(this.path=n,s=i)}this.win32=!!t.win32||process.platform==="win32",this.win32&&(this.path=sm.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=Ae(t.absolute||Nu.resolve(this.cwd,e)),this.path===""&&(this.path="./"),s&&this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path}),this.statCache.has(this.absolute)?this[Ds](this.statCache.get(this.absolute)):this[Kn]()}emit(e,...t){return e==="error"&&(this[Fu]=!0),super.emit(e,...t)}[Kn](){De.lstat(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[Ds](t)})}[Ds](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=nm(e),this.emit("stat",e),this[Lu]()}[Lu](){switch(this.type){case"File":return this[Au]();case"Directory":return this[Du]();case"SymbolicLink":return this[Xn]();default:return this.end()}}[Us](e){return Gu(e,this.type==="Directory",this.portable)}[Ue](e){return ku(e,this.prefix)}[Mr](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new Pu({path:this[Ue](this.path),linkpath:this.type==="Link"?this[Ue](this.linkpath):this.linkpath,mode:this[Us](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new Mu({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Ue](this.path),linkpath:this.type==="Link"?this[Ue](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[Du](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Mr](),this.end()}[Xn](){De.readlink(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[Yn](t)})}[Yn](e){this.linkpath=Ae(e),this[Mr](),this.end()}[Uu](e){this.type="Link",this.linkpath=Ae(Nu.relative(this.cwd,e)),this.stat.size=0,this[Mr](),this.end()}[Au](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let t=this.linkCache.get(e);if(t.indexOf(this.cwd)===0)return this[Uu](t)}this.linkCache.set(e,this.absolute)}if(this[Mr](),this.stat.size===0)return this.end();this[Zn]()}[Zn](){De.open(this.absolute,"r",(e,t)=>{if(e)return this.emit("error",e);this[Jn](t)})}[Jn](e){if(this.fd=e,this[Fu])return this[st]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[As]()}[As](){let{fd:e,buf:t,offset:s,length:i,pos:n}=this;De.read(e,t,s,i,n,(o,c)=>{if(o)return this[st](()=>this.emit("error",o));this[Wn](c)})}[st](e){De.close(this.fd,e)}[Wn](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[st](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[st](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let t=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(t)?this[jn]():this[Qn](()=>this[jn]())}[Qn](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let t=new Error("writing more data than expected");return t.path=this.absolute,this.emit("error",t)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[jn](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[st](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[As]()}}),eo=class extends Fs{[Kn](){this[Ds](De.lstatSync(this.absolute))}[Xn](){this[Yn](De.readlinkSync(this.absolute))}[Zn](){this[Jn](De.openSync(this.absolute,"r"))}[As](){let e=!0;try{let{fd:t,buf:s,offset:i,length:n,pos:o}=this,c=De.readSync(t,s,i,n,o);this[Wn](c),e=!1}finally{if(e)try{this[st](()=>{})}catch{}}}[Qn](e){e()}[st](e){De.closeSync(this.fd),e()}},im=qu(class extends Bu{constructor(e,t){t=t||{},super(t),this.preservePaths=!!t.preservePaths,this.portable=!!t.portable,this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=t.prefix||null,this.path=Ae(e.path),this.mode=this[Us](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:t.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=Ae(e.linkpath),typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let s=!1;if(!this.preservePaths){let[i,n]=Hu(this.path);i&&(this.path=n,s=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new Pu({path:this[Ue](this.path),linkpath:this.type==="Link"?this[Ue](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),s&&this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path}),this.header.encode()&&!this.noPax&&super.write(new Mu({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Ue](this.path),linkpath:this.type==="Link"?this[Ue](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[Ue](e){return ku(e,this.prefix)}[Us](e){return Gu(e,this.type==="Directory",this.portable)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=t,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Fs.Sync=eo;Fs.Tar=im;var nm=r=>r.isFile()?"File":r.isDirectory()?"Directory":r.isSymbolicLink()?"SymbolicLink":"Unsupported";zu.exports=Fs});var $u=E((D_,Vu)=>{"use strict";Vu.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var ro=E((U_,ju)=>{"use strict";ju.exports=b;b.Node=Ot;b.create=b;function b(r){var e=this;if(e instanceof b||(e=new b),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,s=arguments.length;t<s;t++)e.push(arguments[t]);return e}b.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};b.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};b.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};b.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)am(this,arguments[r]);return this.length};b.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)cm(this,arguments[r]);return this.length};b.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};b.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};b.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,s=0;t!==null;s++)r.call(e,t.value,s,this),t=t.next};b.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,s=this.length-1;t!==null;s--)r.call(e,t.value,s,this),t=t.prev};b.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};b.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};b.prototype.map=function(r,e){e=e||this;for(var t=new b,s=this.head;s!==null;)t.push(r.call(e,s.value,this)),s=s.next;return t};b.prototype.mapReverse=function(r,e){e=e||this;for(var t=new b,s=this.tail;s!==null;)t.push(r.call(e,s.value,this)),s=s.prev;return t};b.prototype.reduce=function(r,e){var t,s=this.head;if(arguments.length>1)t=e;else if(this.head)s=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;s!==null;i++)t=r(t,s.value,i),s=s.next;return t};b.prototype.reduceReverse=function(r,e){var t,s=this.tail;if(arguments.length>1)t=e;else if(this.tail)s=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;s!==null;i--)t=r(t,s.value,i),s=s.prev;return t};b.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};b.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};b.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new b;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var s=0,i=this.head;i!==null&&s<r;s++)i=i.next;for(;i!==null&&s<e;s++,i=i.next)t.push(i.value);return t};b.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new b;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var s=this.length,i=this.tail;i!==null&&s>e;s--)i=i.prev;for(;i!==null&&s>r;s--,i=i.prev)t.push(i.value);return t};b.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var s=0,i=this.head;i!==null&&s<r;s++)i=i.next;for(var n=[],s=0;i&&s<e;s++)n.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var s=0;s<t.length;s++)i=om(this,i,t[s]);return n};b.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var s=t.prev;t.prev=t.next,t.next=s}return this.head=e,this.tail=r,this};function om(r,e,t){var s=e===r.head?new Ot(t,null,e,r):new Ot(t,e,e.next,r);return s.next===null&&(r.tail=s),s.prev===null&&(r.head=s),r.length++,s}function am(r,e){r.tail=new Ot(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function cm(r,e){r.head=new Ot(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Ot(r,e,t,s){if(!(this instanceof Ot))return new Ot(r,e,t,s);this.list=s,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{$u()(b)}catch{}});var Vs=E((B_,Qu)=>{"use strict";var Gs=class{constructor(e,t){this.path=e||"./",this.absolute=t,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},um=Wt(),lm=Un(),hm=xs(),ho=to(),fm=ho.Sync,dm=ho.Tar,pm=ro(),Xu=Buffer.alloc(1024),Ps=Symbol("onStat"),Bs=Symbol("ended"),Fe=Symbol("queue"),rr=Symbol("current"),Tt=Symbol("process"),Ms=Symbol("processing"),Ku=Symbol("processJob"),Be=Symbol("jobs"),so=Symbol("jobDone"),ks=Symbol("addFSEntry"),Wu=Symbol("addTarEntry"),ao=Symbol("stat"),co=Symbol("readdir"),qs=Symbol("onreaddir"),Hs=Symbol("pipe"),Yu=Symbol("entry"),io=Symbol("entryOpt"),uo=Symbol("writeEntryClass"),Ju=Symbol("write"),no=Symbol("ondrain"),zs=require("fs"),Zu=require("path"),mm=Ns(),oo=Jt(),fo=mm(class extends um{constructor(e){super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=oo(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[uo]=ho,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new lm.Gzip(e.gzip),this.zip.on("data",t=>super.write(t)),this.zip.on("end",t=>super.end()),this.zip.on("drain",t=>this[no]()),this.on("resume",t=>this.zip.resume())):this.on("drain",this[no]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:t=>!0,this[Fe]=new pm,this[Be]=0,this.jobs=+e.jobs||4,this[Ms]=!1,this[Bs]=!1}[Ju](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Bs]=!0,this[Tt](),this}write(e){if(this[Bs])throw new Error("write after end");return e instanceof hm?this[Wu](e):this[ks](e),this.flowing}[Wu](e){let t=oo(Zu.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let s=new Gs(e.path,t,!1);s.entry=new dm(e,this[io](s)),s.entry.on("end",i=>this[so](s)),this[Be]+=1,this[Fe].push(s)}this[Tt]()}[ks](e){let t=oo(Zu.resolve(this.cwd,e));this[Fe].push(new Gs(e,t)),this[Tt]()}[ao](e){e.pending=!0,this[Be]+=1;let t=this.follow?"stat":"lstat";zs[t](e.absolute,(s,i)=>{e.pending=!1,this[Be]-=1,s?this.emit("error",s):this[Ps](e,i)})}[Ps](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[Tt]()}[co](e){e.pending=!0,this[Be]+=1,zs.readdir(e.absolute,(t,s)=>{if(e.pending=!1,this[Be]-=1,t)return this.emit("error",t);this[qs](e,s)})}[qs](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[Tt]()}[Tt](){if(!this[Ms]){this[Ms]=!0;for(let e=this[Fe].head;e!==null&&this[Be]<this.jobs;e=e.next)if(this[Ku](e.value),e.value.ignore){let t=e.next;this[Fe].removeNode(e),e.next=t}this[Ms]=!1,this[Bs]&&!this[Fe].length&&this[Be]===0&&(this.zip?this.zip.end(Xu):(super.write(Xu),super.end()))}}get[rr](){return this[Fe]&&this[Fe].head&&this[Fe].head.value}[so](e){this[Fe].shift(),this[Be]-=1,this[Tt]()}[Ku](e){if(!e.pending){if(e.entry){e===this[rr]&&!e.piped&&this[Hs](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Ps](e,this.statCache.get(e.absolute)):this[ao](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[qs](e,this.readdirCache.get(e.absolute)):this[co](e),!e.readdir))){if(e.entry=this[Yu](e),!e.entry){e.ignore=!0;return}e===this[rr]&&!e.piped&&this[Hs](e)}}}[io](e){return{onwarn:(t,s,i)=>this.warn(t,s,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[Yu](e){this[Be]+=1;try{return new this[uo](e.path,this[io](e)).on("end",()=>this[so](e)).on("error",t=>this.emit("error",t))}catch(t){this.emit("error",t)}}[no](){this[rr]&&this[rr].entry&&this[rr].entry.resume()}[Hs](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let n=e.path,o=n==="./"?"":n.replace(/\/*$/,"/");this[ks](o+i)});let t=e.entry,s=this.zip;s?t.on("data",i=>{s.write(i)||t.pause()}):t.on("data",i=>{super.write(i)||t.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),lo=class extends fo{constructor(e){super(e),this[uo]=fm}pause(){}resume(){}[ao](e){let t=this.follow?"statSync":"lstatSync";this[Ps](e,zs[t](e.absolute))}[co](e,t){this[qs](e,zs.readdirSync(e.absolute))}[Hs](e){let t=e.entry,s=this.zip;e.readdir&&e.readdir.forEach(i=>{let n=e.path,o=n==="./"?"":n.replace(/\/*$/,"/");this[ks](o+i)}),s?t.on("data",i=>{s.write(i)}):t.on("data",i=>{super[Ju](i)})}};fo.Sync=lo;Qu.exports=fo});var lr=E(kr=>{"use strict";var Em=Wt(),ym=require("events").EventEmitter,ae=require("fs"),Eo=ae.writev;if(!Eo){let r=process.binding("fs"),e=r.FSReqWrap||r.FSReqCallback;Eo=(t,s,i,n)=>{let o=(a,l)=>n(a,l,s),c=new e;c.oncomplete=o,r.writeBuffers(t,s,i,c)}}var cr=Symbol("_autoClose"),xe=Symbol("_close"),Pr=Symbol("_ended"),D=Symbol("_fd"),el=Symbol("_finished"),nt=Symbol("_flags"),po=Symbol("_flush"),yo=Symbol("_handleChunk"),_o=Symbol("_makeBuf"),Ws=Symbol("_mode"),$s=Symbol("_needDrain"),or=Symbol("_onerror"),ur=Symbol("_onopen"),mo=Symbol("_onread"),ir=Symbol("_onwrite"),ot=Symbol("_open"),je=Symbol("_path"),xt=Symbol("_pos"),Me=Symbol("_queue"),nr=Symbol("_read"),tl=Symbol("_readSize"),it=Symbol("_reading"),js=Symbol("_remain"),rl=Symbol("_size"),Xs=Symbol("_write"),sr=Symbol("_writing"),Ks=Symbol("_defaultFlag"),ar=Symbol("_errored"),Ys=class extends Em{constructor(e,t){if(t=t||{},super(t),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[ar]=!1,this[D]=typeof t.fd=="number"?t.fd:null,this[je]=e,this[tl]=t.readSize||16*1024*1024,this[it]=!1,this[rl]=typeof t.size=="number"?t.size:1/0,this[js]=this[rl],this[cr]=typeof t.autoClose=="boolean"?t.autoClose:!0,typeof this[D]=="number"?this[nr]():this[ot]()}get fd(){return this[D]}get path(){return this[je]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[ot](){ae.open(this[je],"r",(e,t)=>this[ur](e,t))}[ur](e,t){e?this[or](e):(this[D]=t,this.emit("open",t),this[nr]())}[_o](){return Buffer.allocUnsafe(Math.min(this[tl],this[js]))}[nr](){if(!this[it]){this[it]=!0;let e=this[_o]();if(e.length===0)return process.nextTick(()=>this[mo](null,0,e));ae.read(this[D],e,0,e.length,null,(t,s,i)=>this[mo](t,s,i))}}[mo](e,t,s){this[it]=!1,e?this[or](e):this[yo](t,s)&&this[nr]()}[xe](){if(this[cr]&&typeof this[D]=="number"){let e=this[D];this[D]=null,ae.close(e,t=>t?this.emit("error",t):this.emit("close"))}}[or](e){this[it]=!0,this[xe](),this.emit("error",e)}[yo](e,t){let s=!1;return this[js]-=e,e>0&&(s=super.write(e<t.length?t.slice(0,e):t)),(e===0||this[js]<=0)&&(s=!1,this[xe](),super.end()),s}emit(e,t){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[D]=="number"&&this[nr]();break;case"error":return this[ar]?void 0:(this[ar]=!0,super.emit(e,t));default:return super.emit(e,t)}}},Ro=class extends Ys{[ot](){let e=!0;try{this[ur](null,ae.openSync(this[je],"r")),e=!1}finally{e&&this[xe]()}}[nr](){let e=!0;try{if(!this[it]){this[it]=!0;do{let t=this[_o](),s=t.length===0?0:ae.readSync(this[D],t,0,t.length,null);if(!this[yo](s,t))break}while(!0);this[it]=!1}e=!1}finally{e&&this[xe]()}}[xe](){if(this[cr]&&typeof this[D]=="number"){let e=this[D];this[D]=null,ae.closeSync(e),this.emit("close")}}},Zs=class extends ym{constructor(e,t){t=t||{},super(t),this.readable=!1,this.writable=!0,this[ar]=!1,this[sr]=!1,this[Pr]=!1,this[$s]=!1,this[Me]=[],this[je]=e,this[D]=typeof t.fd=="number"?t.fd:null,this[Ws]=t.mode===void 0?438:t.mode,this[xt]=typeof t.start=="number"?t.start:null,this[cr]=typeof t.autoClose=="boolean"?t.autoClose:!0;let s=this[xt]!==null?"r+":"w";this[Ks]=t.flags===void 0,this[nt]=this[Ks]?s:t.flags,this[D]===null&&this[ot]()}emit(e,t){if(e==="error"){if(this[ar])return;this[ar]=!0}return super.emit(e,t)}get fd(){return this[D]}get path(){return this[je]}[or](e){this[xe](),this[sr]=!0,this.emit("error",e)}[ot](){ae.open(this[je],this[nt],this[Ws],(e,t)=>this[ur](e,t))}[ur](e,t){this[Ks]&&this[nt]==="r+"&&e&&e.code==="ENOENT"?(this[nt]="w",this[ot]()):e?this[or](e):(this[D]=t,this.emit("open",t),this[po]())}end(e,t){return e&&this.write(e,t),this[Pr]=!0,!this[sr]&&!this[Me].length&&typeof this[D]=="number"&&this[ir](null,0),this}write(e,t){return typeof e=="string"&&(e=Buffer.from(e,t)),this[Pr]?(this.emit("error",new Error("write() after end()")),!1):this[D]===null||this[sr]||this[Me].length?(this[Me].push(e),this[$s]=!0,!1):(this[sr]=!0,this[Xs](e),!0)}[Xs](e){ae.write(this[D],e,0,e.length,this[xt],(t,s)=>this[ir](t,s))}[ir](e,t){e?this[or](e):(this[xt]!==null&&(this[xt]+=t),this[Me].length?this[po]():(this[sr]=!1,this[Pr]&&!this[el]?(this[el]=!0,this[xe](),this.emit("finish")):this[$s]&&(this[$s]=!1,this.emit("drain"))))}[po](){if(this[Me].length===0)this[Pr]&&this[ir](null,0);else if(this[Me].length===1)this[Xs](this[Me].pop());else{let e=this[Me];this[Me]=[],Eo(this[D],e,this[xt],(t,s)=>this[ir](t,s))}}[xe](){if(this[cr]&&typeof this[D]=="number"){let e=this[D];this[D]=null,ae.close(e,t=>t?this.emit("error",t):this.emit("close"))}}},go=class extends Zs{[ot](){let e;if(this[Ks]&&this[nt]==="r+")try{e=ae.openSync(this[je],this[nt],this[Ws])}catch(t){if(t.code==="ENOENT")return this[nt]="w",this[ot]();throw t}else e=ae.openSync(this[je],this[nt],this[Ws]);this[ur](null,e)}[xe](){if(this[cr]&&typeof this[D]=="number"){let e=this[D];this[D]=null,ae.closeSync(e),this.emit("close")}}[Xs](e){let t=!0;try{this[ir](null,ae.writeSync(this[D],e,0,e.length,this[xt])),t=!1}finally{if(t)try{this[xe]()}catch{}}}};kr.ReadStream=Ys;kr.ReadStreamSync=Ro;kr.WriteStream=Zs;kr.WriteStreamSync=go});var ii=E((k_,ul)=>{"use strict";var _m=Ns(),Rm=er(),gm=require("events"),vm=ro(),Cm=1024*1024,wm=xs(),sl=bs(),Sm=Un(),vo=Buffer.from([31,139]),_e=Symbol("state"),It=Symbol("writeEntry"),Xe=Symbol("readEntry"),Co=Symbol("nextEntry"),il=Symbol("processEntry"),Re=Symbol("extendedHeader"),qr=Symbol("globalExtendedHeader"),at=Symbol("meta"),nl=Symbol("emitMeta"),P=Symbol("buffer"),Ke=Symbol("queue"),bt=Symbol("ended"),ol=Symbol("emittedEnd"),Nt=Symbol("emit"),ce=Symbol("unzip"),Js=Symbol("consumeChunk"),Qs=Symbol("consumeChunkSub"),wo=Symbol("consumeBody"),al=Symbol("consumeMeta"),cl=Symbol("consumeHeader"),ei=Symbol("consuming"),So=Symbol("bufferConcat"),Oo=Symbol("maybeEnd"),Hr=Symbol("writing"),ct=Symbol("aborted"),ti=Symbol("onDone"),Lt=Symbol("sawValidEntry"),ri=Symbol("sawNullBlock"),si=Symbol("sawEOF"),Om=r=>!0;ul.exports=_m(class extends gm{constructor(e){e=e||{},super(e),this.file=e.file||"",this[Lt]=null,this.on(ti,t=>{(this[_e]==="begin"||this[Lt]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(ti,e.ondone):this.on(ti,t=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||Cm,this.filter=typeof e.filter=="function"?e.filter:Om,this.writable=!0,this.readable=!1,this[Ke]=new vm,this[P]=null,this[Xe]=null,this[It]=null,this[_e]="begin",this[at]="",this[Re]=null,this[qr]=null,this[bt]=!1,this[ce]=null,this[ct]=!1,this[ri]=!1,this[si]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[cl](e,t){this[Lt]===null&&(this[Lt]=!1);let s;try{s=new Rm(e,t,this[Re],this[qr])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(s.nullBlock)this[ri]?(this[si]=!0,this[_e]==="begin"&&(this[_e]="header"),this[Nt]("eof")):(this[ri]=!0,this[Nt]("nullBlock"));else if(this[ri]=!1,!s.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:s});else if(!s.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:s});else{let i=s.type;if(/^(Symbolic)?Link$/.test(i)&&!s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:s});else if(!/^(Symbolic)?Link$/.test(i)&&s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:s});else{let n=this[It]=new wm(s,this[Re],this[qr]);if(!this[Lt])if(n.remain){let o=()=>{n.invalid||(this[Lt]=!0)};n.on("end",o)}else this[Lt]=!0;n.meta?n.size>this.maxMetaEntrySize?(n.ignore=!0,this[Nt]("ignoredEntry",n),this[_e]="ignore",n.resume()):n.size>0&&(this[at]="",n.on("data",o=>this[at]+=o),this[_e]="meta"):(this[Re]=null,n.ignore=n.ignore||!this.filter(n.path,n),n.ignore?(this[Nt]("ignoredEntry",n),this[_e]=n.remain?"ignore":"header",n.resume()):(n.remain?this[_e]="body":(this[_e]="header",n.end()),this[Xe]?this[Ke].push(n):(this[Ke].push(n),this[Co]())))}}}[il](e){let t=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Xe]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",s=>this[Co]()),t=!1)):(this[Xe]=null,t=!1),t}[Co](){do;while(this[il](this[Ke].shift()));if(!this[Ke].length){let e=this[Xe];!e||e.flowing||e.size===e.remain?this[Hr]||this.emit("drain"):e.once("drain",s=>this.emit("drain"))}}[wo](e,t){let s=this[It],i=s.blockRemain,n=i>=e.length&&t===0?e:e.slice(t,t+i);return s.write(n),s.blockRemain||(this[_e]="header",this[It]=null,s.end()),n.length}[al](e,t){let s=this[It],i=this[wo](e,t);return this[It]||this[nl](s),i}[Nt](e,t,s){!this[Ke].length&&!this[Xe]?this.emit(e,t,s):this[Ke].push([e,t,s])}[nl](e){switch(this[Nt]("meta",this[at]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Re]=sl.parse(this[at],this[Re],!1);break;case"GlobalExtendedHeader":this[qr]=sl.parse(this[at],this[qr],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Re]=this[Re]||Object.create(null),this[Re].path=this[at].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Re]=this[Re]||Object.create(null),this[Re].linkpath=this[at].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[ct]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[ct])return;if(this[ce]===null&&e){if(this[P]&&(e=Buffer.concat([this[P],e]),this[P]=null),e.length<vo.length)return this[P]=e,!0;for(let s=0;this[ce]===null&&s<vo.length;s++)e[s]!==vo[s]&&(this[ce]=!1);if(this[ce]===null){let s=this[bt];this[bt]=!1,this[ce]=new Sm.Unzip,this[ce].on("data",n=>this[Js](n)),this[ce].on("error",n=>this.abort(n)),this[ce].on("end",n=>{this[bt]=!0,this[Js]()}),this[Hr]=!0;let i=this[ce][s?"end":"write"](e);return this[Hr]=!1,i}}this[Hr]=!0,this[ce]?this[ce].write(e):this[Js](e),this[Hr]=!1;let t=this[Ke].length?!1:this[Xe]?this[Xe].flowing:!0;return!t&&!this[Ke].length&&this[Xe].once("drain",s=>this.emit("drain")),t}[So](e){e&&!this[ct]&&(this[P]=this[P]?Buffer.concat([this[P],e]):e)}[Oo](){if(this[bt]&&!this[ol]&&!this[ct]&&!this[ei]){this[ol]=!0;let e=this[It];if(e&&e.blockRemain){let t=this[P]?this[P].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e}),this[P]&&e.write(this[P]),e.end()}this[Nt](ti)}}[Js](e){if(this[ei])this[So](e);else if(!e&&!this[P])this[Oo]();else{if(this[ei]=!0,this[P]){this[So](e);let t=this[P];this[P]=null,this[Qs](t)}else this[Qs](e);for(;this[P]&&this[P].length>=512&&!this[ct]&&!this[si];){let t=this[P];this[P]=null,this[Qs](t)}this[ei]=!1}(!this[P]||this[bt])&&this[Oo]()}[Qs](e){let t=0,s=e.length;for(;t+512<=s&&!this[ct]&&!this[si];)switch(this[_e]){case"begin":case"header":this[cl](e,t),t+=512;break;case"ignore":case"body":t+=this[wo](e,t);break;case"meta":t+=this[al](e,t);break;default:throw new Error("invalid state: "+this[_e])}t<s&&(this[P]?this[P]=Buffer.concat([e.slice(t),this[P]]):this[P]=e.slice(t))}end(e){this[ct]||(this[ce]?this[ce].end(e):(this[bt]=!0,this.write(e)))}})});var ni=E((q_,dl)=>{"use strict";var Tm=Xt(),hl=ii(),hr=require("fs"),xm=lr(),ll=require("path"),To=tr();dl.exports=(r,e,t)=>{typeof r=="function"?(t=r,e=null,r={}):Array.isArray(r)&&(e=r,r={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let s=Tm(r);if(s.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!s.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&bm(s,e),s.noResume||Im(s),s.file&&s.sync?Nm(s):s.file?Lm(s,t):fl(s)};var Im=r=>{let e=r.onentry;r.onentry=e?t=>{e(t),t.resume()}:t=>t.resume()},bm=(r,e)=>{let t=new Map(e.map(n=>[To(n),!0])),s=r.filter,i=(n,o)=>{let c=o||ll.parse(n).root||".",a=n===c?!1:t.has(n)?t.get(n):i(ll.dirname(n),c);return t.set(n,a),a};r.filter=s?(n,o)=>s(n,o)&&i(To(n)):n=>i(To(n))},Nm=r=>{let e=fl(r),t=r.file,s=!0,i;try{let n=hr.statSync(t),o=r.maxReadSize||16*1024*1024;if(n.size<o)e.end(hr.readFileSync(t));else{let c=0,a=Buffer.allocUnsafe(o);for(i=hr.openSync(t,"r");c<n.size;){let l=hr.readSync(i,a,0,o,c);c+=l,e.write(a.slice(0,l))}e.end()}s=!1}finally{if(s&&i)try{hr.closeSync(i)}catch{}}},Lm=(r,e)=>{let t=new hl(r),s=r.maxReadSize||16*1024*1024,i=r.file,n=new Promise((o,c)=>{t.on("error",c),t.on("end",o),hr.stat(i,(a,l)=>{if(a)c(a);else{let u=new xm.ReadStream(i,{readSize:s,size:l.size});u.on("error",c),u.pipe(t)}})});return e?n.then(e,e):n},fl=r=>new hl(r)});var Rl=E((H_,_l)=>{"use strict";var Am=Xt(),oi=Vs(),pl=lr(),ml=ni(),El=require("path");_l.exports=(r,e,t)=>{if(typeof e=="function"&&(t=e),Array.isArray(r)&&(e=r,r={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let s=Am(r);if(s.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!s.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return s.file&&s.sync?Dm(s,e):s.file?Um(s,e,t):s.sync?Fm(s,e):Bm(s,e)};var Dm=(r,e)=>{let t=new oi.Sync(r),s=new pl.WriteStreamSync(r.file,{mode:r.mode||438});t.pipe(s),yl(t,e)},Um=(r,e,t)=>{let s=new oi(r),i=new pl.WriteStream(r.file,{mode:r.mode||438});s.pipe(i);let n=new Promise((o,c)=>{i.on("error",c),i.on("close",o),s.on("error",c)});return xo(s,e),t?n.then(t,t):n},yl=(r,e)=>{e.forEach(t=>{t.charAt(0)==="@"?ml({file:El.resolve(r.cwd,t.substr(1)),sync:!0,noResume:!0,onentry:s=>r.add(s)}):r.add(t)}),r.end()},xo=(r,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return ml({file:El.resolve(r.cwd,t.substr(1)),noResume:!0,onentry:s=>r.add(s)}).then(s=>xo(r,e));r.add(t)}r.end()},Fm=(r,e)=>{let t=new oi.Sync(r);return yl(t,e),t},Bm=(r,e)=>{let t=new oi(r);return xo(t,e),t}});var Io=E((G_,Tl)=>{"use strict";var Mm=Xt(),gl=Vs(),pe=require("fs"),vl=lr(),Cl=ni(),wl=require("path"),Sl=er();Tl.exports=(r,e,t)=>{let s=Mm(r);if(!s.file)throw new TypeError("file is required");if(s.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),s.sync?Pm(s,e):qm(s,e,t)};var Pm=(r,e)=>{let t=new gl.Sync(r),s=!0,i,n;try{try{i=pe.openSync(r.file,"r+")}catch(a){if(a.code==="ENOENT")i=pe.openSync(r.file,"w+");else throw a}let o=pe.fstatSync(i),c=Buffer.alloc(512);e:for(n=0;n<o.size;n+=512){for(let u=0,h=0;u<512;u+=h){if(h=pe.readSync(i,c,u,c.length-u,n+u),n===0&&c[0]===31&&c[1]===139)throw new Error("cannot append to compressed archives");if(!h)break e}let a=new Sl(c);if(!a.cksumValid)break;let l=512*Math.ceil(a.size/512);if(n+l+512>o.size)break;n+=l,r.mtimeCache&&r.mtimeCache.set(a.path,a.mtime)}s=!1,km(r,t,n,i,e)}finally{if(s)try{pe.closeSync(i)}catch{}}},km=(r,e,t,s,i)=>{let n=new vl.WriteStreamSync(r.file,{fd:s,start:t});e.pipe(n),Hm(e,i)},qm=(r,e,t)=>{e=Array.from(e);let s=new gl(r),i=(o,c,a)=>{let l=(p,y)=>{p?pe.close(o,_=>a(p)):a(null,y)},u=0;if(c===0)return l(null,0);let h=0,f=Buffer.alloc(512),d=(p,y)=>{if(p)return l(p);if(h+=y,h<512&&y)return pe.read(o,f,h,f.length-h,u+h,d);if(u===0&&f[0]===31&&f[1]===139)return l(new Error("cannot append to compressed archives"));if(h<512)return l(null,u);let _=new Sl(f);if(!_.cksumValid)return l(null,u);let g=512*Math.ceil(_.size/512);if(u+g+512>c||(u+=g+512,u>=c))return l(null,u);r.mtimeCache&&r.mtimeCache.set(_.path,_.mtime),h=0,pe.read(o,f,0,512,u,d)};pe.read(o,f,0,512,u,d)},n=new Promise((o,c)=>{s.on("error",c);let a="r+",l=(u,h)=>{if(u&&u.code==="ENOENT"&&a==="r+")return a="w+",pe.open(r.file,a,l);if(u)return c(u);pe.fstat(h,(f,d)=>{if(f)return pe.close(h,()=>c(f));i(h,d.size,(p,y)=>{if(p)return c(p);let _=new vl.WriteStream(r.file,{fd:h,start:y});s.pipe(_),_.on("error",c),_.on("close",o),Ol(s,e)})})};pe.open(r.file,a,l)});return t?n.then(t,t):n},Hm=(r,e)=>{e.forEach(t=>{t.charAt(0)==="@"?Cl({file:wl.resolve(r.cwd,t.substr(1)),sync:!0,noResume:!0,onentry:s=>r.add(s)}):r.add(t)}),r.end()},Ol=(r,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return Cl({file:wl.resolve(r.cwd,t.substr(1)),noResume:!0,onentry:s=>r.add(s)}).then(s=>Ol(r,e));r.add(t)}r.end()}});var Il=E((z_,xl)=>{"use strict";var Gm=Xt(),zm=Io();xl.exports=(r,e,t)=>{let s=Gm(r);if(!s.file)throw new TypeError("file is required");if(s.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),Vm(s),zm(s,e,t)};var Vm=r=>{let e=r.filter;r.mtimeCache||(r.mtimeCache=new Map),r.filter=e?(t,s)=>e(t,s)&&!(r.mtimeCache.get(t)>s.mtime):(t,s)=>!(r.mtimeCache.get(t)>s.mtime)}});var Ll=E((V_,Nl)=>{"use strict";var{promisify:bl}=require("util"),ut=require("fs"),$m=r=>{if(!r)r={mode:511,fs:ut};else if(typeof r=="object")r={mode:511,fs:ut,...r};else if(typeof r=="number")r={mode:r,fs:ut};else if(typeof r=="string")r={mode:parseInt(r,8),fs:ut};else throw new TypeError("invalid options argument");return r.mkdir=r.mkdir||r.fs.mkdir||ut.mkdir,r.mkdirAsync=bl(r.mkdir),r.stat=r.stat||r.fs.stat||ut.stat,r.statAsync=bl(r.stat),r.statSync=r.statSync||r.fs.statSync||ut.statSync,r.mkdirSync=r.mkdirSync||r.fs.mkdirSync||ut.mkdirSync,r};Nl.exports=$m});var Dl=E(($_,Al)=>{"use strict";var jm=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:Xm,parse:Km}=require("path"),Wm=r=>{if(/\0/.test(r))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:r,code:"ERR_INVALID_ARG_VALUE"});if(r=Xm(r),jm==="win32"){let e=/[*|"<>?:]/,{root:t}=Km(r);if(e.test(r.substr(t.length)))throw Object.assign(new Error("Illegal characters in path."),{path:r,code:"EINVAL"})}return r};Al.exports=Wm});var Pl=E((j_,Ml)=>{"use strict";var{dirname:Ul}=require("path"),Fl=(r,e,t=void 0)=>t===e?Promise.resolve():r.statAsync(e).then(s=>s.isDirectory()?t:void 0,s=>s.code==="ENOENT"?Fl(r,Ul(e),e):void 0),Bl=(r,e,t=void 0)=>{if(t!==e)try{return r.statSync(e).isDirectory()?t:void 0}catch(s){return s.code==="ENOENT"?Bl(r,Ul(e),e):void 0}};Ml.exports={findMade:Fl,findMadeSync:Bl}});var Lo=E((X_,ql)=>{"use strict";var{dirname:kl}=require("path"),bo=(r,e,t)=>{e.recursive=!1;let s=kl(r);return s===r?e.mkdirAsync(r,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(r,e).then(()=>t||r,i=>{if(i.code==="ENOENT")return bo(s,e).then(n=>bo(r,e,n));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(r).then(n=>{if(n.isDirectory())return t;throw i},()=>{throw i})})},No=(r,e,t)=>{let s=kl(r);if(e.recursive=!1,s===r)try{return e.mkdirSync(r,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(r,e),t||r}catch(i){if(i.code==="ENOENT")return No(r,e,No(s,e,t));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(r).isDirectory())throw i}catch{throw i}}};ql.exports={mkdirpManual:bo,mkdirpManualSync:No}});var zl=E((K_,Gl)=>{"use strict";var{dirname:Hl}=require("path"),{findMade:Ym,findMadeSync:Zm}=Pl(),{mkdirpManual:Jm,mkdirpManualSync:Qm}=Lo(),eE=(r,e)=>(e.recursive=!0,Hl(r)===r?e.mkdirAsync(r,e):Ym(e,r).then(s=>e.mkdirAsync(r,e).then(()=>s).catch(i=>{if(i.code==="ENOENT")return Jm(r,e);throw i}))),tE=(r,e)=>{if(e.recursive=!0,Hl(r)===r)return e.mkdirSync(r,e);let s=Zm(e,r);try{return e.mkdirSync(r,e),s}catch(i){if(i.code==="ENOENT")return Qm(r,e);throw i}};Gl.exports={mkdirpNative:eE,mkdirpNativeSync:tE}});var Xl=E((W_,jl)=>{"use strict";var Vl=require("fs"),rE=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Ao=rE.replace(/^v/,"").split("."),$l=+Ao[0]>10||+Ao[0]==10&&+Ao[1]>=12,sE=$l?r=>r.mkdir===Vl.mkdir:()=>!1,iE=$l?r=>r.mkdirSync===Vl.mkdirSync:()=>!1;jl.exports={useNative:sE,useNativeSync:iE}});var Ql=E((Y_,Jl)=>{"use strict";var fr=Ll(),dr=Dl(),{mkdirpNative:Kl,mkdirpNativeSync:Wl}=zl(),{mkdirpManual:Yl,mkdirpManualSync:Zl}=Lo(),{useNative:nE,useNativeSync:oE}=Xl(),pr=(r,e)=>(r=dr(r),e=fr(e),nE(e)?Kl(r,e):Yl(r,e)),aE=(r,e)=>(r=dr(r),e=fr(e),oE(e)?Wl(r,e):Zl(r,e));pr.sync=aE;pr.native=(r,e)=>Kl(dr(r),fr(e));pr.manual=(r,e)=>Yl(dr(r),fr(e));pr.nativeSync=(r,e)=>Wl(dr(r),fr(e));pr.manualSync=(r,e)=>Zl(dr(r),fr(e));Jl.exports=pr});var oh=E((Z_,nh)=>{"use strict";var ge=require("fs"),At=require("path"),cE=ge.lchown?"lchown":"chown",uE=ge.lchownSync?"lchownSync":"chownSync",th=ge.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),eh=(r,e,t)=>{try{return ge[uE](r,e,t)}catch(s){if(s.code!=="ENOENT")throw s}},lE=(r,e,t)=>{try{return ge.chownSync(r,e,t)}catch(s){if(s.code!=="ENOENT")throw s}},hE=th?(r,e,t,s)=>i=>{!i||i.code!=="EISDIR"?s(i):ge.chown(r,e,t,s)}:(r,e,t,s)=>s,Do=th?(r,e,t)=>{try{return eh(r,e,t)}catch(s){if(s.code!=="EISDIR")throw s;lE(r,e,t)}}:(r,e,t)=>eh(r,e,t),fE=process.version,rh=(r,e,t)=>ge.readdir(r,e,t),dE=(r,e)=>ge.readdirSync(r,e);/^v4\./.test(fE)&&(rh=(r,e,t)=>ge.readdir(r,t));var ai=(r,e,t,s)=>{ge[cE](r,e,t,hE(r,e,t,i=>{s(i&&i.code!=="ENOENT"?i:null)}))},sh=(r,e,t,s,i)=>{if(typeof e=="string")return ge.lstat(At.resolve(r,e),(n,o)=>{if(n)return i(n.code!=="ENOENT"?n:null);o.name=e,sh(r,o,t,s,i)});if(e.isDirectory())Uo(At.resolve(r,e.name),t,s,n=>{if(n)return i(n);let o=At.resolve(r,e.name);ai(o,t,s,i)});else{let n=At.resolve(r,e.name);ai(n,t,s,i)}},Uo=(r,e,t,s)=>{rh(r,{withFileTypes:!0},(i,n)=>{if(i){if(i.code==="ENOENT")return s();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return s(i)}if(i||!n.length)return ai(r,e,t,s);let o=n.length,c=null,a=l=>{if(!c){if(l)return s(c=l);if(--o===0)return ai(r,e,t,s)}};n.forEach(l=>sh(r,l,e,t,a))})},pE=(r,e,t,s)=>{if(typeof e=="string")try{let i=ge.lstatSync(At.resolve(r,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&ih(At.resolve(r,e.name),t,s),Do(At.resolve(r,e.name),t,s)},ih=(r,e,t)=>{let s;try{s=dE(r,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return Do(r,e,t);throw i}return s&&s.length&&s.forEach(i=>pE(r,i,e,t)),Do(r,e,t)};nh.exports=Uo;Uo.sync=ih});var lh=E((J_,Fo)=>{"use strict";var ah=Ql(),ve=require("fs"),ci=require("path"),ch=oh(),Ie=Jt(),ui=class extends Error{constructor(e,t){super("Cannot extract through symbolic link"),this.path=t,this.symlink=e}get name(){return"SylinkError"}},li=class extends Error{constructor(e,t){super(t+": Cannot cd into '"+e+"'"),this.path=e,this.code=t}get name(){return"CwdError"}},hi=(r,e)=>r.get(Ie(e)),Gr=(r,e,t)=>r.set(Ie(e),t),mE=(r,e)=>{ve.stat(r,(t,s)=>{(t||!s.isDirectory())&&(t=new li(r,t&&t.code||"ENOTDIR")),e(t)})};Fo.exports=(r,e,t)=>{r=Ie(r);let s=e.umask,i=e.mode|448,n=(i&s)!==0,o=e.uid,c=e.gid,a=typeof o=="number"&&typeof c=="number"&&(o!==e.processUid||c!==e.processGid),l=e.preserve,u=e.unlink,h=e.cache,f=Ie(e.cwd),d=(_,g)=>{_?t(_):(Gr(h,r,!0),g&&a?ch(g,o,c,w=>d(w)):n?ve.chmod(r,i,t):t())};if(h&&hi(h,r)===!0)return d();if(r===f)return mE(r,d);if(l)return ah(r,{mode:i}).then(_=>d(null,_),d);let y=Ie(ci.relative(f,r)).split("/");fi(f,y,i,h,u,f,null,d)};var fi=(r,e,t,s,i,n,o,c)=>{if(!e.length)return c(null,o);let a=e.shift(),l=Ie(ci.resolve(r+"/"+a));if(hi(s,l))return fi(l,e,t,s,i,n,o,c);ve.mkdir(l,t,uh(l,e,t,s,i,n,o,c))},uh=(r,e,t,s,i,n,o,c)=>a=>{a?ve.lstat(r,(l,u)=>{if(l)l.path=l.path&&Ie(l.path),c(l);else if(u.isDirectory())fi(r,e,t,s,i,n,o,c);else if(i)ve.unlink(r,h=>{if(h)return c(h);ve.mkdir(r,t,uh(r,e,t,s,i,n,o,c))});else{if(u.isSymbolicLink())return c(new ui(r,r+"/"+e.join("/")));c(a)}}):(o=o||r,fi(r,e,t,s,i,n,o,c))},EE=r=>{let e=!1,t="ENOTDIR";try{e=ve.statSync(r).isDirectory()}catch(s){t=s.code}finally{if(!e)throw new li(r,t)}};Fo.exports.sync=(r,e)=>{r=Ie(r);let t=e.umask,s=e.mode|448,i=(s&t)!==0,n=e.uid,o=e.gid,c=typeof n=="number"&&typeof o=="number"&&(n!==e.processUid||o!==e.processGid),a=e.preserve,l=e.unlink,u=e.cache,h=Ie(e.cwd),f=_=>{Gr(u,r,!0),_&&c&&ch.sync(_,n,o),i&&ve.chmodSync(r,s)};if(u&&hi(u,r)===!0)return f();if(r===h)return EE(h),f();if(a)return f(ah.sync(r,s));let p=Ie(ci.relative(h,r)).split("/"),y=null;for(let _=p.shift(),g=h;_&&(g+="/"+_);_=p.shift())if(g=Ie(ci.resolve(g)),!hi(u,g))try{ve.mkdirSync(g,s),y=y||g,Gr(u,g,!0)}catch{let S=ve.lstatSync(g);if(S.isDirectory()){Gr(u,g,!0);continue}else if(l){ve.unlinkSync(g),ve.mkdirSync(g,s),y=y||g,Gr(u,g,!0);continue}else if(S.isSymbolicLink())return new ui(g,g+"/"+p.join("/"))}return f(y)}});var Mo=E((Q_,hh)=>{"use strict";var Bo=Object.create(null),{hasOwnProperty:yE}=Object.prototype;hh.exports=r=>(yE.call(Bo,r)||(Bo[r]=r.normalize("NFKD")),Bo[r])});var mh=E((eR,ph)=>{"use strict";var fh=require("assert"),_E=Mo(),RE=tr(),{join:dh}=require("path"),gE=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,vE=gE==="win32";ph.exports=()=>{let r=new Map,e=new Map,t=l=>l.split("/").slice(0,-1).reduce((h,f)=>(h.length&&(f=dh(h[h.length-1],f)),h.push(f||"/"),h),[]),s=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(h=>r.get(h)),dirs:[...u.dirs].map(h=>r.get(h))}},n=l=>{let{paths:u,dirs:h}=i(l);return u.every(f=>f[0]===l)&&h.every(f=>f[0]instanceof Set&&f[0].has(l))},o=l=>s.has(l)||!n(l)?!1:(s.add(l),l(()=>c(l)),!0),c=l=>{if(!s.has(l))return!1;let{paths:u,dirs:h}=e.get(l),f=new Set;return u.forEach(d=>{let p=r.get(d);fh.equal(p[0],l),p.length===1?r.delete(d):(p.shift(),typeof p[0]=="function"?f.add(p[0]):p[0].forEach(y=>f.add(y)))}),h.forEach(d=>{let p=r.get(d);fh(p[0]instanceof Set),p[0].size===1&&p.length===1?r.delete(d):p[0].size===1?(p.shift(),f.add(p[0])):p[0].delete(l)}),s.delete(l),f.forEach(d=>o(d)),!0};return{check:n,reserve:(l,u)=>{l=vE?["win32 parallelization disabled"]:l.map(f=>_E(RE(dh(f))).toLowerCase());let h=new Set(l.map(f=>t(f)).reduce((f,d)=>f.concat(d)));return e.set(u,{dirs:h,paths:l}),l.forEach(f=>{let d=r.get(f);d?d.push(u):r.set(f,[u])}),h.forEach(f=>{let d=r.get(f);d?d[d.length-1]instanceof Set?d[d.length-1].add(u):d.push(new Set([u])):r.set(f,[new Set([u])])}),o(u)}}}});var _h=E((tR,yh)=>{"use strict";var CE=process.env.__FAKE_PLATFORM__||process.platform,wE=CE==="win32",SE=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:OE,O_TRUNC:TE,O_WRONLY:xE,UV_FS_O_FILEMAP:Eh=0}=SE.constants,IE=wE&&!!Eh,bE=512*1024,NE=Eh|TE|OE|xE;yh.exports=IE?r=>r<bE?NE:"w":()=>"w"});var jo=E((rR,Ah)=>{"use strict";var LE=require("assert"),AE=ii(),N=require("fs"),DE=lr(),We=require("path"),bh=lh(),Rh=Vn(),UE=mh(),FE=$n(),me=Jt(),BE=tr(),ME=Mo(),gh=Symbol("onEntry"),qo=Symbol("checkFs"),vh=Symbol("checkFs2"),mi=Symbol("pruneCache"),Ho=Symbol("isReusable"),Ce=Symbol("makeFs"),Go=Symbol("file"),zo=Symbol("directory"),Ei=Symbol("link"),Ch=Symbol("symlink"),wh=Symbol("hardlink"),Sh=Symbol("unsupported"),Oh=Symbol("checkPath"),lt=Symbol("mkdir"),J=Symbol("onError"),di=Symbol("pending"),Th=Symbol("pend"),mr=Symbol("unpend"),Po=Symbol("ended"),ko=Symbol("maybeClose"),Vo=Symbol("skip"),zr=Symbol("doChown"),Vr=Symbol("uid"),$r=Symbol("gid"),jr=Symbol("checkedCwd"),Nh=require("crypto"),Lh=_h(),PE=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Xr=PE==="win32",kE=(r,e)=>{if(!Xr)return N.unlink(r,e);let t=r+".DELETE."+Nh.randomBytes(16).toString("hex");N.rename(r,t,s=>{if(s)return e(s);N.unlink(t,e)})},qE=r=>{if(!Xr)return N.unlinkSync(r);let e=r+".DELETE."+Nh.randomBytes(16).toString("hex");N.renameSync(r,e),N.unlinkSync(e)},xh=(r,e,t)=>r===r>>>0?r:e===e>>>0?e:t,Ih=r=>ME(BE(me(r))).toLowerCase(),HE=(r,e)=>{e=Ih(e);for(let t of r.keys()){let s=Ih(t);(s===e||s.indexOf(e+"/")===0)&&r.delete(t)}},GE=r=>{for(let e of r.keys())r.delete(e)},Kr=class extends AE{constructor(e){if(e||(e={}),e.ondone=t=>{this[Po]=!0,this[ko]()},super(e),this[jr]=!1,this.reservations=UE(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[di]=0,this[Po]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Xr,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=me(We.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",t=>this[gh](t))}warn(e,t,s={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(s.recoverable=!1),super.warn(e,t,s)}[ko](){this[Po]&&this[di]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[Oh](e){if(this.strip){let t=me(e.path).split("/");if(t.length<this.strip)return!1;if(e.path=t.slice(this.strip).join("/"),e.type==="Link"){let s=me(e.linkpath).split("/");if(s.length>=this.strip)e.linkpath=s.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let t=me(e.path),s=t.split("/");if(s.includes("..")||Xr&&/^[a-z]:\.\.$/i.test(s[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;let[i,n]=FE(t);i&&(e.path=n,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:t}))}if(We.isAbsolute(e.path)?e.absolute=me(We.resolve(e.path)):e.absolute=me(We.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:me(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:t}=We.win32.parse(e.absolute);e.absolute=t+Rh.encode(e.absolute.substr(t.length));let{root:s}=We.win32.parse(e.path);e.path=s+Rh.encode(e.path.substr(s.length))}return!0}[gh](e){if(!this[Oh](e))return e.resume();switch(LE.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[qo](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[Sh](e)}}[J](e,t){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[mr](),t.resume())}[lt](e,t,s){bh(me(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t,noChmod:this.noChmod},s)}[zr](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Vr](e){return xh(this.uid,e.uid,this.processUid)}[$r](e){return xh(this.gid,e.gid,this.processGid)}[Go](e,t){let s=e.mode&4095||this.fmode,i=new DE.WriteStream(e.absolute,{flags:Lh(e.size),mode:s,autoClose:!1});i.on("error",a=>{i.fd&&N.close(i.fd,()=>{}),i.write=()=>!0,this[J](a,e),t()});let n=1,o=a=>{if(a){i.fd&&N.close(i.fd,()=>{}),this[J](a,e),t();return}--n===0&&N.close(i.fd,l=>{l?this[J](l,e):this[mr](),t()})};i.on("finish",a=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){n++;let h=e.atime||new Date,f=e.mtime;N.futimes(u,h,f,d=>d?N.utimes(l,h,f,p=>o(p&&d)):o())}if(this[zr](e)){n++;let h=this[Vr](e),f=this[$r](e);N.fchown(u,h,f,d=>d?N.chown(l,h,f,p=>o(p&&d)):o())}o()});let c=this.transform&&this.transform(e)||e;c!==e&&(c.on("error",a=>{this[J](a,e),t()}),e.pipe(c)),c.pipe(i)}[zo](e,t){let s=e.mode&4095||this.dmode;this[lt](e.absolute,s,i=>{if(i){this[J](i,e),t();return}let n=1,o=c=>{--n===0&&(t(),this[mr](),e.resume())};e.mtime&&!this.noMtime&&(n++,N.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[zr](e)&&(n++,N.chown(e.absolute,this[Vr](e),this[$r](e),o)),o()})}[Sh](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[Ch](e,t){this[Ei](e,e.linkpath,"symlink",t)}[wh](e,t){let s=me(We.resolve(this.cwd,e.linkpath));this[Ei](e,s,"link",t)}[Th](){this[di]++}[mr](){this[di]--,this[ko]()}[Vo](e){this[mr](),e.resume()}[Ho](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&!Xr}[qo](e){this[Th]();let t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,s=>this[vh](e,s))}[mi](e){e.type==="SymbolicLink"?GE(this.dirCache):e.type!=="Directory"&&HE(this.dirCache,e.absolute)}[vh](e,t){this[mi](e);let s=c=>{this[mi](e),t(c)},i=()=>{this[lt](this.cwd,this.dmode,c=>{if(c){this[J](c,e),s();return}this[jr]=!0,n()})},n=()=>{if(e.absolute!==this.cwd){let c=me(We.dirname(e.absolute));if(c!==this.cwd)return this[lt](c,this.dmode,a=>{if(a){this[J](a,e),s();return}o()})}o()},o=()=>{N.lstat(e.absolute,(c,a)=>{if(a&&(this.keep||this.newer&&a.mtime>e.mtime)){this[Vo](e),s();return}if(c||this[Ho](e,a))return this[Ce](null,e,s);if(a.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(a.mode&4095)!==e.mode,u=h=>this[Ce](h,e,s);return l?N.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return N.rmdir(e.absolute,l=>this[Ce](l,e,s))}if(e.absolute===this.cwd)return this[Ce](null,e,s);kE(e.absolute,l=>this[Ce](l,e,s))})};this[jr]?n():i()}[Ce](e,t,s){if(e){this[J](e,t),s();return}switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[Go](t,s);case"Link":return this[wh](t,s);case"SymbolicLink":return this[Ch](t,s);case"Directory":case"GNUDumpDir":return this[zo](t,s)}}[Ei](e,t,s,i){N[s](t,e.absolute,n=>{n?this[J](n,e):(this[mr](),e.resume()),i()})}},pi=r=>{try{return[null,r()]}catch(e){return[e,null]}},$o=class extends Kr{[Ce](e,t){return super[Ce](e,t,()=>{})}[qo](e){if(this[mi](e),!this[jr]){let n=this[lt](this.cwd,this.dmode);if(n)return this[J](n,e);this[jr]=!0}if(e.absolute!==this.cwd){let n=me(We.dirname(e.absolute));if(n!==this.cwd){let o=this[lt](n,this.dmode);if(o)return this[J](o,e)}}let[t,s]=pi(()=>N.lstatSync(e.absolute));if(s&&(this.keep||this.newer&&s.mtime>e.mtime))return this[Vo](e);if(t||this[Ho](e,s))return this[Ce](null,e);if(s.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(s.mode&4095)!==e.mode,[c]=o?pi(()=>{N.chmodSync(e.absolute,e.mode)}):[];return this[Ce](c,e)}let[n]=pi(()=>N.rmdirSync(e.absolute));this[Ce](n,e)}let[i]=e.absolute===this.cwd?[]:pi(()=>qE(e.absolute));this[Ce](i,e)}[Go](e,t){let s=e.mode&4095||this.fmode,i=c=>{let a;try{N.closeSync(n)}catch(l){a=l}(c||a)&&this[J](c||a,e),t()},n;try{n=N.openSync(e.absolute,Lh(e.size),s)}catch(c){return i(c)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",c=>this[J](c,e)),e.pipe(o)),o.on("data",c=>{try{N.writeSync(n,c,0,c.length)}catch(a){i(a)}}),o.on("end",c=>{let a=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{N.futimesSync(n,l,u)}catch(h){try{N.utimesSync(e.absolute,l,u)}catch{a=h}}}if(this[zr](e)){let l=this[Vr](e),u=this[$r](e);try{N.fchownSync(n,l,u)}catch(h){try{N.chownSync(e.absolute,l,u)}catch{a=a||h}}}i(a)})}[zo](e,t){let s=e.mode&4095||this.dmode,i=this[lt](e.absolute,s);if(i){this[J](i,e),t();return}if(e.mtime&&!this.noMtime)try{N.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[zr](e))try{N.chownSync(e.absolute,this[Vr](e),this[$r](e))}catch{}t(),e.resume()}[lt](e,t){try{return bh.sync(me(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(s){return s}}[Ei](e,t,s,i){try{N[s+"Sync"](t,e.absolute),i(),e.resume()}catch(n){return this[J](n,e)}}};Kr.Sync=$o;Ah.exports=Kr});var Mh=E((sR,Bh)=>{"use strict";var zE=Xt(),yi=jo(),Uh=require("fs"),Fh=lr(),Dh=require("path"),Xo=tr();Bh.exports=(r,e,t)=>{typeof r=="function"?(t=r,e=null,r={}):Array.isArray(r)&&(e=r,r={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let s=zE(r);if(s.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!s.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&VE(s,e),s.file&&s.sync?$E(s):s.file?jE(s,t):s.sync?XE(s):KE(s)};var VE=(r,e)=>{let t=new Map(e.map(n=>[Xo(n),!0])),s=r.filter,i=(n,o)=>{let c=o||Dh.parse(n).root||".",a=n===c?!1:t.has(n)?t.get(n):i(Dh.dirname(n),c);return t.set(n,a),a};r.filter=s?(n,o)=>s(n,o)&&i(Xo(n)):n=>i(Xo(n))},$E=r=>{let e=new yi.Sync(r),t=r.file,s=Uh.statSync(t),i=r.maxReadSize||16*1024*1024;new Fh.ReadStreamSync(t,{readSize:i,size:s.size}).pipe(e)},jE=(r,e)=>{let t=new yi(r),s=r.maxReadSize||16*1024*1024,i=r.file,n=new Promise((o,c)=>{t.on("error",c),t.on("close",o),Uh.stat(i,(a,l)=>{if(a)c(a);else{let u=new Fh.ReadStream(i,{readSize:s,size:l.size});u.on("error",c),u.pipe(t)}})});return e?n.then(e,e):n},XE=r=>new yi.Sync(r),KE=r=>new yi(r)});var Ph=E(G=>{"use strict";G.c=G.create=Rl();G.r=G.replace=Io();G.t=G.list=ni();G.u=G.update=Il();G.x=G.extract=Mh();G.Pack=Vs();G.Unpack=jo();G.Parse=ii();G.ReadEntry=xs();G.WriteEntry=to();G.Header=er();G.Pax=bs();G.types=Mn()});var Gh={};Pe(Gh,{FileStorage:()=>Ko});var qh,Q,Dt,Hh,kh,_i,ht,Ko,zh=le(()=>{"use strict";qh=require("crypto"),Q=require("fs"),Dt=hf(require("path")),Hh=require("path");Lr();pt();_s();Ii();kh=an(),_i=Ph(),{output:ht}=Ze(),Ko=class{constructor(e,t,s,i){this.encryption=e;this.errorReporter=t;this.context=i;this.storedHashes=[];this.axiosConfigBuilder=e=>e;if(s.customProxyConfigPath){let{fileServerProxyConfig:n}=require((0,Hh.join)(process.cwd(),s.customProxyConfigPath));this.axiosConfigBuilder=n??this.axiosConfigBuilder}}async retrieve(e,t,s){process.env.NX_CLOUD_DEBUG_URLS=="true"&&ht.note({title:`Nx Cloud: Downloading ${e}`,bodyLines:[`RETRIEVAL URL: ${t}`]});let i=this.createFileName(e,s),n=this.createCommitFilePath(e,s);try{await this.downloadFile(t,i,n),this.createCommitFile(n),U&&ht.note({title:`Nx Cloud: Downloaded ${e}`})}catch(o){let c=o.message||o.toString(),a;throw c.includes("zlib")||c.includes("gzip")||c.includes("TAR_BAD_ARCHIVE")?a="Failed to untar cached artifacts. The artifact may be corrupted. Contact cloud-support@nrwl.io for additional assistance.":c.includes("decrypt")?a="Failed to decrypt artifact. Please review your encryption key.":a="Failed to download cached artifacts. Enable NX_VERBOSE_LOGGING for more details.",U&&ht.note({title:`${a}`,bodyLines:[`- ${o.message}`,`- Affected artifact: ${e} in context ${this.context}.`]}),(this.context==="dte-agent"||this.context==="dte-main")&&(ht.note({title:`An error occurred while trying to retrieve artifacts in the ${this.context} context. Hash: ${e}.`,bodyLines:["- Please update the nx-cloud package to the latest version.","- Please update the nx package to 15.8.9 or higher. You can do it without updating the plugins.","- If you are not able to update the nx package, and you are passing --configuration to a run-many or an affected command, define that configuration for all the projects."]}),process.env.NX_CLOUD_DEBUG_URLS=="true"&&ht.note({title:`URL: ${e}`})),await this.errorReporter.reportError(a),new Error(a)}}async store(e,t,s){process.env.NX_CLOUD_DEBUG_URLS=="true"&&ht.note({title:`Nx Cloud: Storing ${e}`,bodyLines:[`STORAGE URL: ${t}`]});let i;if(process.env.NRWL_INTERNAL_TAR_DEBUG){let o=1,c=!1,a=[];for(;o<=3&&!c;){i=await this.createFile(e,s);let l=`/tmp/${e}/attempt${o}`;(0,Q.mkdirSync)(l,{recursive:!0});try{let u=(0,Q.createReadStream)(i).pipe(_i.x({cwd:l}));await this.convertStreamIntoPromise(u),c=!0}catch(u){console.error(u),await qt(5e3)}a.push({attempt:o,success:c}),o++}if(a.some(l=>!l.success)){console.error(JSON.stringify(a,null,2));let l=a.filter(u=>!u.success).map(u=>u.attempt).join(", ");throw new Error(`Untar failed for hash ${e} in attempts ${l} out of ${a.length}`)}}else i=await this.createFile(e,s);await this.uploadFile(t,i),this.storedHashes.push(e),U&&ht.note({title:`Nx Cloud: Stored ${e}`})}createFileName(e,t){return Dt.join(t,`${e}.tar.gz`)}async downloadFile(e,t,s){var o;let i=Rt("retrieveFile"),n;try{let c=new URL(e),a=c.origin+c.pathname,l={};for(let[u,h]of c.searchParams.entries())l[u]=h;n=await qe(()=>kh(a,this.axiosConfigBuilder({method:"GET",responseType:"stream",maxContentLength:Se?Mt:Pt,maxBodyLength:Se?Mt:Pt,timeout:Se?Bt:6e4,params:l}))),i.recordMetric({...Te(n),payloadSize:n.data.headers["content-length"]})}catch(c){throw i.recordMetric((o=c==null?void 0:c.axiosException)!=null&&o.response?Te(c.axiosException.response):gt),c}if((0,Q.existsSync)(t)){let c=0;for(;c++<50;){if((0,Q.existsSync)(s))return;await qt(500)}}if(this.encryption.hasEncryption()){await new Promise(a=>{n.data.pipe((0,Q.createWriteStream)(t)).on("close",()=>a(null))}),this.encryption.decryptFile(t);let c=(0,Q.createReadStream)(t).pipe(_i.x({cwd:Dt.dirname(t)}));return this.convertStreamIntoPromise(c)}else{let c=n.data.pipe(_i.x({cwd:Dt.dirname(t)}));return this.convertStreamIntoPromise(c)}}convertStreamIntoPromise(e){return new Promise((t,s)=>{e.on("error",i=>{i.tarCode==="TAR_ABORT"&&i.message.indexOf("incorrect header check")>-1?(console.warn("FileStorage: Decompression OK, Trailing garbage ignored."),t(null)):s(i)}),e.on("close",()=>t(null))})}createCommitFile(e){(0,Q.writeFileSync)(e,"true")}createCommitFilePath(e,t){return Dt.join(t,`${e}.commit`)}async createFile(e,t){let s=this.createFileName(e,t);try{(0,Q.unlinkSync)(Dt.join(t,e,"source"))}catch{}return await _i.c({gzip:!0,file:s,cwd:t},[e]),this.encryption.hasEncryption()&&this.encryption.encryptFile(s),s}async uploadFile(e,t){var c;process.env.NX_CLOUD_ECONNABORTED_LOGGING=="true"&&ht.note({title:`Attempting to upload file with path: ${t}`});let s=Rt("storeFile"),i=(0,Q.readFileSync)(t),n=this.generateMD5(i),o=this.getFileUploadHeaders(e,n);try{let a=await qe(()=>kh(e,this.axiosConfigBuilder({method:"PUT",data:i,headers:o,maxContentLength:Se?Mt:Pt,maxBodyLength:Se?Mt:Pt,timeout:Se?Bt:12e4})));s.recordMetric({...Te(a),payloadSize:a.config.headers["Content-Length"]})}catch(a){if(a.message&&a.message.includes("RetentionPolicyNotMet"))return;throw s.recordMetric((c=a==null?void 0:a.axiosException)!=null&&c.response?Te(a.axiosException.response):gt),a}}generateMD5(e){let t=(0,qh.createHash)("md5");return t.update(e),t.digest("base64")}getFileUploadHeaders(e,t){let s=e.includes("/file/"),i={"Content-Type":"application/octet-stream","x-ms-blob-type":"BlockBlob"};return s&&(i["Content-MD5"]=t),i}}});function Yo(){for(let r of Object.values(WE))if(r.detectorFn(process.env)){let e=r.contextRetrieverFn(process.env);return U&&console.log(JSON.stringify(e,null,2)),{...e,inferredFromTaskRunner:!0}}return U&&console.log("[Nx Cloud] Did not identify a VCS platform."),null}function YE(r){return r.CIRCLECI==="true"}function ZE(r){U&&console.log("[Nx Cloud] Detected Env: CircleCI");let e=s=>{if(s.CIRCLE_PR_NUMBER!==void 0)return s.CIRCLE_PR_NUMBER;if(s.CIRCLE_PULL_REQUEST!==void 0){let i=s.CIRCLE_PULL_REQUEST.split("/");return i[i.length-1]}return s.CIRCLE_BRANCH!==void 0?s.CIRCLE_BRANCH:"unknown"},t=s=>s.CIRCLE_USERNAME!==void 0?s.CIRCLE_USERNAME:s.CIRCLE_PR_USERNAME?s.CIRCLE_PR_USERNAME:null;return{branch:e(r),ref:r.CIRCLE_BRANCH??null,title:Zo(),headSha:r.CIRCLE_SHA1??"unknown",baseSha:null,commitLink:r.CIRCLE_PULL_REQUEST??null,author:t(r),authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.CIRCLE_REPOSITORY_URL??null}}function JE(r){return r.TRAVIS==="true"}function QE(r){return U&&console.log("[Nx Cloud] Detected Env: TravisCI"),{branch:(t=>t.TRAVIS_EVENT_TYPE==="pull_request"?t.TRAVIS_PULL_REQUEST:t.TRAVIS_BRANCH)(r),ref:null,title:r.TRAVIS_COMMIT_MESSAGE,headSha:r.TRAVIS_COMMIT??"unknown",baseSha:null,commitLink:null,author:Vh(),authorUrl:null,authorAvatarUrl:null,repositoryUrl:null}}function ey(r){return r.GITHUB_ACTIONS==="true"}function ty(r){U&&console.log("[Nx Cloud] Detected Env: GitHub Actions");let e=i=>{if(i.GITHUB_REF){let n=i.GITHUB_REF.match(/refs\/pull\/(\d+)\/merge/);if(n)return n[1]}return i.GITHUB_HEAD_REF?i.GITHUB_HEAD_REF:i.GITHUB_REF_NAME?i.GITHUB_REF_NAME:"unknown"},t=i=>{let n=`${i.GITHUB_SERVER_URL}/${i.GITHUB_REPOSITORY}`;return i.GITHUB_EVENT_NAME==="pull_request"?`${n}/pull/${e(i)}`:`${n}/commit/${i.GITHUB_SHA}`},s=i=>i.GITHUB_HEAD_REF?i.GITHUB_HEAD_REF:i.GITHUB_REF?i.GITHUB_REF:null;return{branch:e(r),ref:s(r),title:Zo(),headSha:r.GITHUB_SHA??"unknown",baseSha:null,commitLink:t(r),author:r.GITHUB_ACTOR??null,authorUrl:`https://github.com/${r.GITHUB_ACTOR}`,authorAvatarUrl:`https://avatars.githubusercontent.com/u/${r.GITHUB_ACTOR_ID}`,repositoryUrl:`${r.GITHUB_SERVER_URL}/${r.GITHUB_REPOSITORY}`}}function ry(r){return r.BITBUCKET_BUILD_NUMBER!=null}function sy(r){return U&&console.log("[Nx Cloud] Detected Env: BitBucket Pipelines"),{branch:r.BITBUCKET_PR_ID??r.BITBUCKET_BRANCH??"unknown",ref:null,title:Zo(),headSha:r.BITBUCKET_COMMIT??"unknown",baseSha:null,commitLink:null,author:Vh(),authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.BITBUCKET_GIT_HTTP_ORIGIN??null}}function iy(r){return r.BUILD_BUILDID!==void 0&&r.AGENT_NAME!==void 0}function ny(r){return U&&console.log("[Nx Cloud] Detected Env: Azure DevOps"),{branch:r.SYSTEM_PULLREQUEST_PULLREQUESTNUMBER??r.BUILD_SOURCEBRANCHNAME??"unknown",ref:null,title:r.BUILD_SOURCEVERSIONMESSAGE??null,headSha:Sr()??"unknown",baseSha:null,commitLink:null,author:r.BUILD_REQUESTEDFOR??null,authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.SYSTEM_PULLREQUEST_SOURCEREPOSITORYURI??r.BUILD_REPOSITORY_URI??null}}function oy(r){return r.GITLAB_CI==="true"}function ay(r){return U&&console.log("[Nx Cloud] Detected Env: GitLab Pipelines"),{branch:(t=>t.CI_MERGE_REQUEST_IID?t.CI_MERGE_REQUEST_IID:t.CI_COMMIT_BRANCH?t.CI_COMMIT_BRANCH:"unknown")(r),ref:r.CI_COMMIT_REF_NAME??null,title:r.CI_COMMIT_MESSAGE??null,headSha:Sr()??"unknown",baseSha:null,commitLink:null,author:r.GITLAB_USER_NAME??null,authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.CI_REPOSITORY_URL??null}}function Zo(){try{return(0,Wo.execSync)("git log -1 --pretty=%B",{encoding:"utf-8"}).trim()}catch{return null}}function Vh(){try{return(0,Wo.execSync)("git log -1 --pretty=%aN",{encoding:"utf-8"}).trim()}catch{return null}}var Wo,WE,$h=le(()=>{"use strict";Wo=require("child_process");pt();WE={CIRCLE_CI:{detectorFn:YE,contextRetrieverFn:ZE},TRAVIS_CI:{detectorFn:JE,contextRetrieverFn:QE},GITHUB_ACTIONS:{detectorFn:ey,contextRetrieverFn:ty},BITBUCKET_PIPELINES:{detectorFn:ry,contextRetrieverFn:sy},AZURE_DEVOPS:{detectorFn:iy,contextRetrieverFn:ny},GITLAB_PIPELINES:{detectorFn:oy,contextRetrieverFn:ay}}});var Wh={};Pe(Wh,{CloudRunApi:()=>Jo});var jh,Xh,Kh,Ri,Jo,Yh=le(()=>{"use strict";jh=require("fs"),Xh=require("util"),Kh=require("zlib");Lr();pt();$h();_s();({output:Ri}=Ze()),Jo=class{constructor(e,t,s,i){this.messages=e;this.runContext=t;this.machineInfo=i;this.apiAxiosInstance=jt(s)}async startRun(e,t){var i;if(this.messages.apiError)return{};let s=Rt("startRun");try{let n={meta:{nxCloudVersion:this.nxCloudVersion()},branch:Or(),runGroup:xi(),ciExecutionId:Ti(),ciExecutionEnv:Cr(),distributedExecutionId:e,hashes:t,machineInfo:this.machineInfo,vcsContext:Yo()};U&&Ri.note({title:"RunStart",bodyLines:[`
`+JSON.stringify(n,null,2)]});let o=await ln("RunStart duration",()=>qe(()=>this.apiAxiosInstance.post("/nx-cloud/v2/runs/start",n)));return s.recordMetric(Te(o)),o.data&&o.data.message&&(this.messages.message=o.data.message),!o.data||!o.data.artifacts?(this.messages.apiError=`Invalid Nx Cloud response: ${JSON.stringify(o.data)}`,{}):o.data.artifacts}catch(n){return s.recordMetric((i=n==null?void 0:n.axiosException)!=null&&i.response?Te(n.axiosException.response):gt),this.messages.apiError=this.messages.extractErrorMessage(n,"api"),{}}}createReqBody(e,t,s,i){let n={meta:{nxCloudVersion:this.nxCloudVersion()},tasks:t,run:e,linkId:i,...s,machineInfo:this.machineInfo,vcsContext:Yo()};return JSON.stringify(n)}async endRun(e,t,s,i){var l;if(this.messages.apiError)return!1;e.runGroup=null,e.branch=null;let n=this.createReqBody(e,t,s,i);n.length>20*1e3*1e3&&(n=this.createReqBody(e,t.map(u=>({...u,hashDetails:void 0})),s,i));let o=Buffer.from(n),c=await(0,Xh.promisify)(Kh.gzip)(o),a=Rt("endRun");try{if(U){let h=t.map(f=>({...f,terminalOutput:f.terminalOutput?`${f.terminalOutput.slice(0,20)}...`:void 0}));Ri.note({title:"RunEnd. Completed tasks",bodyLines:[`
`+JSON.stringify(h,null,2)]})}let u=await ln("RunEnd duration",()=>qe(()=>this.apiAxiosInstance.post("/nx-cloud/runs/end",c,{headers:{...this.apiAxiosInstance.defaults.headers,"Content-Encoding":"gzip","Content-Type":"application/octet-stream"}})));if(u){if(a.recordMetric(Te(u)),u.data&&u.data.runUrl&&u.data.status==="success")return this.runContext.runUrl=u.data.runUrl,!0;u.data&&u.data.status?this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data.message)}`:u.data&&typeof u.data=="string"?u.data!=="success"&&(this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data)}`):this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data)}`,U&&Ri.note({title:"Invalid end run response",bodyLines:[JSON.stringify(u.data,null,2)]})}else Ri.error({title:"Nx Cloud: Unknown Error Occurred",bodyLines:["Run completion responded with `undefined`.","Run Details:",JSON.stringify(e,null,2),"Stack Trace:",JSON.stringify(new Error().stack,null,2)]});return!1}catch(u){a.recordMetric((l=u==null?void 0:u.axiosException)!=null&&l.response?Te(u.axiosException.response):gt);let h=u.axiosException??u;return this.messages.apiError=this.messages.extractErrorMessage(h,"api"),!1}}nxCloudVersion(){try{let e=JSON.parse((0,jh.readFileSync)("package.json").toString());return e.devDependencies["nx-cloud"]||e.devDependencies["@nrwl/nx-cloud"]}catch{return"unknown"}}}});var Zh={};Pe(Zh,{ErrorReporterApi:()=>Qo});var cy,Qo,Jh=le(()=>{"use strict";Lr();({output:cy}=Ze()),Qo=class{constructor(e){this.apiAxiosInstance=jt(e)}async reportError(e){try{await qe(()=>this.apiAxiosInstance.post("/nx-cloud/report-client-error",{message:e}))}catch(t){cy.warn({title:`Unable to record the following error: '${e}'`,bodyLines:[t.message]})}}}});var Qh={};Pe(Qh,{E2EEncryption:()=>ea});var yr,Er,ea,ef=le(()=>{"use strict";yr=require("crypto"),Er=require("fs"),ea=class{constructor(e){e&&(this.encryptionKey=this.to32bytes(e))}to32bytes(e){let t=e;for(;t.length<32;)t+=e;return Buffer.from(t).slice(0,32)}hasEncryption(){return!!this.encryptionKey}encryptFile(e){let t=(0,yr.randomBytes)(16),s=(0,yr.createCipheriv)("aes-256-cbc",this.encryptionKey,t),i=(0,Er.readFileSync)(e),n=s.update(i),o=Buffer.concat([t,n,s.final()]);(0,Er.writeFileSync)(e,o)}decryptFile(e){let t=(0,Er.readFileSync)(e);try{let s=(0,yr.createDecipheriv)("aes-256-cbc",this.encryptionKey,t.slice(0,16)),i=t.slice(16),n=s.update(i),o=Buffer.concat([n,s.final()]);(0,Er.writeFileSync)(e,o)}catch{throw new Error("Could not decrypt the artifact. Please check your encryption key.")}}}});var tf={};Pe(tf,{MessageReporter:()=>ta});var uy,ta,rf=le(()=>{"use strict";fn();({output:uy}=Ze()),ta=class{constructor(e){this.options=e;this.cacheError=null;this.apiError=null;this.message=null}get anyErrors(){return this.cacheError||this.apiError}printMessages(){if(this.anyErrors){let e=[];this.cacheError&&e.push(`- ${this.cacheError}`),this.apiError&&this.apiError!==this.cacheError&&e.push(`- ${this.apiError}`),uy.warn({title:"Nx Cloud Problems",bodyLines:e})}this.message&&ys(this.message)}extractErrorMessage(e,t){if(e.code==="ECONNABORTED")return process.env.NX_CLOUD_ECONNABORTED_LOGGING=="true"&&(console.log("[NX CLOUD DEBUG] Request config without `data`"),delete e.config.data,console.log(JSON.stringify(e.config,null,2))),`Cannot connect to Nx Cloud (scope: ${t}, code: ${e.code}). Try invoking the command with the NX_CLOUD_NO_TIMEOUTS env variable set to 'true'.`;if(e.code==="ECONNREFUSED"||e.code==="EAI_AGAIN"||e.code==="ENOTFOUND"||e.code==="EPROTO")return`Cannot connect to Nx Cloud (scope: ${t}, code: ${e.code}).`;if(e.response&&e.response.status===401)return e.response.data.message?e.response.data.message:e.response.data;if(e.response&&e.response.status===402)return this.options.showUsageWarnings===!1||this.options.showUsageWarnings===void 0?null:e.response.data.message?e.response.data.message:e.response.data;{let s="";e.response&&e.response.data&&e.response.data.message?s=`. ${e.response.data.message}`:e.response&&e.response.data&&(s=`. ${e.response.data}`);let i=e.code?` (code: ${e.code})`:"";return`${e.message}${s}${i}`}}}});var ly={};Pe(ly,{default:()=>sf});module.exports=ke(ly);async function sf(r,e){if(r.lightRunnerResolutionPaths){let{configureLightClientRequire:g}=(gr(),ke(sa));g(r.lightRunnerResolutionPaths)}let{cacheDirectory:t}=ia(),{FileStorage:s}=(zh(),ke(Gh)),{CloudRunApi:i}=(Yh(),ke(Wh)),{ErrorReporterApi:n}=(Jh(),ke(Zh)),{E2EEncryption:o}=(ef(),ke(Qh)),{getMachineInfo:c}=(pt(),ke(ya)),{MessageReporter:a}=(rf(),ke(tf)),{submitRunMetrics:l}=(_s(),ke(Zc)),u=new o(r.encryptionKey),h=new n(r.runnerOptions),f=new s(u,h,r.runnerOptions,"daemon"),d=new a(r.runnerOptions),p={},y=c(),_=new i(d,p,r.runnerOptions,y);return setTimeout(async()=>{e.log("Uploading file artifacts");try{await Promise.all(r.delayedStoreRequests.map(g=>f.store(g.hash,g.url,t))),e.log("Done uploading file artifacts")}catch(g){e.log("Error when uploading file artifacts"),console.log(g);return}for(let g of f.storedHashes){let w=r.runEnd.taskExecutions.find(S=>S.hash===g);if(!w)throw new Error(`Task with hash ${g} isn't recorded`);w.uploadedToStorage=!0}r.runEnd.taskExecutions.forEach(g=>{var w;g.artifactId=(w=r.runEnd.allTasks.find(S=>S.hash==g.hash))==null?void 0:w.artifactId}),e.log("Sending EndRun request");try{if(!await _.endRun(r.runEnd.runData,r.runEnd.taskExecutions,r.ciExecutionContext,r.runEnd.linkId))throw new Error(d.apiError);e.log("Done sending EndRun request")}catch(g){e.log("Error when sending EndRun"),console.log(g)}await l(r.runOptions)},0),"{}"}
