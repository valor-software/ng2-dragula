"use strict";var pv=Object.create;var Wi=Object.defineProperty;var mv=Object.getOwnPropertyDescriptor;var yv=Object.getOwnPropertyNames;var Ev=Object.getPrototypeOf,gv=Object.prototype.hasOwnProperty;var q=(r,e)=>()=>(r&&(e=r(r=0)),e);var E=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Dt=(r,e)=>{for(var t in e)Wi(r,t,{get:e[t],enumerable:!0})},eh=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of yv(e))!gv.call(r,i)&&i!==t&&Wi(r,i,{get:()=>e[i],enumerable:!(n=mv(e,i))||n.enumerable});return r};var Sr=(r,e,t)=>(t=r!=null?pv(Ev(r)):{},eh(e||!r||!r.__esModule?Wi(t,"default",{value:r,enumerable:!0}):t,r)),be=r=>eh(Wi({},"__esModule",{value:!0}),r);function th(){return process.env.CI==="true"||process.env.TF_BUILD==="true"||process.env.GITHUB_ACTIONS==="true"||process.env.BUILDKITE==="true"||process.env.CIRCLECI==="true"||process.env.CIRRUS_CI==="true"||process.env.TRAVIS==="true"||!!process.env["bamboo.buildKey"]||!!process.env.CODEBUILD_BUILD_ID||!!process.env.GITLAB_CI||!!process.env.HEROKU_TEST_RUN_ID||!!process.env.BUILD_ID||!!process.env.BUILD_BUILDID||!!process.env.TEAMCITY_VERSION}var rh=q(()=>{"use strict"});var oh=E((jN,da)=>{"use strict";var _v=require("fs"),nh=require("path"),bv=require("os");function ih(r){console.log(`[dotenv][DEBUG] ${r}`)}var vv=`
`,Sv=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,wv=/\\n/g,Rv=/\r\n|\n|\r/;function sh(r,e){let t=!!(e&&e.debug),n={};return r.toString().split(Rv).forEach(function(i,s){let o=i.match(Sv);if(o!=null){let a=o[1],c=o[2]||"",l=c.length-1,u=c[0]==='"'&&c[l]==='"';c[0]==="'"&&c[l]==="'"||u?(c=c.substring(1,l),u&&(c=c.replace(wv,vv))):c=c.trim(),n[a]=c}else t&&ih(`did not match key and value when parsing line ${s+1}: ${i}`)}),n}function xv(r){return r[0]==="~"?nh.join(bv.homedir(),r.slice(1)):r}function Ov(r){let e=nh.resolve(process.cwd(),".env"),t="utf8",n=!1;r&&(r.path!=null&&(e=xv(r.path)),r.encoding!=null&&(t=r.encoding),r.debug!=null&&(n=!0));try{let i=sh(_v.readFileSync(e,{encoding:t}),{debug:n});return Object.keys(i).forEach(function(s){Object.prototype.hasOwnProperty.call(process.env,s)?n&&ih(`"${s}" is already defined in \`process.env\` and will not be overwritten`):process.env[s]=i[s]}),{parsed:i}}catch(i){return{error:i}}}da.exports.config=Ov;da.exports.parse=sh});var ah=E((Kn,pa)=>{"use strict";(function(r,e){typeof Kn=="object"&&typeof pa=="object"?pa.exports=e(require("child_process"),require("crypto")):typeof define=="function"&&define.amd?define(["child_process","crypto"],e):typeof Kn=="object"?Kn["electron-machine-id"]=e(require("child_process"),require("crypto")):r["electron-machine-id"]=e(r.child_process,r.crypto)})(Kn,function(r,e){return function(t){function n(s){if(i[s])return i[s].exports;var o=i[s]={exports:{},id:s,loaded:!1};return t[s].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var i={};return n.m=t,n.c=i,n.p="",n(0)}([function(t,n,i){t.exports=i(34)},function(t,n,i){var s=i(29)("wks"),o=i(33),a=i(2).Symbol,c=typeof a=="function",l=t.exports=function(u){return s[u]||(s[u]=c&&a[u]||(c?a:o)("Symbol."+u))};l.store=s},function(t,n){var i=t.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=i)},function(t,n,i){var s=i(9);t.exports=function(o){if(!s(o))throw TypeError(o+" is not an object!");return o}},function(t,n,i){t.exports=!i(24)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(t,n,i){var s=i(12),o=i(17);t.exports=i(4)?function(a,c,l){return s.f(a,c,o(1,l))}:function(a,c,l){return a[c]=l,a}},function(t,n){var i=t.exports={version:"2.4.0"};typeof __e=="number"&&(__e=i)},function(t,n,i){var s=i(14);t.exports=function(o,a,c){if(s(o),a===void 0)return o;switch(c){case 1:return function(l){return o.call(a,l)};case 2:return function(l,u){return o.call(a,l,u)};case 3:return function(l,u,f){return o.call(a,l,u,f)}}return function(){return o.apply(a,arguments)}}},function(t,n){var i={}.hasOwnProperty;t.exports=function(s,o){return i.call(s,o)}},function(t,n){t.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},function(t,n){t.exports={}},function(t,n){var i={}.toString;t.exports=function(s){return i.call(s).slice(8,-1)}},function(t,n,i){var s=i(3),o=i(26),a=i(32),c=Object.defineProperty;n.f=i(4)?Object.defineProperty:function(l,u,f){if(s(l),u=a(u,!0),s(f),o)try{return c(l,u,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported!");return"value"in f&&(l[u]=f.value),l}},function(t,n,i){var s=i(42),o=i(15);t.exports=function(a){return s(o(a))}},function(t,n){t.exports=function(i){if(typeof i!="function")throw TypeError(i+" is not a function!");return i}},function(t,n){t.exports=function(i){if(i==null)throw TypeError("Can't call method on  "+i);return i}},function(t,n,i){var s=i(9),o=i(2).document,a=s(o)&&s(o.createElement);t.exports=function(c){return a?o.createElement(c):{}}},function(t,n){t.exports=function(i,s){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:s}}},function(t,n,i){var s=i(12).f,o=i(8),a=i(1)("toStringTag");t.exports=function(c,l,u){c&&!o(c=u?c:c.prototype,a)&&s(c,a,{configurable:!0,value:l})}},function(t,n,i){var s=i(29)("keys"),o=i(33);t.exports=function(a){return s[a]||(s[a]=o(a))}},function(t,n){var i=Math.ceil,s=Math.floor;t.exports=function(o){return isNaN(o=+o)?0:(o>0?s:i)(o)}},function(t,n,i){var s=i(11),o=i(1)("toStringTag"),a=s(function(){return arguments}())=="Arguments",c=function(l,u){try{return l[u]}catch{}};t.exports=function(l){var u,f,h;return l===void 0?"Undefined":l===null?"Null":typeof(f=c(u=Object(l),o))=="string"?f:a?s(u):(h=s(u))=="Object"&&typeof u.callee=="function"?"Arguments":h}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,i){var s=i(2),o=i(6),a=i(7),c=i(5),l="prototype",u=function(f,h,d){var m,b,p,w=f&u.F,k=f&u.G,O=f&u.S,C=f&u.P,P=f&u.B,T=f&u.W,z=k?o:o[h]||(o[h]={}),G=z[l],I=k?s:O?s[h]:(s[h]||{})[l];k&&(d=h);for(m in d)b=!w&&I&&I[m]!==void 0,b&&m in z||(p=b?I[m]:d[m],z[m]=k&&typeof I[m]!="function"?d[m]:P&&b?a(p,s):T&&I[m]==p?function(N){var j=function(X,V,J){if(this instanceof N){switch(arguments.length){case 0:return new N;case 1:return new N(X);case 2:return new N(X,V)}return new N(X,V,J)}return N.apply(this,arguments)};return j[l]=N[l],j}(p):C&&typeof p=="function"?a(Function.call,p):p,C&&((z.virtual||(z.virtual={}))[m]=p,f&u.R&&G&&!G[m]&&c(G,m,p)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,n){t.exports=function(i){try{return!!i()}catch{return!0}}},function(t,n,i){t.exports=i(2).document&&document.documentElement},function(t,n,i){t.exports=!i(4)&&!i(24)(function(){return Object.defineProperty(i(16)("div"),"a",{get:function(){return 7}}).a!=7})},function(t,n,i){"use strict";var s=i(28),o=i(23),a=i(57),c=i(5),l=i(8),u=i(10),f=i(45),h=i(18),d=i(52),m=i(1)("iterator"),b=!([].keys&&"next"in[].keys()),p="@@iterator",w="keys",k="values",O=function(){return this};t.exports=function(C,P,T,z,G,I,N){f(T,P,z);var j,X,V,J=function(A){if(!b&&A in U)return U[A];switch(A){case w:return function(){return new T(this,A)};case k:return function(){return new T(this,A)}}return function(){return new T(this,A)}},B=P+" Iterator",K=G==k,$=!1,U=C.prototype,H=U[m]||U[p]||G&&U[G],le=H||J(G),Re=G?K?J("entries"):le:void 0,R=P=="Array"&&U.entries||H;if(R&&(V=d(R.call(new C)),V!==Object.prototype&&(h(V,B,!0),s||l(V,m)||c(V,m,O))),K&&H&&H.name!==k&&($=!0,le=function(){return H.call(this)}),s&&!N||!b&&!$&&U[m]||c(U,m,le),u[P]=le,u[B]=O,G)if(j={values:K?le:J(k),keys:I?le:J(w),entries:Re},N)for(X in j)X in U||a(U,X,j[X]);else o(o.P+o.F*(b||$),P,j);return j}},function(t,n){t.exports=!0},function(t,n,i){var s=i(2),o="__core-js_shared__",a=s[o]||(s[o]={});t.exports=function(c){return a[c]||(a[c]={})}},function(t,n,i){var s,o,a,c=i(7),l=i(41),u=i(25),f=i(16),h=i(2),d=h.process,m=h.setImmediate,b=h.clearImmediate,p=h.MessageChannel,w=0,k={},O="onreadystatechange",C=function(){var T=+this;if(k.hasOwnProperty(T)){var z=k[T];delete k[T],z()}},P=function(T){C.call(T.data)};m&&b||(m=function(T){for(var z=[],G=1;arguments.length>G;)z.push(arguments[G++]);return k[++w]=function(){l(typeof T=="function"?T:Function(T),z)},s(w),w},b=function(T){delete k[T]},i(11)(d)=="process"?s=function(T){d.nextTick(c(C,T,1))}:p?(o=new p,a=o.port2,o.port1.onmessage=P,s=c(a.postMessage,a,1)):h.addEventListener&&typeof postMessage=="function"&&!h.importScripts?(s=function(T){h.postMessage(T+"","*")},h.addEventListener("message",P,!1)):s=O in f("script")?function(T){u.appendChild(f("script"))[O]=function(){u.removeChild(this),C.call(T)}}:function(T){setTimeout(c(C,T,1),0)}),t.exports={set:m,clear:b}},function(t,n,i){var s=i(20),o=Math.min;t.exports=function(a){return a>0?o(s(a),9007199254740991):0}},function(t,n,i){var s=i(9);t.exports=function(o,a){if(!s(o))return o;var c,l;if(a&&typeof(c=o.toString)=="function"&&!s(l=c.call(o))||typeof(c=o.valueOf)=="function"&&!s(l=c.call(o))||!a&&typeof(c=o.toString)=="function"&&!s(l=c.call(o)))return l;throw TypeError("Can't convert object to primitive value")}},function(t,n){var i=0,s=Math.random();t.exports=function(o){return"Symbol(".concat(o===void 0?"":o,")_",(++i+s).toString(36))}},function(t,n,i){"use strict";function s(O){return O&&O.__esModule?O:{default:O}}function o(){return process.platform!=="win32"?"":process.arch==="ia32"&&process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?"mixed":"native"}function a(O){return(0,m.createHash)("sha256").update(O).digest("hex")}function c(O){switch(p){case"darwin":return O.split("IOPlatformUUID")[1].split(`
`)[0].replace(/\=|\s+|\"/gi,"").toLowerCase();case"win32":return O.toString().split("REG_SZ")[1].replace(/\r+|\n+|\s+/gi,"").toLowerCase();case"linux":return O.toString().replace(/\r+|\n+|\s+/gi,"").toLowerCase();case"freebsd":return O.toString().replace(/\r+|\n+|\s+/gi,"").toLowerCase();default:throw new Error("Unsupported platform: "+process.platform)}}function l(O){var C=c((0,d.execSync)(k[p]).toString());return O?C:a(C)}function u(O){return new h.default(function(C,P){return(0,d.exec)(k[p],{},function(T,z,G){if(T)return P(new Error("Error while obtaining machine id: "+T.stack));var I=c(z.toString());return C(O?I:a(I))})})}Object.defineProperty(n,"__esModule",{value:!0});var f=i(35),h=s(f);n.machineIdSync=l,n.machineId=u;var d=i(70),m=i(71),b=process,p=b.platform,w={native:"%windir%\\System32",mixed:"%windir%\\sysnative\\cmd.exe /c %windir%\\System32"},k={darwin:"ioreg -rd1 -c IOPlatformExpertDevice",win32:w[o()]+"\\REG.exe QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",linux:"( cat /var/lib/dbus/machine-id /etc/machine-id 2> /dev/null || hostname ) | head -n 1 || :",freebsd:"kenv -q smbios.system.uuid || sysctl -n kern.hostuuid"}},function(t,n,i){t.exports={default:i(36),__esModule:!0}},function(t,n,i){i(66),i(68),i(69),i(67),t.exports=i(6).Promise},function(t,n){t.exports=function(){}},function(t,n){t.exports=function(i,s,o,a){if(!(i instanceof s)||a!==void 0&&a in i)throw TypeError(o+": incorrect invocation!");return i}},function(t,n,i){var s=i(13),o=i(31),a=i(62);t.exports=function(c){return function(l,u,f){var h,d=s(l),m=o(d.length),b=a(f,m);if(c&&u!=u){for(;m>b;)if(h=d[b++],h!=h)return!0}else for(;m>b;b++)if((c||b in d)&&d[b]===u)return c||b||0;return!c&&-1}}},function(t,d,i){var s=i(7),o=i(44),a=i(43),c=i(3),l=i(31),u=i(64),f={},h={},d=t.exports=function(m,b,p,w,k){var O,C,P,T,z=k?function(){return m}:u(m),G=s(p,w,b?2:1),I=0;if(typeof z!="function")throw TypeError(m+" is not iterable!");if(a(z)){for(O=l(m.length);O>I;I++)if(T=b?G(c(C=m[I])[0],C[1]):G(m[I]),T===f||T===h)return T}else for(P=z.call(m);!(C=P.next()).done;)if(T=o(P,G,C.value,b),T===f||T===h)return T};d.BREAK=f,d.RETURN=h},function(t,n){t.exports=function(i,s,o){var a=o===void 0;switch(s.length){case 0:return a?i():i.call(o);case 1:return a?i(s[0]):i.call(o,s[0]);case 2:return a?i(s[0],s[1]):i.call(o,s[0],s[1]);case 3:return a?i(s[0],s[1],s[2]):i.call(o,s[0],s[1],s[2]);case 4:return a?i(s[0],s[1],s[2],s[3]):i.call(o,s[0],s[1],s[2],s[3])}return i.apply(o,s)}},function(t,n,i){var s=i(11);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(o){return s(o)=="String"?o.split(""):Object(o)}},function(t,n,i){var s=i(10),o=i(1)("iterator"),a=Array.prototype;t.exports=function(c){return c!==void 0&&(s.Array===c||a[o]===c)}},function(t,n,i){var s=i(3);t.exports=function(o,a,c,l){try{return l?a(s(c)[0],c[1]):a(c)}catch(f){var u=o.return;throw u!==void 0&&s(u.call(o)),f}}},function(t,n,i){"use strict";var s=i(49),o=i(17),a=i(18),c={};i(5)(c,i(1)("iterator"),function(){return this}),t.exports=function(l,u,f){l.prototype=s(c,{next:o(1,f)}),a(l,u+" Iterator")}},function(t,n,i){var s=i(1)("iterator"),o=!1;try{var a=[7][s]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch{}t.exports=function(c,l){if(!l&&!o)return!1;var u=!1;try{var f=[7],h=f[s]();h.next=function(){return{done:u=!0}},f[s]=function(){return h},c(f)}catch{}return u}},function(t,n){t.exports=function(i,s){return{value:s,done:!!i}}},function(t,n,i){var s=i(2),o=i(30).set,a=s.MutationObserver||s.WebKitMutationObserver,c=s.process,l=s.Promise,u=i(11)(c)=="process";t.exports=function(){var f,h,d,m=function(){var k,O;for(u&&(k=c.domain)&&k.exit();f;){O=f.fn,f=f.next;try{O()}catch(C){throw f?d():h=void 0,C}}h=void 0,k&&k.enter()};if(u)d=function(){c.nextTick(m)};else if(a){var b=!0,p=document.createTextNode("");new a(m).observe(p,{characterData:!0}),d=function(){p.data=b=!b}}else if(l&&l.resolve){var w=l.resolve();d=function(){w.then(m)}}else d=function(){o.call(s,m)};return function(k){var O={fn:k,next:void 0};h&&(h.next=O),f||(f=O,d()),h=O}}},function(t,n,i){var s=i(3),o=i(50),a=i(22),c=i(19)("IE_PROTO"),l=function(){},u="prototype",f=function(){var h,d=i(16)("iframe"),m=a.length,b=">";for(d.style.display="none",i(25).appendChild(d),d.src="javascript:",h=d.contentWindow.document,h.open(),h.write("<script>document.F=Object</script"+b),h.close(),f=h.F;m--;)delete f[u][a[m]];return f()};t.exports=Object.create||function(h,d){var m;return h!==null?(l[u]=s(h),m=new l,l[u]=null,m[c]=h):m=f(),d===void 0?m:o(m,d)}},function(t,n,i){var s=i(12),o=i(3),a=i(54);t.exports=i(4)?Object.defineProperties:function(c,l){o(c);for(var u,f=a(l),h=f.length,d=0;h>d;)s.f(c,u=f[d++],l[u]);return c}},function(t,n,i){var s=i(55),o=i(17),a=i(13),c=i(32),l=i(8),u=i(26),f=Object.getOwnPropertyDescriptor;n.f=i(4)?f:function(h,d){if(h=a(h),d=c(d,!0),u)try{return f(h,d)}catch{}if(l(h,d))return o(!s.f.call(h,d),h[d])}},function(t,n,i){var s=i(8),o=i(63),a=i(19)("IE_PROTO"),c=Object.prototype;t.exports=Object.getPrototypeOf||function(l){return l=o(l),s(l,a)?l[a]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?c:null}},function(t,n,i){var s=i(8),o=i(13),a=i(39)(!1),c=i(19)("IE_PROTO");t.exports=function(l,u){var f,h=o(l),d=0,m=[];for(f in h)f!=c&&s(h,f)&&m.push(f);for(;u.length>d;)s(h,f=u[d++])&&(~a(m,f)||m.push(f));return m}},function(t,n,i){var s=i(53),o=i(22);t.exports=Object.keys||function(a){return s(a,o)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,i){var s=i(5);t.exports=function(o,a,c){for(var l in a)c&&o[l]?o[l]=a[l]:s(o,l,a[l]);return o}},function(t,n,i){t.exports=i(5)},function(t,n,i){var s=i(9),o=i(3),a=function(c,l){if(o(c),!s(l)&&l!==null)throw TypeError(l+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(c,l,u){try{u=i(7)(Function.call,i(51).f(Object.prototype,"__proto__").set,2),u(c,[]),l=!(c instanceof Array)}catch{l=!0}return function(f,h){return a(f,h),l?f.__proto__=h:u(f,h),f}}({},!1):void 0),check:a}},function(t,n,i){"use strict";var s=i(2),o=i(6),a=i(12),c=i(4),l=i(1)("species");t.exports=function(u){var f=typeof o[u]=="function"?o[u]:s[u];c&&f&&!f[l]&&a.f(f,l,{configurable:!0,get:function(){return this}})}},function(t,n,i){var s=i(3),o=i(14),a=i(1)("species");t.exports=function(c,l){var u,f=s(c).constructor;return f===void 0||(u=s(f)[a])==null?l:o(u)}},function(t,n,i){var s=i(20),o=i(15);t.exports=function(a){return function(c,l){var u,f,h=String(o(c)),d=s(l),m=h.length;return d<0||d>=m?a?"":void 0:(u=h.charCodeAt(d),u<55296||u>56319||d+1===m||(f=h.charCodeAt(d+1))<56320||f>57343?a?h.charAt(d):u:a?h.slice(d,d+2):(u-55296<<10)+(f-56320)+65536)}}},function(t,n,i){var s=i(20),o=Math.max,a=Math.min;t.exports=function(c,l){return c=s(c),c<0?o(c+l,0):a(c,l)}},function(t,n,i){var s=i(15);t.exports=function(o){return Object(s(o))}},function(t,n,i){var s=i(21),o=i(1)("iterator"),a=i(10);t.exports=i(6).getIteratorMethod=function(c){if(c!=null)return c[o]||c["@@iterator"]||a[s(c)]}},function(t,n,i){"use strict";var s=i(37),o=i(47),a=i(10),c=i(13);t.exports=i(27)(Array,"Array",function(l,u){this._t=c(l),this._i=0,this._k=u},function(){var l=this._t,u=this._k,f=this._i++;return!l||f>=l.length?(this._t=void 0,o(1)):u=="keys"?o(0,f):u=="values"?o(0,l[f]):o(0,[f,l[f]])},"values"),a.Arguments=a.Array,s("keys"),s("values"),s("entries")},function(t,n){},function(t,n,i){"use strict";var s,o,a,c=i(28),l=i(2),u=i(7),f=i(21),h=i(23),d=i(9),m=(i(3),i(14)),b=i(38),p=i(40),w=(i(58).set,i(60)),k=i(30).set,O=i(48)(),C="Promise",P=l.TypeError,z=l.process,T=l[C],z=l.process,G=f(z)=="process",I=function(){},N=!!function(){try{var R=T.resolve(1),A=(R.constructor={})[i(1)("species")]=function(S){S(I,I)};return(G||typeof PromiseRejectionEvent=="function")&&R.then(I)instanceof A}catch{}}(),j=function(R,A){return R===A||R===T&&A===a},X=function(R){var A;return!(!d(R)||typeof(A=R.then)!="function")&&A},V=function(R){return j(T,R)?new J(R):new o(R)},J=o=function(R){var A,S;this.promise=new R(function(W,de){if(A!==void 0||S!==void 0)throw P("Bad Promise constructor");A=W,S=de}),this.resolve=m(A),this.reject=m(S)},B=function(R){try{R()}catch(A){return{error:A}}},K=function(R,A){if(!R._n){R._n=!0;var S=R._c;O(function(){for(var W=R._v,de=R._s==1,At=0,ct=function(yt){var _e,Yr,vr=de?yt.ok:yt.fail,Pe=yt.resolve,Vt=yt.reject,y=yt.domain;try{vr?(de||(R._h==2&&H(R),R._h=1),vr===!0?_e=W:(y&&y.enter(),_e=vr(W),y&&y.exit()),_e===yt.promise?Vt(P("Promise-chain cycle")):(Yr=X(_e))?Yr.call(_e,Pe,Vt):Pe(_e)):Vt(W)}catch(_){Vt(_)}};S.length>At;)ct(S[At++]);R._c=[],R._n=!1,A&&!R._h&&$(R)})}},$=function(R){k.call(l,function(){var A,S,W,de=R._v;if(U(R)&&(A=B(function(){G?z.emit("unhandledRejection",de,R):(S=l.onunhandledrejection)?S({promise:R,reason:de}):(W=l.console)&&W.error&&W.error("Unhandled promise rejection",de)}),R._h=G||U(R)?2:1),R._a=void 0,A)throw A.error})},U=function(R){if(R._h==1)return!1;for(var A,S=R._a||R._c,W=0;S.length>W;)if(A=S[W++],A.fail||!U(A.promise))return!1;return!0},H=function(R){k.call(l,function(){var A;G?z.emit("rejectionHandled",R):(A=l.onrejectionhandled)&&A({promise:R,reason:R._v})})},le=function(R){var A=this;A._d||(A._d=!0,A=A._w||A,A._v=R,A._s=2,A._a||(A._a=A._c.slice()),K(A,!0))},Re=function(R){var A,S=this;if(!S._d){S._d=!0,S=S._w||S;try{if(S===R)throw P("Promise can't be resolved itself");(A=X(R))?O(function(){var W={_w:S,_d:!1};try{A.call(R,u(Re,W,1),u(le,W,1))}catch(de){le.call(W,de)}}):(S._v=R,S._s=1,K(S,!1))}catch(W){le.call({_w:S,_d:!1},W)}}};N||(T=function(R){b(this,T,C,"_h"),m(R),s.call(this);try{R(u(Re,this,1),u(le,this,1))}catch(A){le.call(this,A)}},s=function(R){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},s.prototype=i(56)(T.prototype,{then:function(R,A){var S=V(w(this,T));return S.ok=typeof R!="function"||R,S.fail=typeof A=="function"&&A,S.domain=G?z.domain:void 0,this._c.push(S),this._a&&this._a.push(S),this._s&&K(this,!1),S.promise},catch:function(R){return this.then(void 0,R)}}),J=function(){var R=new s;this.promise=R,this.resolve=u(Re,R,1),this.reject=u(le,R,1)}),h(h.G+h.W+h.F*!N,{Promise:T}),i(18)(T,C),i(59)(C),a=i(6)[C],h(h.S+h.F*!N,C,{reject:function(R){var A=V(this),S=A.reject;return S(R),A.promise}}),h(h.S+h.F*(c||!N),C,{resolve:function(R){if(R instanceof T&&j(R.constructor,this))return R;var A=V(this),S=A.resolve;return S(R),A.promise}}),h(h.S+h.F*!(N&&i(46)(function(R){T.all(R).catch(I)})),C,{all:function(R){var A=this,S=V(A),W=S.resolve,de=S.reject,At=B(function(){var ct=[],yt=0,_e=1;p(R,!1,function(Yr){var vr=yt++,Pe=!1;ct.push(void 0),_e++,A.resolve(Yr).then(function(Vt){Pe||(Pe=!0,ct[vr]=Vt,--_e||W(ct))},de)}),--_e||W(ct)});return At&&de(At.error),S.promise},race:function(R){var A=this,S=V(A),W=S.reject,de=B(function(){p(R,!1,function(At){A.resolve(At).then(S.resolve,W)})});return de&&W(de.error),S.promise}})},function(t,n,i){"use strict";var s=i(61)(!0);i(27)(String,"String",function(o){this._t=String(o),this._i=0},function(){var o,a=this._t,c=this._i;return c>=a.length?{value:void 0,done:!0}:(o=s(a,c),this._i+=o.length,{value:o,done:!1})})},function(t,n,i){i(65);for(var s=i(2),o=i(5),a=i(10),c=i(1)("toStringTag"),l=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var f=l[u],h=s[f],d=h&&h.prototype;d&&!d[c]&&o(d,c,f),a[f]=a.Array}},function(t,n){t.exports=require("child_process")},function(t,n){t.exports=require("crypto")}])})});var ch={};Dt(ch,{configureLightClientRequire:()=>Tv,configuredPaths:()=>wr,lightClientRequire:()=>ie});function Tv(r){wr=r,ie=function(e){if(wr.length===0)throw new Error("Light client require must have paths configured with `configureLightClientRequire`.");let t;try{t=require.resolve(e,{paths:r})}catch(n){throw process.env.NX_VERBOSE_LOGGING==="true"&&console.error(`Was not able to require.resolve module ${e} from the following paths: ${r}. This may be expected.`),n}try{return require(t)}catch(n){throw process.env.NX_VERBOSE_LOGGING==="true"&&console.error(`Was not able require module ${e} from path ${t}. This may be expected. `),n}}}var ie,wr,Rr=q(()=>{"use strict";wr=[]});var Y=E(xr=>{"use strict";Rr();try{try{let{output:r}=ie("nx/src/utils/output"),e;try{e=ie("nx/src/utils/app-root").workspaceRoot}catch{e=ie("nx/src/utils/workspace-root").workspaceRoot}xr.workspaceRoot=e,xr.output=r}catch{let{output:e}=ie("@nrwl/workspace/src/utilities/output"),{appRootPath:t}=ie("@nrwl/tao/src/utils/app-root");xr.workspaceRoot=t,xr.output=e}}catch{let e=t=>{var n;return`${t.title}

${(n=t.bodyLines)==null?void 0:n.join(`
`)}`};xr.output={note:t=>console.info(e(t)),error:t=>console.error(e(t)),warn:t=>console.warn(e(t)),success:t=>console.log(e(t)),addVerticalSeparator:()=>"",addNewline:()=>console.log(`
`)},xr.workspaceRoot=process.cwd()}});function ut(r){return!!r}function yh(){return process.env.NX_INVOKED_BY_RUNNER==="true"||process.env.NX_CLOUD==="false"}function tt(){try{return(0,ma.execSync)("git rev-parse HEAD",{stdio:"pipe"}).toString().trim()}catch{return}}function Yi(){try{return(0,ma.execSync)("git rev-parse --symbolic-full-name HEAD",{stdio:"pipe"}).toString().trim()}catch{return}}function Av(){try{let r=(0,fh.readFileSync)((0,Xi.join)(Nv,"nx-cloud.env"));return Cv.parse(r)}catch{return{}}}function Dv(){let r=Av();Et=process.env.NX_CLOUD_AUTH_TOKEN||process.env.NX_CLOUD_ACCESS_TOKEN||r.NX_CLOUD_AUTH_TOKEN||r.NX_CLOUD_ACCESS_TOKEN,Or=process.env.NX_CLOUD_ENCRYPTION_KEY||r.NX_CLOUD_ENCRYPTION_KEY,L=process.env.NX_VERBOSE_LOGGING==="true"||r.NX_VERBOSE_LOGGING==="true",gt=process.env.NX_CLOUD_NO_TIMEOUTS==="true"||r.NX_CLOUD_NO_TIMEOUTS==="true"}function je(){return Eh()}function Eh(){return process.env.NX_CI_EXECUTION_ID!==void 0?process.env.NX_CI_EXECUTION_ID:process.env.NX_RUN_GROUP!==void 0?process.env.NX_RUN_GROUP:process.env.CIRCLECI!==void 0&&process.env.CIRCLE_WORKFLOW_ID?process.env.CIRCLE_WORKFLOW_ID:process.env.TRAVIS_BUILD_ID!==void 0?process.env.TRAVIS_BUILD_ID:process.env.GITHUB_ACTIONS&&process.env.GITHUB_RUN_ID?`${process.env.GITHUB_RUN_ID}-${process.env.GITHUB_RUN_ATTEMPT}`:process.env.BUILD_BUILDID?process.env.BUILD_BUILDID:process.env.BITBUCKET_BUILD_NUMBER!==void 0?process.env.BITBUCKET_BUILD_NUMBER:process.env.VERCEL_GIT_COMMIT_SHA!==void 0?process.env.VERCEL_GIT_COMMIT_SHA:process.env.CI_PIPELINE_ID?process.env.CI_PIPELINE_ID:process.env.BUILD_TAG?process.env.BUILD_TAG:null}function xe(){return process.env.NX_CI_EXECUTION_ENV??""}function ve(){if(process.env.NX_RUN_GROUP!==void 0)return process.env.NX_RUN_GROUP;let r=Eh();return r?xe()?`${r}-${xe()}`:r:tt()}function me(){if(process.env.NX_BRANCH!==void 0)return process.env.NX_BRANCH;if(process.env.CIRCLECI!==void 0){if(process.env.CIRCLE_PR_NUMBER!==void 0)return process.env.CIRCLE_PR_NUMBER;if(process.env.CIRCLE_PULL_REQUEST!==void 0){let r=process.env.CIRCLE_PULL_REQUEST.split("/");return r[r.length-1]}else if(process.env.CIRCLE_BRANCH!==void 0)return process.env.CIRCLE_BRANCH}if(process.env.TRAVIS_PULL_REQUEST!==void 0)return process.env.TRAVIS_PULL_REQUEST;if(process.env.GITHUB_ACTIONS){if(process.env.GITHUB_REF){let r=process.env.GITHUB_REF.match(/refs\/pull\/(\d+)\/merge/);if(r)return r[1]}return process.env.GITHUB_HEAD_REF??""}return process.env.BITBUCKET_PR_ID!==void 0?process.env.BITBUCKET_PR_ID:process.env.VERCEL_GIT_COMMIT_REF!==void 0?process.env.VERCEL_GIT_COMMIT_REF:process.env.CI_MERGE_REQUEST_IID?process.env.CI_MERGE_REQUEST_IID:process.env.CI_COMMIT_BRANCH?process.env.CI_COMMIT_BRANCH:process.env.GIT_BRANCH?process.env.GIT_BRANCH:null}function Jr(){let r=require("os"),e=(0,lh.createHash)("md5");return e.update(Iv()),{machineId:e.digest("base64"),platform:r.platform(),version:r.version?r.version():"",cpuCores:r.cpus().length}}function Ji(){let r=(0,Xi.parse)(process.argv[1]).name,e=`${process.argv.slice(2).join(" ")}`;return`${r} ${e}`}function gh(r,e){let t=["NX_VERBOSE_LOGGING","NX_CLOUD_DEBUG_URLS","NX_CLOUD_ACCESS_TOKEN"];r&&r.split(",").forEach(s=>{t.push(s.trim())});let n=Object.fromEntries(t.map(s=>[s,process.env[s]]).filter(([,s])=>s!==void 0));n.NX_VERBOSE_LOGGING=L,n.NX_CLOUD_ACCESS_TOKEN=Et??e;let i=Object.fromEntries(Object.entries(n).filter(([,s])=>s!==void 0));return L&&(uh.note({title:"Environment variables passed to cloud:",bodyLines:Object.entries(i).map(([s,o])=>`${s}: ${o}`)}),uh.addNewline()),i}var ma,lh,fh,Xi,Cv,Iv,uh,Nv,Yn,ya,Ea,Jn,hh,Zn,Wt,ga,dh,ph,Ki,mh,Et,Or,L,gt,re=q(()=>{"use strict";ma=require("child_process"),lh=require("crypto"),fh=require("fs"),Xi=require("path");rh();Cv=oh(),{machineIdSync:Iv}=ah(),{output:uh,workspaceRoot:Nv}=Y(),Yn=9999999,ya=process.env.NX_CLOUD_AGENT_TIMEOUT_MS?Number(process.env.NX_CLOUD_AGENT_TIMEOUT_MS):36e5,Ea=process.env.NX_CLOUD_ORCHESTRATOR_TIMEOUT_MS?Number(process.env.NX_CLOUD_ORCHESTRATOR_TIMEOUT_MS):36e5,Jn=1e3*1e3*1e4,hh=process.env.NX_CLOUD_UNLIMITED_OUTPUT==="true",Zn=1e3*1e3*300,Wt=166,ga=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT?Number(process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT):null,dh=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE!="false",ph=process.env.NX_CLOUD_FORCE_METRICS==="true",Ki=process.env.NX_CLOUD_NUMBER_OF_RETRIES?Number(process.env.NX_CLOUD_NUMBER_OF_RETRIES):th()?10:1,mh=process.env.NX_NO_CLOUD==="true";Dv()});function Ge(r){return new Promise(e=>{setTimeout(()=>e(null),r)})}var Zr=q(()=>{"use strict"});var _a=E((WN,_h)=>{"use strict";_h.exports=function(e,t){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(t,i)}}});var Fe=E((XN,Sh)=>{"use strict";var kv=_a(),Tr=Object.prototype.toString;function Sa(r){return Tr.call(r)==="[object Array]"}function ba(r){return typeof r>"u"}function Lv(r){return r!==null&&!ba(r)&&r.constructor!==null&&!ba(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Pv(r){return Tr.call(r)==="[object ArrayBuffer]"}function Uv(r){return typeof FormData<"u"&&r instanceof FormData}function Fv(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r.buffer instanceof ArrayBuffer,e}function Mv(r){return typeof r=="string"}function qv(r){return typeof r=="number"}function bh(r){return r!==null&&typeof r=="object"}function Zi(r){if(Tr.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function Bv(r){return Tr.call(r)==="[object Date]"}function jv(r){return Tr.call(r)==="[object File]"}function Gv(r){return Tr.call(r)==="[object Blob]"}function vh(r){return Tr.call(r)==="[object Function]"}function $v(r){return bh(r)&&vh(r.pipe)}function Hv(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}function zv(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Vv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function wa(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),Sa(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function va(){var r={};function e(i,s){Zi(r[s])&&Zi(i)?r[s]=va(r[s],i):Zi(i)?r[s]=va({},i):Sa(i)?r[s]=i.slice():r[s]=i}for(var t=0,n=arguments.length;t<n;t++)wa(arguments[t],e);return r}function Wv(r,e,t){return wa(e,function(i,s){t&&typeof i=="function"?r[s]=kv(i,t):r[s]=i}),r}function Xv(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}Sh.exports={isArray:Sa,isArrayBuffer:Pv,isBuffer:Lv,isFormData:Uv,isArrayBufferView:Fv,isString:Mv,isNumber:qv,isObject:bh,isPlainObject:Zi,isUndefined:ba,isDate:Bv,isFile:jv,isBlob:Gv,isFunction:vh,isStream:$v,isURLSearchParams:Hv,isStandardBrowserEnv:Vv,forEach:wa,merge:va,extend:Wv,trim:zv,stripBOM:Xv}});var Qi=E((KN,Rh)=>{"use strict";var Qr=Fe();function wh(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Rh.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(Qr.isURLSearchParams(t))i=t.toString();else{var s=[];Qr.forEach(t,function(c,l){c===null||typeof c>"u"||(Qr.isArray(c)?l=l+"[]":c=[c],Qr.forEach(c,function(f){Qr.isDate(f)?f=f.toISOString():Qr.isObject(f)&&(f=JSON.stringify(f)),s.push(wh(l)+"="+wh(f))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var Oh=E((YN,xh)=>{"use strict";var Kv=Fe();function es(){this.handlers=[]}es.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};es.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};es.prototype.forEach=function(e){Kv.forEach(this.handlers,function(n){n!==null&&e(n)})};xh.exports=es});var Ch=E((JN,Th)=>{"use strict";var Yv=Fe();Th.exports=function(e,t){Yv.forEach(e,function(i,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[s])})}});var ts=E((ZN,Ih)=>{"use strict";Ih.exports=function(e,t,n,i,s){return e.config=t,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var rs=E((QN,Nh)=>{"use strict";var Jv=ts();Nh.exports=function(e,t,n,i,s){var o=new Error(e);return Jv(o,t,n,i,s)}});var Ra=E((eA,Ah)=>{"use strict";var Zv=rs();Ah.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(Zv("Request failed with status code "+n.status,n.config,null,n.request,n))}});var kh=E((tA,Dh)=>{"use strict";var ns=Fe();Dh.exports=ns.isStandardBrowserEnv()?function(){return{write:function(t,n,i,s,o,a){var c=[];c.push(t+"="+encodeURIComponent(n)),ns.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),ns.isString(s)&&c.push("path="+s),ns.isString(o)&&c.push("domain="+o),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Ph=E((rA,Lh)=>{"use strict";Lh.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var Fh=E((nA,Uh)=>{"use strict";Uh.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var xa=E((iA,Mh)=>{"use strict";var Qv=Ph(),eS=Fh();Mh.exports=function(e,t){return e&&!Qv(t)?eS(e,t):t}});var Bh=E((sA,qh)=>{"use strict";var Oa=Fe(),tS=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];qh.exports=function(e){var t={},n,i,s;return e&&Oa.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),n=Oa.trim(a.substr(0,s)).toLowerCase(),i=Oa.trim(a.substr(s+1)),n){if(t[n]&&tS.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t}});var $h=E((oA,Gh)=>{"use strict";var jh=Fe();Gh.exports=jh.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(s){var o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(o){var a=jh.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var zh=E((aA,Hh)=>{"use strict";var is=Fe(),rS=Ra(),nS=kh(),iS=Qi(),sS=xa(),oS=Bh(),aS=$h(),Ta=rs();Hh.exports=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,a=e.responseType;is.isFormData(s)&&delete o["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(l+":"+u)}var f=sS(e.baseURL,e.url);c.open(e.method.toUpperCase(),iS(f,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function h(){if(c){var m="getAllResponseHeaders"in c?oS(c.getAllResponseHeaders()):null,b=!a||a==="text"||a==="json"?c.responseText:c.response,p={data:b,status:c.status,statusText:c.statusText,headers:m,config:e,request:c};rS(n,i,p),c=null}}if("onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(h)},c.onabort=function(){c&&(i(Ta("Request aborted",e,"ECONNABORTED",c)),c=null)},c.onerror=function(){i(Ta("Network Error",e,null,c)),c=null},c.ontimeout=function(){var b="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(b=e.timeoutErrorMessage),i(Ta(b,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},is.isStandardBrowserEnv()){var d=(e.withCredentials||aS(f))&&e.xsrfCookieName?nS.read(e.xsrfCookieName):void 0;d&&(o[e.xsrfHeaderName]=d)}"setRequestHeader"in c&&is.forEach(o,function(b,p){typeof s>"u"&&p.toLowerCase()==="content-type"?delete o[p]:c.setRequestHeader(p,b)}),is.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&a!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(b){c&&(c.abort(),i(b),c=null)}),s||(s=null),c.send(s)})}});var Wh=E((cA,Vh)=>{"use strict";var en=1e3,tn=en*60,rn=tn*60,Cr=rn*24,cS=Cr*7,uS=Cr*365.25;Vh.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return lS(r);if(t==="number"&&isFinite(r))return e.long?hS(r):fS(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function lS(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*uS;case"weeks":case"week":case"w":return t*cS;case"days":case"day":case"d":return t*Cr;case"hours":case"hour":case"hrs":case"hr":case"h":return t*rn;case"minutes":case"minute":case"mins":case"min":case"m":return t*tn;case"seconds":case"second":case"secs":case"sec":case"s":return t*en;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function fS(r){var e=Math.abs(r);return e>=Cr?Math.round(r/Cr)+"d":e>=rn?Math.round(r/rn)+"h":e>=tn?Math.round(r/tn)+"m":e>=en?Math.round(r/en)+"s":r+"ms"}function hS(r){var e=Math.abs(r);return e>=Cr?ss(r,e,Cr,"day"):e>=rn?ss(r,e,rn,"hour"):e>=tn?ss(r,e,tn,"minute"):e>=en?ss(r,e,en,"second"):r+" ms"}function ss(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Ca=E((uA,Xh)=>{"use strict";function dS(r){t.debug=t,t.default=t,t.coerce=c,t.disable=s,t.enable=i,t.enabled=o,t.humanize=Wh(),t.destroy=l,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let f=0;for(let h=0;h<u.length;h++)f=(f<<5)-f+u.charCodeAt(h),f|=0;return t.colors[Math.abs(f)%t.colors.length]}t.selectColor=e;function t(u){let f,h=null,d,m;function b(...p){if(!b.enabled)return;let w=b,k=Number(new Date),O=k-(f||k);w.diff=O,w.prev=f,w.curr=k,f=k,p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let C=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(T,z)=>{if(T==="%%")return"%";C++;let G=t.formatters[z];if(typeof G=="function"){let I=p[C];T=G.call(w,I),p.splice(C,1),C--}return T}),t.formatArgs.call(w,p),(w.log||t.log).apply(w,p)}return b.namespace=u,b.useColors=t.useColors(),b.color=t.selectColor(u),b.extend=n,b.destroy=t.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==t.namespaces&&(d=t.namespaces,m=t.enabled(u)),m),set:p=>{h=p}}),typeof t.init=="function"&&t.init(b),b}function n(u,f){let h=t(this.namespace+(typeof f>"u"?":":f)+u);return h.log=this.log,h}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let f,h=(typeof u=="string"?u:"").split(/[\s,]+/),d=h.length;for(f=0;f<d;f++)h[f]&&(u=h[f].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...t.names.map(a),...t.skips.map(a).map(f=>"-"+f)].join(",");return t.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,h;for(f=0,h=t.skips.length;f<h;f++)if(t.skips[f].test(u))return!1;for(f=0,h=t.names.length;f<h;f++)if(t.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Xh.exports=dS});var Kh=E((Ke,os)=>{"use strict";Ke.formatArgs=mS;Ke.save=yS;Ke.load=ES;Ke.useColors=pS;Ke.storage=gS();Ke.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ke.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function pS(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function mS(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+os.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Ke.log=console.debug||console.log||(()=>{});function yS(r){try{r?Ke.storage.setItem("debug",r):Ke.storage.removeItem("debug")}catch{}}function ES(){let r;try{r=Ke.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function gS(){try{return localStorage}catch{}}os.exports=Ca()(Ke);var{formatters:_S}=os.exports;_S.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Jh=E((lA,Yh)=>{"use strict";Yh.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var ed=E((fA,Qh)=>{"use strict";var bS=require("os"),Zh=require("tty"),rt=Jh(),{env:ye}=process,Xt;rt("no-color")||rt("no-colors")||rt("color=false")||rt("color=never")?Xt=0:(rt("color")||rt("colors")||rt("color=true")||rt("color=always"))&&(Xt=1);"FORCE_COLOR"in ye&&(ye.FORCE_COLOR==="true"?Xt=1:ye.FORCE_COLOR==="false"?Xt=0:Xt=ye.FORCE_COLOR.length===0?1:Math.min(parseInt(ye.FORCE_COLOR,10),3));function Ia(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function Na(r,e){if(Xt===0)return 0;if(rt("color=16m")||rt("color=full")||rt("color=truecolor"))return 3;if(rt("color=256"))return 2;if(r&&!e&&Xt===void 0)return 0;let t=Xt||0;if(ye.TERM==="dumb")return t;if(process.platform==="win32"){let n=bS.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in ye)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in ye)||ye.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in ye)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ye.TEAMCITY_VERSION)?1:0;if(ye.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ye){let n=parseInt((ye.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ye.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ye.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ye.TERM)||"COLORTERM"in ye?1:t}function vS(r){let e=Na(r,r&&r.isTTY);return Ia(e)}Qh.exports={supportsColor:vS,stdout:Ia(Na(!0,Zh.isatty(1))),stderr:Ia(Na(!0,Zh.isatty(2)))}});var rd=E((Se,cs)=>{"use strict";var SS=require("tty"),as=require("util");Se.init=IS;Se.log=OS;Se.formatArgs=RS;Se.save=TS;Se.load=CS;Se.useColors=wS;Se.destroy=as.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Se.colors=[6,2,3,4,5,1];try{let r=ed();r&&(r.stderr||r).level>=2&&(Se.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Se.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function wS(){return"colors"in Se.inspectOpts?!!Se.inspectOpts.colors:SS.isatty(process.stderr.fd)}function RS(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;r[0]=s+r[0].split(`
`).join(`
`+s),r.push(i+"m+"+cs.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=xS()+e+" "+r[0]}function xS(){return Se.inspectOpts.hideDate?"":new Date().toISOString()+" "}function OS(...r){return process.stderr.write(as.format(...r)+`
`)}function TS(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function CS(){return process.env.DEBUG}function IS(r){r.inspectOpts={};let e=Object.keys(Se.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=Se.inspectOpts[e[t]]}cs.exports=Ca()(Se);var{formatters:td}=cs.exports;td.o=function(r){return this.inspectOpts.colors=this.useColors,as.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};td.O=function(r){return this.inspectOpts.colors=this.useColors,as.inspect(r,this.inspectOpts)}});var nd=E((hA,Aa)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Aa.exports=Kh():Aa.exports=rd()});var sd=E((dA,id)=>{"use strict";var Qn;id.exports=function(){if(!Qn){try{Qn=nd()("follow-redirects")}catch{}typeof Qn!="function"&&(Qn=function(){})}Qn.apply(null,arguments)}});var qa=E((pA,Ma)=>{"use strict";var Ir=require("url"),Da=Ir.URL,NS=require("http"),AS=require("https"),La=require("stream").Writable,cd=require("assert"),ud=sd(),Pa=["abort","aborted","connect","error","socket","timeout"],Ua=Object.create(null);Pa.forEach(function(r){Ua[r]=function(e,t,n){this._redirectable.emit(r,e,t,n)}});var DS=ti("ERR_INVALID_URL","Invalid URL",TypeError),od=ti("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),kS=ti("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),LS=ti("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),PS=ti("ERR_STREAM_WRITE_AFTER_END","write after end"),US=La.prototype.destroy||fd;function $e(r,e){La.call(this),this._sanitizeOptions(r),this._options=r,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var t=this;this._onNativeResponse=function(n){t._processResponse(n)},this._performRequest()}$e.prototype=Object.create(La.prototype);$e.prototype.abort=function(){Fa(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};$e.prototype.destroy=function(r){return Fa(this._currentRequest,r),US.call(this,r),this};$e.prototype.write=function(r,e,t){if(this._ending)throw new PS;if(!Nr(r)&&!MS(r))throw new TypeError("data should be a string, Buffer or Uint8Array");if(ei(e)&&(t=e,e=null),r.length===0){t&&t();return}this._requestBodyLength+r.length<=this._options.maxBodyLength?(this._requestBodyLength+=r.length,this._requestBodyBuffers.push({data:r,encoding:e}),this._currentRequest.write(r,e,t)):(this.emit("error",new LS),this.abort())};$e.prototype.end=function(r,e,t){if(ei(r)?(t=r,r=e=null):ei(e)&&(t=e,e=null),!r)this._ended=this._ending=!0,this._currentRequest.end(null,null,t);else{var n=this,i=this._currentRequest;this.write(r,e,function(){n._ended=!0,i.end(null,null,t)}),this._ending=!0}};$e.prototype.setHeader=function(r,e){this._options.headers[r]=e,this._currentRequest.setHeader(r,e)};$e.prototype.removeHeader=function(r){delete this._options.headers[r],this._currentRequest.removeHeader(r)};$e.prototype.setTimeout=function(r,e){var t=this;function n(o){o.setTimeout(r),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.emit("timeout"),s()},r),n(o)}function s(){t._timeout&&(clearTimeout(t._timeout),t._timeout=null),t.removeListener("abort",s),t.removeListener("error",s),t.removeListener("response",s),t.removeListener("close",s),e&&t.removeListener("timeout",e),t.socket||t._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",s),this.on("error",s),this.on("response",s),this.on("close",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(r){$e.prototype[r]=function(e,t){return this._currentRequest[r](e,t)}});["aborted","connection","socket"].forEach(function(r){Object.defineProperty($e.prototype,r,{get:function(){return this._currentRequest[r]}})});$e.prototype._sanitizeOptions=function(r){if(r.headers||(r.headers={}),r.host&&(r.hostname||(r.hostname=r.host),delete r.host),!r.pathname&&r.path){var e=r.path.indexOf("?");e<0?r.pathname=r.path:(r.pathname=r.path.substring(0,e),r.search=r.path.substring(e))}};$e.prototype._performRequest=function(){var r=this._options.protocol,e=this._options.nativeProtocols[r];if(!e){this.emit("error",new TypeError("Unsupported protocol "+r));return}if(this._options.agents){var t=r.slice(0,-1);this._options.agent=this._options.agents[t]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of Pa)n.on(i,Ua[i]);if(this._currentUrl=/^\//.test(this._options.path)?Ir.format(this._options):this._options.path,this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function c(l){if(n===o._currentRequest)if(l)o.emit("error",l);else if(s<a.length){var u=a[s++];n.finished||n.write(u.data,u.encoding,c)}else o._ended&&n.end()})()}};$e.prototype._processResponse=function(r){var e=r.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:r.headers,statusCode:e});var t=r.headers.location;if(!t||this._options.followRedirects===!1||e<300||e>=400){r.responseUrl=this._currentUrl,r.redirects=this._redirects,this.emit("response",r),this._requestBodyBuffers=[];return}if(Fa(this._currentRequest),r.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new kS);return}var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:r.req.getHeader("host")},this._options.headers));var s=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],ka(/^content-/i,this._options.headers));var o=ka(/^host$/i,this._options.headers),a=Ir.parse(this._currentUrl),c=o||a.host,l=/^\w+:/.test(t)?this._currentUrl:Ir.format(Object.assign(a,{host:c})),u;try{u=Ir.resolve(l,t)}catch(m){this.emit("error",new od({cause:m}));return}ud("redirecting to",u),this._isRedirect=!0;var f=Ir.parse(u);if(Object.assign(this._options,f),(f.protocol!==a.protocol&&f.protocol!=="https:"||f.host!==c&&!FS(f.host,c))&&ka(/^(?:authorization|cookie)$/i,this._options.headers),ei(i)){var h={headers:r.headers,statusCode:e},d={url:l,method:s,headers:n};try{i(this._options,h,d)}catch(m){this.emit("error",m);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(m){this.emit("error",new od({cause:m}))}};function ld(r){var e={maxRedirects:21,maxBodyLength:10485760},t={};return Object.keys(r).forEach(function(n){var i=n+":",s=t[i]=r[n],o=e[n]=Object.create(s);function a(l,u,f){if(Nr(l)){var h;try{h=ad(new Da(l))}catch{h=Ir.parse(l)}if(!Nr(h.protocol))throw new DS({input:l});l=h}else Da&&l instanceof Da?l=ad(l):(f=u,u=l,l={protocol:i});return ei(u)&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=t,!Nr(u.host)&&!Nr(u.hostname)&&(u.hostname="::1"),cd.equal(u.protocol,i,"protocol mismatch"),ud("options",u),new $e(u,f)}function c(l,u,f){var h=o.request(l,u,f);return h.end(),h}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function fd(){}function ad(r){var e={protocol:r.protocol,hostname:r.hostname.startsWith("[")?r.hostname.slice(1,-1):r.hostname,hash:r.hash,search:r.search,pathname:r.pathname,path:r.pathname+r.search,href:r.href};return r.port!==""&&(e.port=Number(r.port)),e}function ka(r,e){var t;for(var n in e)r.test(n)&&(t=e[n],delete e[n]);return t===null||typeof t>"u"?void 0:String(t).trim()}function ti(r,e,t){function n(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=r,this.message=this.cause?e+": "+this.cause.message:e}return n.prototype=new(t||Error),n.prototype.constructor=n,n.prototype.name="Error ["+r+"]",n}function Fa(r,e){for(var t of Pa)r.removeListener(t,Ua[t]);r.on("error",fd),r.destroy(e)}function FS(r,e){cd(Nr(r)&&Nr(e));var t=r.length-e.length-1;return t>0&&r[t]==="."&&r.endsWith(e)}function Nr(r){return typeof r=="string"||r instanceof String}function ei(r){return typeof r=="function"}function MS(r){return typeof r=="object"&&"length"in r}Ma.exports=ld({http:NS,https:AS});Ma.exports.wrap=ld});var Ba=E((mA,qS)=>{qS.exports={name:"axios",version:"0.21.2",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var Ed=E((yA,yd)=>{"use strict";var ri=Fe(),hd=Ra(),BS=xa(),jS=Qi(),GS=require("http"),$S=require("https"),HS=qa().http,zS=qa().https,dd=require("url"),VS=require("zlib"),WS=Ba(),us=rs(),ja=ts(),pd=/https:?/;function md(r,e,t){if(r.hostname=e.host,r.host=e.host,r.port=e.port,r.path=t,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");r.headers["Proxy-Authorization"]="Basic "+n}r.beforeRedirect=function(s){s.headers.host=s.host,md(s,e,s.href)}}yd.exports=function(e){return new Promise(function(n,i){var s=function(U){n(U)},o=function(U){i(U)},a=e.data,c=e.headers;if("User-Agent"in c||"user-agent"in c?!c["User-Agent"]&&!c["user-agent"]&&(delete c["User-Agent"],delete c["user-agent"]):c["User-Agent"]="axios/"+WS.version,a&&!ri.isStream(a)){if(!Buffer.isBuffer(a))if(ri.isArrayBuffer(a))a=Buffer.from(new Uint8Array(a));else if(ri.isString(a))a=Buffer.from(a,"utf-8");else return o(us("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));c["Content-Length"]=a.length}var l=void 0;if(e.auth){var u=e.auth.username||"",f=e.auth.password||"";l=u+":"+f}var h=BS(e.baseURL,e.url),d=dd.parse(h),m=d.protocol||"http:";if(!l&&d.auth){var b=d.auth.split(":"),p=b[0]||"",w=b[1]||"";l=p+":"+w}l&&delete c.Authorization;var k=pd.test(m),O=k?e.httpsAgent:e.httpAgent,C={path:jS(d.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:c,agent:O,agents:{http:e.httpAgent,https:e.httpsAgent},auth:l};e.socketPath?C.socketPath=e.socketPath:(C.hostname=d.hostname,C.port=d.port);var P=e.proxy;if(!P&&P!==!1){var T=m.slice(0,-1)+"_proxy",z=process.env[T]||process.env[T.toUpperCase()];if(z){var G=dd.parse(z),I=process.env.no_proxy||process.env.NO_PROXY,N=!0;if(I){var j=I.split(",").map(function(U){return U.trim()});N=!j.some(function(U){return U?U==="*"||U[0]==="."&&d.hostname.substr(d.hostname.length-U.length)===U?!0:d.hostname===U:!1})}if(N&&(P={host:G.hostname,port:G.port,protocol:G.protocol},G.auth)){var X=G.auth.split(":");P.auth={username:X[0],password:X[1]}}}}P&&(C.headers.host=d.hostname+(d.port?":"+d.port:""),md(C,P,m+"//"+d.hostname+(d.port?":"+d.port:"")+C.path));var V,J=k&&(P?pd.test(P.protocol):!0);e.transport?V=e.transport:e.maxRedirects===0?V=J?$S:GS:(e.maxRedirects&&(C.maxRedirects=e.maxRedirects),V=J?zS:HS),e.maxBodyLength>-1&&(C.maxBodyLength=e.maxBodyLength);var B=V.request(C,function(U){if(!B.aborted){var H=U,le=U.req||B;if(U.statusCode!==204&&le.method!=="HEAD"&&e.decompress!==!1)switch(U.headers["content-encoding"]){case"gzip":case"compress":case"deflate":H=H.pipe(VS.createUnzip()),delete U.headers["content-encoding"];break}var Re={status:U.statusCode,statusText:U.statusMessage,headers:U.headers,config:e,request:le};if(e.responseType==="stream")Re.data=H,hd(s,o,Re);else{var R=[],A=0;H.on("data",function(W){R.push(W),A+=W.length,e.maxContentLength>-1&&A>e.maxContentLength&&(H.destroy(),o(us("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,le)))}),H.on("error",function(W){B.aborted||o(ja(W,e,null,le))}),H.on("end",function(){var W=Buffer.concat(R);e.responseType!=="arraybuffer"&&(W=W.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(W=ri.stripBOM(W))),Re.data=W,hd(s,o,Re)})}}});if(B.on("error",function(U){B.aborted&&U.code!=="ERR_FR_TOO_MANY_REDIRECTS"||o(ja(U,e,null,B))}),e.timeout){var K=parseInt(e.timeout,10);if(isNaN(K)){o(us("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",B));return}B.setTimeout(K,function(){B.abort(),o(us("timeout of "+K+"ms exceeded",e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",B))})}e.cancelToken&&e.cancelToken.promise.then(function(U){B.aborted||(B.abort(),o(U))}),ri.isStream(a)?a.on("error",function(U){o(ja(U,e,null,B))}).pipe(B):B.end(a)})}});var fs=E((EA,bd)=>{"use strict";var Me=Fe(),gd=Ch(),XS=ts(),KS={"Content-Type":"application/x-www-form-urlencoded"};function _d(r,e){!Me.isUndefined(r)&&Me.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function YS(){var r;return typeof XMLHttpRequest<"u"?r=zh():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(r=Ed()),r}var ls={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:YS(),transformRequest:[function(e,t){return gd(t,"Accept"),gd(t,"Content-Type"),Me.isFormData(e)||Me.isArrayBuffer(e)||Me.isBuffer(e)||Me.isStream(e)||Me.isFile(e)||Me.isBlob(e)?e:Me.isArrayBufferView(e)?e.buffer:Me.isURLSearchParams(e)?(_d(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Me.isObject(e)||t&&t["Content-Type"]==="application/json"?(_d(t,"application/json"),JSON.stringify(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Me.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?XS(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};ls.headers={common:{Accept:"application/json, text/plain, */*"}};Me.forEach(["delete","get","head"],function(e){ls.headers[e]={}});Me.forEach(["post","put","patch"],function(e){ls.headers[e]=Me.merge(KS)});bd.exports=ls});var Sd=E((gA,vd)=>{"use strict";var JS=Fe(),ZS=fs();vd.exports=function(e,t,n){var i=this||ZS;return JS.forEach(n,function(o){e=o.call(i,e,t)}),e}});var Ga=E((_A,wd)=>{"use strict";wd.exports=function(e){return!!(e&&e.__CANCEL__)}});var Od=E((bA,xd)=>{"use strict";var Rd=Fe(),$a=Sd(),QS=Ga(),ew=fs();function Ha(r){r.cancelToken&&r.cancelToken.throwIfRequested()}xd.exports=function(e){Ha(e),e.headers=e.headers||{},e.data=$a.call(e,e.data,e.headers,e.transformRequest),e.headers=Rd.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Rd.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||ew.adapter;return t(e).then(function(i){return Ha(e),i.data=$a.call(e,i.data,i.headers,e.transformResponse),i},function(i){return QS(i)||(Ha(e),i&&i.response&&(i.response.data=$a.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var za=E((vA,Td)=>{"use strict";var Oe=Fe();Td.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(h,d){return Oe.isPlainObject(h)&&Oe.isPlainObject(d)?Oe.merge(h,d):Oe.isPlainObject(d)?Oe.merge({},d):Oe.isArray(d)?d.slice():d}function l(h){Oe.isUndefined(t[h])?Oe.isUndefined(e[h])||(n[h]=c(void 0,e[h])):n[h]=c(e[h],t[h])}Oe.forEach(i,function(d){Oe.isUndefined(t[d])||(n[d]=c(void 0,t[d]))}),Oe.forEach(s,l),Oe.forEach(o,function(d){Oe.isUndefined(t[d])?Oe.isUndefined(e[d])||(n[d]=c(void 0,e[d])):n[d]=c(void 0,t[d])}),Oe.forEach(a,function(d){d in t?n[d]=c(e[d],t[d]):d in e&&(n[d]=c(void 0,e[d]))});var u=i.concat(s).concat(o).concat(a),f=Object.keys(e).concat(Object.keys(t)).filter(function(d){return u.indexOf(d)===-1});return Oe.forEach(f,l),n}});var Dd=E((SA,Ad)=>{"use strict";var Id=Ba(),Va={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){Va[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var Cd={},tw=Id.version.split(".");function Nd(r,e){for(var t=e?e.split("."):tw,n=r.split("."),i=0;i<3;i++){if(t[i]>n[i])return!0;if(t[i]<n[i])return!1}return!1}Va.transitional=function(e,t,n){var i=t&&Nd(t);function s(o,a){return"[Axios v"+Id.version+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return function(o,a,c){if(e===!1)throw new Error(s(a," has been removed in "+t));return i&&!Cd[a]&&(Cd[a]=!0,console.warn(s(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,c):!0}};function rw(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=r[s],c=a===void 0||o(a,s,r);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(t!==!0)throw Error("Unknown option "+s)}}Ad.exports={isOlderVersion:Nd,assertOptions:rw,validators:Va}});var Md=E((wA,Fd)=>{"use strict";var Pd=Fe(),nw=Qi(),kd=Oh(),Ld=Od(),hs=za(),Ud=Dd(),nn=Ud.validators;function ni(r){this.defaults=r,this.interceptors={request:new kd,response:new kd}}ni.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=hs(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&Ud.assertOptions(t,{silentJSONParsing:nn.transitional(nn.boolean,"1.0.0"),forcedJSONParsing:nn.transitional(nn.boolean,"1.0.0"),clarifyTimeoutError:nn.transitional(nn.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(e)===!1||(i=i&&h.synchronous,n.unshift(h.fulfilled,h.rejected))});var s=[];this.interceptors.response.forEach(function(h){s.push(h.fulfilled,h.rejected)});var o;if(!i){var a=[Ld,void 0];for(Array.prototype.unshift.apply(a,n),a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var c=e;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(f){u(f);break}}try{o=Ld(c)}catch(f){return Promise.reject(f)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};ni.prototype.getUri=function(e){return e=hs(this.defaults,e),nw(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Pd.forEach(["delete","get","head","options"],function(e){ni.prototype[e]=function(t,n){return this.request(hs(n||{},{method:e,url:t,data:(n||{}).data}))}});Pd.forEach(["post","put","patch"],function(e){ni.prototype[e]=function(t,n,i){return this.request(hs(i||{},{method:e,url:t,data:n}))}});Fd.exports=ni});var Xa=E((RA,qd)=>{"use strict";function Wa(r){this.message=r}Wa.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Wa.prototype.__CANCEL__=!0;qd.exports=Wa});var jd=E((xA,Bd)=>{"use strict";var iw=Xa();function ds(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;r(function(i){t.reason||(t.reason=new iw(i),e(t.reason))})}ds.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};ds.source=function(){var e,t=new ds(function(i){e=i});return{token:t,cancel:e}};Bd.exports=ds});var $d=E((OA,Gd)=>{"use strict";Gd.exports=function(e){return function(n){return e.apply(null,n)}}});var zd=E((TA,Hd)=>{"use strict";Hd.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var Xd=E((CA,Ka)=>{"use strict";var Vd=Fe(),sw=_a(),ps=Md(),ow=za(),aw=fs();function Wd(r){var e=new ps(r),t=sw(ps.prototype.request,e);return Vd.extend(t,ps.prototype,e),Vd.extend(t,e),t}var lt=Wd(aw);lt.Axios=ps;lt.create=function(e){return Wd(ow(lt.defaults,e))};lt.Cancel=Xa();lt.CancelToken=jd();lt.isCancel=Ga();lt.all=function(e){return Promise.all(e)};lt.spread=$d();lt.isAxiosError=zd();Ka.exports=lt;Ka.exports.default=lt});var Ya=E((IA,Kd)=>{"use strict";Kd.exports=Xd()});function Te(r,e=1e4){let t=s=>s,n=process.env.NX_CLOUD_API||r.url||"https://cloud.nx.app",i=Et?Et:r.accessToken;if(!i)throw new Error("Unable to authenticate. Either define accessToken in nx.json or set the NX_CLOUD_ACCESS_TOKEN env variable.");if(r.customProxyConfigPath){let{nxCloudProxyConfig:s}=require((0,Yd.join)(process.cwd(),r.customProxyConfigPath));t=s??t}return cw.create(t({baseURL:n,timeout:gt?Yn:e,headers:{authorization:i,"Nx-Cloud-Client-Version":r.clientVersion||"unknown"}}))}async function Qa(r,e){let t=new Date,n=await e();return L&&console.log(`${r}: ${new Date().getTime()-t.getTime()}`),n}async function ce(r,e=Ki){try{return await r()}catch(t){let n=t.response&&t.response.status||t.code;(n===401||n===403)&&(e=0);let i=t.response?t.response.data.message?t.response.data.message:t.response.data:t.message;if(e===0)throw typeof i!="string"&&(i=t.message),L&&Ja.note({title:`Connection to Nx Cloud failed with status code ${n}`,bodyLines:[`${n}: ${i}`]}),new Za("failure",uw(n),t);if(n==429){if(!ms){let s=1e4+(Ki+1-e)*6e4*Math.random();Ja.note({title:`Received Code ${n}. ${i} Retrying in ${s}ms.`}),ms=Ge(s)}await ms,ms=null}else{let s=1e3+(Ki+1-e)*4e3*Math.random();L&&Ja.note({title:`Received Code ${n}. Retrying in ${s}ms.`}),await Ge(s)}return ce(r,e-1)}}function uw(r){let e=`${r}:`;switch(r){case 403:return`${e} Access to resource is not authorized.`;case 404:return`${e} Cannot find requested resource.`;case 500:return`${e} Unexpected server error.`;case"ECONNABORTED":case"ETIMEOUT":return`${e} Connection timed out, check for other network problems.`;case"ECONNRESET":return`${e} The connection to Nx Cloud was closed suddenly.`;case"ECONNREFUSED":return`${e} Cannot connect to server. Please check that you have the correct server address and port number.`;case"ENOTFOUND":return`${e} DNS error due to invalid host. Are you accessing Nx Cloud from a network proxy?`;case"SELF_SIGNED_CERT_IN_CHAIN":return`${e} Found a self-signed cert in certificate chain. Ensure you have verified trust for all certs in your network.`;default:return`${e} Unable to connect to Nx Cloud.`}}var Yd,Ja,cw,Za,ms,_t=q(()=>{"use strict";Yd=require("path");re();Zr();({output:Ja}=Y()),cw=Ya(),Za=class{constructor(e,t,n){this.type=e;this.message=t;this.axiosException=n}};ms=null});function Kt(r){lw()?(process.stdout.write(`   ${ec(r)}`),bt.addNewline(),bt.addNewline()):fw()?(bt.addNewline(),process.stdout.write(`${ec(r)}`),bt.addNewline(),bt.addNewline()):(process.stdout.write(`  ${ec(r)}`),bt.addNewline(),bt.addNewline())}function lw(){try{return ie("nx/src/tasks-runner/life-cycles/dynamic-run-many-terminal-output-life-cycle"),!0}catch{try{return ie("@nrwl/workspace/src/tasks-runner/life-cycles/dynamic-run-many-terminal-output-life-cycle"),!0}catch{return!1}}}function ec(r){let e;if(typeof bt.dim=="function")return bt.dim(r);try{return bt.colors.gray(r)}catch{return r}}function fw(){return process.argv.indexOf("run-many")===-1&&process.argv.indexOf("affected")===-1}var bt,ii=q(()=>{"use strict";Rr();({output:bt}=Y())});var tc,Jd,Ce,ne,Ie,hw,dw,sn,kt=q(()=>{"use strict";tc=require("perf_hooks");_t();re();ii();Jd=[],Ce=r=>{let e=tc.performance.now();return{recordMetric:n=>{let i=tc.performance.now();n.durationMs=i-e,n.entryType=r,Jd.push(n)}}},ne=r=>{var e;return{success:((e=r==null?void 0:r.status)==null?void 0:e.toString().startsWith("2"))??!1,statusCode:(r==null?void 0:r.status)??-1}},Ie={success:!1,statusCode:-1},hw=.1,dw=.01,sn=r=>{let e;me()?e=hw:e=dw;try{return ph||Math.random()<e?(L&&Kt("Submitting runner metrics for this run."),Te(r).post("/nx-cloud/save-metrics",{entries:Jd}).catch(n=>{})):Promise.resolve()}catch{}}});function ys(r){return r[r.length-1]==="/"?r.substr(0,r.length-1):r}var rc=q(()=>{"use strict"});var pw,Yt,Es=q(()=>{"use strict";_t();({output:pw}=Y()),Yt=class{constructor(e){this.apiAxiosInstance=Te(e)}async reportError(e){try{await ce(()=>this.apiAxiosInstance.post("/nx-cloud/report-client-error",{message:e}))}catch(t){pw.warn({title:`Unable to record the following error: '${e}'`,bodyLines:[t.message]})}}}});var an,on,Jt,gs=q(()=>{"use strict";an=require("crypto"),on=require("fs"),Jt=class{constructor(e){e&&(this.encryptionKey=this.to32bytes(e))}to32bytes(e){let t=e;for(;t.length<32;)t+=e;return Buffer.from(t).slice(0,32)}hasEncryption(){return!!this.encryptionKey}encryptFile(e){let t=(0,an.randomBytes)(16),n=(0,an.createCipheriv)("aes-256-cbc",this.encryptionKey,t),i=(0,on.readFileSync)(e),s=n.update(i),o=Buffer.concat([t,s,n.final()]);(0,on.writeFileSync)(e,o)}decryptFile(e){let t=(0,on.readFileSync)(e);try{let n=(0,an.createDecipheriv)("aes-256-cbc",this.encryptionKey,t.slice(0,16)),i=t.slice(16),s=n.update(i),o=Buffer.concat([s,n.final()]);(0,on.writeFileSync)(e,o)}catch{throw new Error("Could not decrypt the artifact. Please check your encryption key.")}}}});var cn=E(($A,Qd)=>{"use strict";var Zd=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);Qd.exports=r=>r?Object.keys(r).map(e=>[Zd.has(e)?Zd.get(e):e,r[e]]).reduce((e,t)=>(e[t[0]]=t[1],e),Object.create(null)):{}});var ln=E((HA,cp)=>{"use strict";var ep=typeof process=="object"&&process?process:{stdout:null,stderr:null},mw=require("events"),tp=require("stream"),rp=require("string_decoder").StringDecoder,Lt=Symbol("EOF"),Pt=Symbol("maybeEmitEnd"),Zt=Symbol("emittedEnd"),_s=Symbol("emittingEnd"),si=Symbol("emittedError"),bs=Symbol("closed"),np=Symbol("read"),vs=Symbol("flush"),ip=Symbol("flushChunk"),He=Symbol("encoding"),Ut=Symbol("decoder"),Ss=Symbol("flowing"),oi=Symbol("paused"),un=Symbol("resume"),Ee=Symbol("bufferLength"),nc=Symbol("bufferPush"),ic=Symbol("bufferShift"),Ne=Symbol("objectMode"),Ae=Symbol("destroyed"),sc=Symbol("emitData"),sp=Symbol("emitEnd"),oc=Symbol("emitEnd2"),Ft=Symbol("async"),ai=r=>Promise.resolve().then(r),op=global._MP_NO_ITERATOR_SYMBOLS_!=="1",yw=op&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Ew=op&&Symbol.iterator||Symbol("iterator not implemented"),gw=r=>r==="end"||r==="finish"||r==="prefinish",_w=r=>r instanceof ArrayBuffer||typeof r=="object"&&r.constructor&&r.constructor.name==="ArrayBuffer"&&r.byteLength>=0,bw=r=>!Buffer.isBuffer(r)&&ArrayBuffer.isView(r),ws=class{constructor(e,t,n){this.src=e,this.dest=t,this.opts=n,this.ondrain=()=>e[un](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},ac=class extends ws{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,n){super(e,t,n),this.proxyErrors=i=>t.emit("error",i),e.on("error",this.proxyErrors)}};cp.exports=class ap extends tp{constructor(e){super(),this[Ss]=!1,this[oi]=!1,this.pipes=[],this.buffer=[],this[Ne]=e&&e.objectMode||!1,this[Ne]?this[He]=null:this[He]=e&&e.encoding||null,this[He]==="buffer"&&(this[He]=null),this[Ft]=e&&!!e.async||!1,this[Ut]=this[He]?new rp(this[He]):null,this[Lt]=!1,this[Zt]=!1,this[_s]=!1,this[bs]=!1,this[si]=null,this.writable=!0,this.readable=!0,this[Ee]=0,this[Ae]=!1}get bufferLength(){return this[Ee]}get encoding(){return this[He]}set encoding(e){if(this[Ne])throw new Error("cannot set encoding in objectMode");if(this[He]&&e!==this[He]&&(this[Ut]&&this[Ut].lastNeed||this[Ee]))throw new Error("cannot change encoding");this[He]!==e&&(this[Ut]=e?new rp(e):null,this.buffer.length&&(this.buffer=this.buffer.map(t=>this[Ut].write(t)))),this[He]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Ne]}set objectMode(e){this[Ne]=this[Ne]||!!e}get async(){return this[Ft]}set async(e){this[Ft]=this[Ft]||!!e}write(e,t,n){if(this[Lt])throw new Error("write after end");if(this[Ae])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(n=t,t="utf8"),t||(t="utf8");let i=this[Ft]?ai:s=>s();return!this[Ne]&&!Buffer.isBuffer(e)&&(bw(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):_w(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Ne]?(this.flowing&&this[Ee]!==0&&this[vs](!0),this.flowing?this.emit("data",e):this[nc](e),this[Ee]!==0&&this.emit("readable"),n&&i(n),this.flowing):e.length?(typeof e=="string"&&!(t===this[He]&&!this[Ut].lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[He]&&(e=this[Ut].write(e)),this.flowing&&this[Ee]!==0&&this[vs](!0),this.flowing?this.emit("data",e):this[nc](e),this[Ee]!==0&&this.emit("readable"),n&&i(n),this.flowing):(this[Ee]!==0&&this.emit("readable"),n&&i(n),this.flowing)}read(e){if(this[Ae])return null;if(this[Ee]===0||e===0||e>this[Ee])return this[Pt](),null;this[Ne]&&(e=null),this.buffer.length>1&&!this[Ne]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[Ee])]);let t=this[np](e||null,this.buffer[0]);return this[Pt](),t}[np](e,t){return e===t.length||e===null?this[ic]():(this.buffer[0]=t.slice(e),t=t.slice(0,e),this[Ee]-=e),this.emit("data",t),!this.buffer.length&&!this[Lt]&&this.emit("drain"),t}end(e,t,n){return typeof e=="function"&&(n=e,e=null),typeof t=="function"&&(n=t,t="utf8"),e&&this.write(e,t),n&&this.once("end",n),this[Lt]=!0,this.writable=!1,(this.flowing||!this[oi])&&this[Pt](),this}[un](){this[Ae]||(this[oi]=!1,this[Ss]=!0,this.emit("resume"),this.buffer.length?this[vs]():this[Lt]?this[Pt]():this.emit("drain"))}resume(){return this[un]()}pause(){this[Ss]=!1,this[oi]=!0}get destroyed(){return this[Ae]}get flowing(){return this[Ss]}get paused(){return this[oi]}[nc](e){this[Ne]?this[Ee]+=1:this[Ee]+=e.length,this.buffer.push(e)}[ic](){return this.buffer.length&&(this[Ne]?this[Ee]-=1:this[Ee]-=this.buffer[0].length),this.buffer.shift()}[vs](e){do;while(this[ip](this[ic]()));!e&&!this.buffer.length&&!this[Lt]&&this.emit("drain")}[ip](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,t){if(this[Ae])return;let n=this[Zt];return t=t||{},e===ep.stdout||e===ep.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,n?t.end&&e.end():(this.pipes.push(t.proxyErrors?new ac(this,e,t):new ws(this,e,t)),this[Ft]?ai(()=>this[un]()):this[un]()),e}unpipe(e){let t=this.pipes.find(n=>n.dest===e);t&&(this.pipes.splice(this.pipes.indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let n=super.on(e,t);return e==="data"&&!this.pipes.length&&!this.flowing?this[un]():e==="readable"&&this[Ee]!==0?super.emit("readable"):gw(e)&&this[Zt]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[si]&&(this[Ft]?ai(()=>t.call(this,this[si])):t.call(this,this[si])),n}get emittedEnd(){return this[Zt]}[Pt](){!this[_s]&&!this[Zt]&&!this[Ae]&&this.buffer.length===0&&this[Lt]&&(this[_s]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[bs]&&this.emit("close"),this[_s]=!1)}emit(e,t,...n){if(e!=="error"&&e!=="close"&&e!==Ae&&this[Ae])return;if(e==="data")return t?this[Ft]?ai(()=>this[sc](t)):this[sc](t):!1;if(e==="end")return this[sp]();if(e==="close"){if(this[bs]=!0,!this[Zt]&&!this[Ae])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[si]=t;let s=super.emit("error",t);return this[Pt](),s}else if(e==="resume"){let s=super.emit("resume");return this[Pt](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,t,...n);return this[Pt](),i}[sc](e){for(let n of this.pipes)n.dest.write(e)===!1&&this.pause();let t=super.emit("data",e);return this[Pt](),t}[sp](){this[Zt]||(this[Zt]=!0,this.readable=!1,this[Ft]?ai(()=>this[oc]()):this[oc]())}[oc](){if(this[Ut]){let t=this[Ut].end();if(t){for(let n of this.pipes)n.dest.write(t);super.emit("data",t)}}for(let t of this.pipes)t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Ne]||(e.dataLength=0);let t=this.promise();return this.on("data",n=>{e.push(n),this[Ne]||(e.dataLength+=n.length)}),t.then(()=>e)}concat(){return this[Ne]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Ne]?Promise.reject(new Error("cannot concat in objectMode")):this[He]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,t)=>{this.on(Ae,()=>t(new Error("stream destroyed"))),this.on("error",n=>t(n)),this.on("end",()=>e())})}[yw](){return{next:()=>{let t=this.read();if(t!==null)return Promise.resolve({done:!1,value:t});if(this[Lt])return Promise.resolve({done:!0});let n=null,i=null,s=l=>{this.removeListener("data",o),this.removeListener("end",a),i(l)},o=l=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[Lt]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),n({done:!0})},c=()=>s(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,n=l,this.once(Ae,c),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[Ew](){return{next:()=>{let t=this.read();return{value:t,done:t===null}}}}destroy(e){return this[Ae]?(e?this.emit("error",e):this.emit(Ae),this):(this[Ae]=!0,this.buffer.length=0,this[Ee]=0,typeof this.close=="function"&&!this[bs]&&this.close(),e?this.emit("error",e):this.emit(Ae),this)}static isStream(e){return!!e&&(e instanceof ap||e instanceof tp||e instanceof mw&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var lp=E((zA,up)=>{"use strict";var vw=require("zlib").constants||{ZLIB_VERNUM:4736};up.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},vw))});var wc=E(Ye=>{"use strict";var hc=require("assert"),Qt=require("buffer").Buffer,dp=require("zlib"),Ar=Ye.constants=lp(),Sw=ln(),fp=Qt.concat,Dr=Symbol("_superWrite"),hn=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},ww=Symbol("opts"),ci=Symbol("flushFlag"),hp=Symbol("finishFlushFlag"),Sc=Symbol("fullFlushFlag"),se=Symbol("handle"),Rs=Symbol("onError"),fn=Symbol("sawError"),cc=Symbol("level"),uc=Symbol("strategy"),lc=Symbol("ended"),VA=Symbol("_defaultFullFlush"),xs=class extends Sw{constructor(e,t){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[fn]=!1,this[lc]=!1,this[ww]=e,this[ci]=e.flush,this[hp]=e.finishFlush;try{this[se]=new dp[t](e)}catch(n){throw new hn(n)}this[Rs]=n=>{this[fn]||(this[fn]=!0,this.close(),this.emit("error",n))},this[se].on("error",n=>this[Rs](new hn(n))),this.once("end",()=>this.close)}close(){this[se]&&(this[se].close(),this[se]=null,this.emit("close"))}reset(){if(!this[fn])return hc(this[se],"zlib binding closed"),this[se].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[Sc]),this.write(Object.assign(Qt.alloc(0),{[ci]:e})))}end(e,t,n){return e&&this.write(e,t),this.flush(this[hp]),this[lc]=!0,super.end(null,null,n)}get ended(){return this[lc]}write(e,t,n){if(typeof t=="function"&&(n=t,t="utf8"),typeof e=="string"&&(e=Qt.from(e,t)),this[fn])return;hc(this[se],"zlib binding closed");let i=this[se]._handle,s=i.close;i.close=()=>{};let o=this[se].close;this[se].close=()=>{},Qt.concat=l=>l;let a;try{let l=typeof e[ci]=="number"?e[ci]:this[ci];a=this[se]._processChunk(e,l),Qt.concat=fp}catch(l){Qt.concat=fp,this[Rs](new hn(l))}finally{this[se]&&(this[se]._handle=i,i.close=s,this[se].close=o,this[se].removeAllListeners("error"))}this[se]&&this[se].on("error",l=>this[Rs](new hn(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[Dr](Qt.from(a[0]));for(let l=1;l<a.length;l++)c=this[Dr](a[l])}else c=this[Dr](Qt.from(a));return n&&n(),c}[Dr](e){return super.write(e)}},Mt=class extends xs{constructor(e,t){e=e||{},e.flush=e.flush||Ar.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Ar.Z_FINISH,super(e,t),this[Sc]=Ar.Z_FULL_FLUSH,this[cc]=e.level,this[uc]=e.strategy}params(e,t){if(!this[fn]){if(!this[se])throw new Error("cannot switch params when binding is closed");if(!this[se].params)throw new Error("not supported in this implementation");if(this[cc]!==e||this[uc]!==t){this.flush(Ar.Z_SYNC_FLUSH),hc(this[se],"zlib binding closed");let n=this[se].flush;this[se].flush=(i,s)=>{this.flush(i),s()};try{this[se].params(e,t)}finally{this[se].flush=n}this[se]&&(this[cc]=e,this[uc]=t)}}}},dc=class extends Mt{constructor(e){super(e,"Deflate")}},pc=class extends Mt{constructor(e){super(e,"Inflate")}},fc=Symbol("_portable"),mc=class extends Mt{constructor(e){super(e,"Gzip"),this[fc]=e&&!!e.portable}[Dr](e){return this[fc]?(this[fc]=!1,e[9]=255,super[Dr](e)):super[Dr](e)}},yc=class extends Mt{constructor(e){super(e,"Gunzip")}},Ec=class extends Mt{constructor(e){super(e,"DeflateRaw")}},gc=class extends Mt{constructor(e){super(e,"InflateRaw")}},_c=class extends Mt{constructor(e){super(e,"Unzip")}},Os=class extends xs{constructor(e,t){e=e||{},e.flush=e.flush||Ar.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Ar.BROTLI_OPERATION_FINISH,super(e,t),this[Sc]=Ar.BROTLI_OPERATION_FLUSH}},bc=class extends Os{constructor(e){super(e,"BrotliCompress")}},vc=class extends Os{constructor(e){super(e,"BrotliDecompress")}};Ye.Deflate=dc;Ye.Inflate=pc;Ye.Gzip=mc;Ye.Gunzip=yc;Ye.DeflateRaw=Ec;Ye.InflateRaw=gc;Ye.Unzip=_c;typeof dp.BrotliCompress=="function"?(Ye.BrotliCompress=bc,Ye.BrotliDecompress=vc):Ye.BrotliCompress=Ye.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var dn=E((KA,pp)=>{"use strict";var Rw=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;pp.exports=Rw!=="win32"?r=>r:r=>r&&r.replace(/\\/g,"/")});var Ts=E((JA,mp)=>{"use strict";var xw=ln(),Rc=dn(),xc=Symbol("slurp");mp.exports=class extends xw{constructor(e,t,n){switch(super(),this.pause(),this.extended=t,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Rc(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=Rc(e.linkpath),this.uname=e.uname,this.gname=e.gname,t&&this[xc](t),n&&this[xc](n,!0)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-t),this.blockRemain=Math.max(0,i-t),this.ignore?!0:n>=t?super.write(e):super.write(e.slice(0,n))}[xc](e,t){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(t&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?Rc(e[n]):e[n])}}});var Oc=E(Cs=>{"use strict";Cs.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Cs.code=new Map(Array.from(Cs.name).map(r=>[r[1],r[0]]))});var _p=E((QA,gp)=>{"use strict";var Ow=(r,e)=>{if(Number.isSafeInteger(r))r<0?Cw(r,e):Tw(r,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},Tw=(r,e)=>{e[0]=128;for(var t=e.length;t>1;t--)e[t-1]=r&255,r=Math.floor(r/256)},Cw=(r,e)=>{e[0]=255;var t=!1;r=r*-1;for(var n=e.length;n>1;n--){var i=r&255;r=Math.floor(r/256),t?e[n-1]=yp(i):i===0?e[n-1]=0:(t=!0,e[n-1]=Ep(i))}},Iw=r=>{let e=r[0],t=e===128?Aw(r.slice(1,r.length)):e===255?Nw(r):null;if(t===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(t))throw Error("parsed number outside of javascript safe integer range");return t},Nw=r=>{for(var e=r.length,t=0,n=!1,i=e-1;i>-1;i--){var s=r[i],o;n?o=yp(s):s===0?o=s:(n=!0,o=Ep(s)),o!==0&&(t-=o*Math.pow(256,e-i-1))}return t},Aw=r=>{for(var e=r.length,t=0,n=e-1;n>-1;n--){var i=r[n];i!==0&&(t+=i*Math.pow(256,e-n-1))}return t},yp=r=>(255^r)&255,Ep=r=>(255^r)+1&255;gp.exports={encode:Ow,parse:Iw}});var mn=E((eD,vp)=>{"use strict";var Tc=Oc(),pn=require("path").posix,bp=_p(),Cc=Symbol("slurp"),Je=Symbol("type"),Ac=class{constructor(e,t,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Je]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,t||0,n,i):e&&this.set(e)}decode(e,t,n,i){if(t||(t=0),!e||!(e.length>=t+512))throw new Error("need 512 bytes for header");if(this.path=kr(e,t,100),this.mode=er(e,t+100,8),this.uid=er(e,t+108,8),this.gid=er(e,t+116,8),this.size=er(e,t+124,12),this.mtime=Ic(e,t+136,12),this.cksum=er(e,t+148,12),this[Cc](n),this[Cc](i,!0),this[Je]=kr(e,t+156,1),this[Je]===""&&(this[Je]="0"),this[Je]==="0"&&this.path.substr(-1)==="/"&&(this[Je]="5"),this[Je]==="5"&&(this.size=0),this.linkpath=kr(e,t+157,100),e.slice(t+257,t+265).toString()==="ustar\x0000")if(this.uname=kr(e,t+265,32),this.gname=kr(e,t+297,32),this.devmaj=er(e,t+329,8),this.devmin=er(e,t+337,8),e[t+475]!==0){let o=kr(e,t+345,155);this.path=o+"/"+this.path}else{let o=kr(e,t+345,130);o&&(this.path=o+"/"+this.path),this.atime=Ic(e,t+476,12),this.ctime=Ic(e,t+488,12)}let s=8*32;for(let o=t;o<t+148;o++)s+=e[o];for(let o=t+156;o<t+512;o++)s+=e[o];this.cksumValid=s===this.cksum,this.cksum===null&&s===8*32&&(this.nullBlock=!0)}[Cc](e,t){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(t&&n==="path")&&(this[n]=e[n])}encode(e,t){if(e||(e=this.block=Buffer.alloc(512),t=0),t||(t=0),!(e.length>=t+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=Dw(this.path||"",n),s=i[0],o=i[1];this.needPax=i[2],this.needPax=Lr(e,t,100,s)||this.needPax,this.needPax=tr(e,t+100,8,this.mode)||this.needPax,this.needPax=tr(e,t+108,8,this.uid)||this.needPax,this.needPax=tr(e,t+116,8,this.gid)||this.needPax,this.needPax=tr(e,t+124,12,this.size)||this.needPax,this.needPax=Nc(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this[Je].charCodeAt(0),this.needPax=Lr(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=Lr(e,t+265,32,this.uname)||this.needPax,this.needPax=Lr(e,t+297,32,this.gname)||this.needPax,this.needPax=tr(e,t+329,8,this.devmaj)||this.needPax,this.needPax=tr(e,t+337,8,this.devmin)||this.needPax,this.needPax=Lr(e,t+345,n,o)||this.needPax,e[t+475]!==0?this.needPax=Lr(e,t+345,155,o)||this.needPax:(this.needPax=Lr(e,t+345,130,o)||this.needPax,this.needPax=Nc(e,t+476,12,this.atime)||this.needPax,this.needPax=Nc(e,t+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=t;c<t+148;c++)a+=e[c];for(let c=t+156;c<t+512;c++)a+=e[c];return this.cksum=a,tr(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let t in e)e[t]!==null&&e[t]!==void 0&&(this[t]=e[t])}get type(){return Tc.name.get(this[Je])||this[Je]}get typeKey(){return this[Je]}set type(e){Tc.code.has(e)?this[Je]=Tc.code.get(e):this[Je]=e}},Dw=(r,e)=>{let n=r,i="",s,o=pn.parse(r).root||".";if(Buffer.byteLength(n)<100)s=[n,i,!1];else{i=pn.dirname(n),n=pn.basename(n);do Buffer.byteLength(n)<=100&&Buffer.byteLength(i)<=e?s=[n,i,!1]:Buffer.byteLength(n)>100&&Buffer.byteLength(i)<=e?s=[n.substr(0,99),i,!0]:(n=pn.join(pn.basename(i),n),i=pn.dirname(i));while(i!==o&&!s);s||(s=[r.substr(0,99),"",!0])}return s},kr=(r,e,t)=>r.slice(e,e+t).toString("utf8").replace(/\0.*/,""),Ic=(r,e,t)=>kw(er(r,e,t)),kw=r=>r===null?null:new Date(r*1e3),er=(r,e,t)=>r[e]&128?bp.parse(r.slice(e,e+t)):Pw(r,e,t),Lw=r=>isNaN(r)?null:r,Pw=(r,e,t)=>Lw(parseInt(r.slice(e,e+t).toString("utf8").replace(/\0.*$/,"").trim(),8)),Uw={12:8589934591,8:2097151},tr=(r,e,t,n)=>n===null?!1:n>Uw[t]||n<0?(bp.encode(n,r.slice(e,e+t)),!0):(Fw(r,e,t,n),!1),Fw=(r,e,t,n)=>r.write(Mw(n,t),e,t,"ascii"),Mw=(r,e)=>qw(Math.floor(r).toString(8),e),qw=(r,e)=>(r.length===e-1?r:new Array(e-r.length-1).join("0")+r+" ")+"\0",Nc=(r,e,t,n)=>n===null?!1:tr(r,e,t,n.getTime()/1e3),Bw=new Array(156).join("\0"),Lr=(r,e,t,n)=>n===null?!1:(r.write(n+Bw,e,t,"utf8"),n.length!==Buffer.byteLength(n)||n.length>t);vp.exports=Ac});var Is=E((tD,Sp)=>{"use strict";var jw=mn(),Gw=require("path"),ui=class{constructor(e,t){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=t||!1}encode(){let e=this.encodeBody();if(e==="")return null;let t=Buffer.byteLength(e),n=512*Math.ceil(1+t/512),i=Buffer.allocUnsafe(n);for(let s=0;s<512;s++)i[s]=0;new jw({path:("PaxHeader/"+Gw.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:t,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,t,"utf8");for(let s=t+512;s<i.length;s++)i[s]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let t=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+t+`
`,i=Buffer.byteLength(n),s=Math.floor(Math.log(i)/Math.log(10))+1;return i+s>=Math.pow(10,s)&&(s+=1),s+i+n}};ui.parse=(r,e,t)=>new ui($w(Hw(r),e),t);var $w=(r,e)=>e?Object.keys(r).reduce((t,n)=>(t[n]=r[n],t),e):r,Hw=r=>r.replace(/\n$/,"").split(`
`).reduce(zw,Object.create(null)),zw=(r,e)=>{let t=parseInt(e,10);if(t!==Buffer.byteLength(e)+1)return r;e=e.substr((t+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return r;let s=n.join("=");return r[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s,r};Sp.exports=ui});var yn=E((rD,wp)=>{"use strict";wp.exports=r=>{let e=r.length-1,t=-1;for(;e>-1&&r.charAt(e)==="/";)t=e,e--;return t===-1?r:r.slice(0,t)}});var Ns=E((nD,Rp)=>{"use strict";Rp.exports=r=>class extends r{warn(e,t,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=t instanceof Error&&t.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(t instanceof Error&&(n=Object.assign(t,n),t=t.message),this.emit("warn",n.tarCode,t,n)):t instanceof Error?this.emit("error",Object.assign(t,n)):this.emit("error",Object.assign(new Error(`${e}: ${t}`),n))}}});var kc=E((sD,xp)=>{"use strict";var As=["|","<",">","?",":"],Dc=As.map(r=>String.fromCharCode(61440+r.charCodeAt(0))),Vw=new Map(As.map((r,e)=>[r,Dc[e]])),Ww=new Map(Dc.map((r,e)=>[r,As[e]]));xp.exports={encode:r=>As.reduce((e,t)=>e.split(t).join(Vw.get(t)),r),decode:r=>Dc.reduce((e,t)=>e.split(t).join(Ww.get(t)),r)}});var Lc=E((oD,Tp)=>{"use strict";var{isAbsolute:Xw,parse:Op}=require("path").win32;Tp.exports=r=>{let e="",t=Op(r);for(;Xw(r)||t.root;){let n=r.charAt(0)==="/"&&r.slice(0,4)!=="//?/"?"/":t.root;r=r.substr(n.length),e+=n,t=Op(r)}return[e,r]}});var Ip=E((aD,Cp)=>{"use strict";Cp.exports=(r,e,t)=>(r&=4095,t&&(r=(r|384)&-19),e&&(r&256&&(r|=64),r&32&&(r|=8),r&4&&(r|=1)),r)});var Hc=E((lD,$p)=>{"use strict";var Up=ln(),Fp=Is(),Mp=mn(),St=require("fs"),Np=require("path"),vt=dn(),Kw=yn(),qp=(r,e)=>e?(r=vt(r).replace(/^\.(\/|$)/,""),Kw(e)+"/"+r):vt(r),Yw=16*1024*1024,Ap=Symbol("process"),Dp=Symbol("file"),kp=Symbol("directory"),Uc=Symbol("symlink"),Lp=Symbol("hardlink"),li=Symbol("header"),Ds=Symbol("read"),Fc=Symbol("lstat"),ks=Symbol("onlstat"),Mc=Symbol("onread"),qc=Symbol("onreadlink"),Bc=Symbol("openfile"),jc=Symbol("onopenfile"),rr=Symbol("close"),Ls=Symbol("mode"),Gc=Symbol("awaitDrain"),Pc=Symbol("ondrain"),wt=Symbol("prefix"),Pp=Symbol("hadError"),Bp=Ns(),Jw=kc(),jp=Lc(),Gp=Ip(),Ps=Bp(class extends Up{constructor(e,t){if(t=t||{},super(t),typeof e!="string")throw new TypeError("path is required");this.path=vt(e),this.portable=!!t.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=t.maxReadSize||Yw,this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.preservePaths=!!t.preservePaths,this.cwd=vt(t.cwd||process.cwd()),this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.prefix=t.prefix?vt(t.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=jp(this.path);i&&(this.path=s,n=i)}this.win32=!!t.win32||process.platform==="win32",this.win32&&(this.path=Jw.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=vt(t.absolute||Np.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[ks](this.statCache.get(this.absolute)):this[Fc]()}emit(e,...t){return e==="error"&&(this[Pp]=!0),super.emit(e,...t)}[Fc](){St.lstat(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[ks](t)})}[ks](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=Qw(e),this.emit("stat",e),this[Ap]()}[Ap](){switch(this.type){case"File":return this[Dp]();case"Directory":return this[kp]();case"SymbolicLink":return this[Uc]();default:return this.end()}}[Ls](e){return Gp(e,this.type==="Directory",this.portable)}[wt](e){return qp(e,this.prefix)}[li](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new Mp({path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,mode:this[Ls](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new Fp({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[kp](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[li](),this.end()}[Uc](){St.readlink(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[qc](t)})}[qc](e){this.linkpath=vt(e),this[li](),this.end()}[Lp](e){this.type="Link",this.linkpath=vt(Np.relative(this.cwd,e)),this.stat.size=0,this[li](),this.end()}[Dp](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let t=this.linkCache.get(e);if(t.indexOf(this.cwd)===0)return this[Lp](t)}this.linkCache.set(e,this.absolute)}if(this[li](),this.stat.size===0)return this.end();this[Bc]()}[Bc](){St.open(this.absolute,"r",(e,t)=>{if(e)return this.emit("error",e);this[jc](t)})}[jc](e){if(this.fd=e,this[Pp])return this[rr]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Ds]()}[Ds](){let{fd:e,buf:t,offset:n,length:i,pos:s}=this;St.read(e,t,n,i,s,(o,a)=>{if(o)return this[rr](()=>this.emit("error",o));this[Mc](a)})}[rr](e){St.close(this.fd,e)}[Mc](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[rr](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[rr](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let t=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(t)?this[Pc]():this[Gc](()=>this[Pc]())}[Gc](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let t=new Error("writing more data than expected");return t.path=this.absolute,this.emit("error",t)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[Pc](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[rr](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Ds]()}}),$c=class extends Ps{[Fc](){this[ks](St.lstatSync(this.absolute))}[Uc](){this[qc](St.readlinkSync(this.absolute))}[Bc](){this[jc](St.openSync(this.absolute,"r"))}[Ds](){let e=!0;try{let{fd:t,buf:n,offset:i,length:s,pos:o}=this,a=St.readSync(t,n,i,s,o);this[Mc](a),e=!1}finally{if(e)try{this[rr](()=>{})}catch{}}}[Gc](e){e()}[rr](e){St.closeSync(this.fd),e()}},Zw=Bp(class extends Up{constructor(e,t){t=t||{},super(t),this.preservePaths=!!t.preservePaths,this.portable=!!t.portable,this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=t.prefix||null,this.path=vt(e.path),this.mode=this[Ls](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:t.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=vt(e.linkpath),typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=jp(this.path);i&&(this.path=s,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new Mp({path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new Fp({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[wt](e){return qp(e,this.prefix)}[Ls](e){return Gp(e,this.type==="Directory",this.portable)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=t,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Ps.Sync=$c;Ps.Tar=Zw;var Qw=r=>r.isFile()?"File":r.isDirectory()?"Directory":r.isSymbolicLink()?"SymbolicLink":"Unsupported";$p.exports=Ps});var zp=E((fD,Hp)=>{"use strict";Hp.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var zc=E((hD,Vp)=>{"use strict";Vp.exports=Z;Z.Node=Pr;Z.create=Z;function Z(r){var e=this;if(e instanceof Z||(e=new Z),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}Z.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};Z.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};Z.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};Z.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)tR(this,arguments[r]);return this.length};Z.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)rR(this,arguments[r]);return this.length};Z.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};Z.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};Z.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};Z.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};Z.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};Z.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};Z.prototype.map=function(r,e){e=e||this;for(var t=new Z,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};Z.prototype.mapReverse=function(r,e){e=e||this;for(var t=new Z,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};Z.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)t=r(t,n.value,i),n=n.next;return t};Z.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)t=r(t,n.value,i),n=n.prev;return t};Z.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};Z.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};Z.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new Z;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)t.push(i.value);return t};Z.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new Z;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>r;n--,i=i.prev)t.push(i.value);return t};Z.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<t.length;n++)i=eR(this,i,t[n]);return s};Z.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function eR(r,e,t){var n=e===r.head?new Pr(t,null,e,r):new Pr(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function tR(r,e){r.tail=new Pr(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function rR(r,e){r.head=new Pr(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Pr(r,e,t,n){if(!(this instanceof Pr))return new Pr(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{zp()(Z)}catch{}});var Hs=E((pD,Qp)=>{"use strict";var Gs=class{constructor(e,t){this.path=e||"./",this.absolute=t,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},nR=ln(),iR=wc(),sR=Ts(),eu=Hc(),oR=eu.Sync,aR=eu.Tar,cR=zc(),Wp=Buffer.alloc(1024),Ms=Symbol("onStat"),Us=Symbol("ended"),Rt=Symbol("queue"),En=Symbol("current"),Ur=Symbol("process"),Fs=Symbol("processing"),Xp=Symbol("processJob"),xt=Symbol("jobs"),Vc=Symbol("jobDone"),qs=Symbol("addFSEntry"),Kp=Symbol("addTarEntry"),Yc=Symbol("stat"),Jc=Symbol("readdir"),Bs=Symbol("onreaddir"),js=Symbol("pipe"),Yp=Symbol("entry"),Wc=Symbol("entryOpt"),Zc=Symbol("writeEntryClass"),Zp=Symbol("write"),Xc=Symbol("ondrain"),$s=require("fs"),Jp=require("path"),uR=Ns(),Kc=dn(),tu=uR(class extends nR{constructor(e){super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Kc(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Zc]=eu,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new iR.Gzip(e.gzip),this.zip.on("data",t=>super.write(t)),this.zip.on("end",t=>super.end()),this.zip.on("drain",t=>this[Xc]()),this.on("resume",t=>this.zip.resume())):this.on("drain",this[Xc]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:t=>!0,this[Rt]=new cR,this[xt]=0,this.jobs=+e.jobs||4,this[Fs]=!1,this[Us]=!1}[Zp](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Us]=!0,this[Ur](),this}write(e){if(this[Us])throw new Error("write after end");return e instanceof sR?this[Kp](e):this[qs](e),this.flowing}[Kp](e){let t=Kc(Jp.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new Gs(e.path,t,!1);n.entry=new aR(e,this[Wc](n)),n.entry.on("end",i=>this[Vc](n)),this[xt]+=1,this[Rt].push(n)}this[Ur]()}[qs](e){let t=Kc(Jp.resolve(this.cwd,e));this[Rt].push(new Gs(e,t)),this[Ur]()}[Yc](e){e.pending=!0,this[xt]+=1;let t=this.follow?"stat":"lstat";$s[t](e.absolute,(n,i)=>{e.pending=!1,this[xt]-=1,n?this.emit("error",n):this[Ms](e,i)})}[Ms](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[Ur]()}[Jc](e){e.pending=!0,this[xt]+=1,$s.readdir(e.absolute,(t,n)=>{if(e.pending=!1,this[xt]-=1,t)return this.emit("error",t);this[Bs](e,n)})}[Bs](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[Ur]()}[Ur](){if(!this[Fs]){this[Fs]=!0;for(let e=this[Rt].head;e!==null&&this[xt]<this.jobs;e=e.next)if(this[Xp](e.value),e.value.ignore){let t=e.next;this[Rt].removeNode(e),e.next=t}this[Fs]=!1,this[Us]&&!this[Rt].length&&this[xt]===0&&(this.zip?this.zip.end(Wp):(super.write(Wp),super.end()))}}get[En](){return this[Rt]&&this[Rt].head&&this[Rt].head.value}[Vc](e){this[Rt].shift(),this[xt]-=1,this[Ur]()}[Xp](e){if(!e.pending){if(e.entry){e===this[En]&&!e.piped&&this[js](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Ms](e,this.statCache.get(e.absolute)):this[Yc](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[Bs](e,this.readdirCache.get(e.absolute)):this[Jc](e),!e.readdir))){if(e.entry=this[Yp](e),!e.entry){e.ignore=!0;return}e===this[En]&&!e.piped&&this[js](e)}}}[Wc](e){return{onwarn:(t,n,i)=>this.warn(t,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[Yp](e){this[xt]+=1;try{return new this[Zc](e.path,this[Wc](e)).on("end",()=>this[Vc](e)).on("error",t=>this.emit("error",t))}catch(t){this.emit("error",t)}}[Xc](){this[En]&&this[En].entry&&this[En].entry.resume()}[js](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[qs](o+i)});let t=e.entry,n=this.zip;n?t.on("data",i=>{n.write(i)||t.pause()}):t.on("data",i=>{super.write(i)||t.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),Qc=class extends tu{constructor(e){super(e),this[Zc]=oR}pause(){}resume(){}[Yc](e){let t=this.follow?"statSync":"lstatSync";this[Ms](e,$s[t](e.absolute))}[Jc](e,t){this[Bs](e,$s.readdirSync(e.absolute))}[js](e){let t=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[qs](o+i)}),n?t.on("data",i=>{n.write(i)}):t.on("data",i=>{super[Zp](i)})}};tu.Sync=Qc;Qp.exports=tu});var xn=E(hi=>{"use strict";var lR=ln(),fR=require("events").EventEmitter,ze=require("fs"),iu=ze.writev;if(!iu){let r=process.binding("fs"),e=r.FSReqWrap||r.FSReqCallback;iu=(t,n,i,s)=>{let o=(c,l)=>s(c,l,n),a=new e;a.oncomplete=o,r.writeBuffers(t,n,i,a)}}var wn=Symbol("_autoClose"),ft=Symbol("_close"),fi=Symbol("_ended"),te=Symbol("_fd"),em=Symbol("_finished"),ir=Symbol("_flags"),ru=Symbol("_flush"),su=Symbol("_handleChunk"),ou=Symbol("_makeBuf"),Ks=Symbol("_mode"),zs=Symbol("_needDrain"),vn=Symbol("_onerror"),Rn=Symbol("_onopen"),nu=Symbol("_onread"),_n=Symbol("_onwrite"),sr=Symbol("_open"),qt=Symbol("_path"),Fr=Symbol("_pos"),Ot=Symbol("_queue"),bn=Symbol("_read"),tm=Symbol("_readSize"),nr=Symbol("_reading"),Vs=Symbol("_remain"),rm=Symbol("_size"),Ws=Symbol("_write"),gn=Symbol("_writing"),Xs=Symbol("_defaultFlag"),Sn=Symbol("_errored"),Ys=class extends lR{constructor(e,t){if(t=t||{},super(t),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Sn]=!1,this[te]=typeof t.fd=="number"?t.fd:null,this[qt]=e,this[tm]=t.readSize||16*1024*1024,this[nr]=!1,this[rm]=typeof t.size=="number"?t.size:1/0,this[Vs]=this[rm],this[wn]=typeof t.autoClose=="boolean"?t.autoClose:!0,typeof this[te]=="number"?this[bn]():this[sr]()}get fd(){return this[te]}get path(){return this[qt]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[sr](){ze.open(this[qt],"r",(e,t)=>this[Rn](e,t))}[Rn](e,t){e?this[vn](e):(this[te]=t,this.emit("open",t),this[bn]())}[ou](){return Buffer.allocUnsafe(Math.min(this[tm],this[Vs]))}[bn](){if(!this[nr]){this[nr]=!0;let e=this[ou]();if(e.length===0)return process.nextTick(()=>this[nu](null,0,e));ze.read(this[te],e,0,e.length,null,(t,n,i)=>this[nu](t,n,i))}}[nu](e,t,n){this[nr]=!1,e?this[vn](e):this[su](t,n)&&this[bn]()}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.close(e,t=>t?this.emit("error",t):this.emit("close"))}}[vn](e){this[nr]=!0,this[ft](),this.emit("error",e)}[su](e,t){let n=!1;return this[Vs]-=e,e>0&&(n=super.write(e<t.length?t.slice(0,e):t)),(e===0||this[Vs]<=0)&&(n=!1,this[ft](),super.end()),n}emit(e,t){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[te]=="number"&&this[bn]();break;case"error":return this[Sn]?void 0:(this[Sn]=!0,super.emit(e,t));default:return super.emit(e,t)}}},au=class extends Ys{[sr](){let e=!0;try{this[Rn](null,ze.openSync(this[qt],"r")),e=!1}finally{e&&this[ft]()}}[bn](){let e=!0;try{if(!this[nr]){this[nr]=!0;do{let t=this[ou](),n=t.length===0?0:ze.readSync(this[te],t,0,t.length,null);if(!this[su](n,t))break}while(!0);this[nr]=!1}e=!1}finally{e&&this[ft]()}}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.closeSync(e),this.emit("close")}}},Js=class extends fR{constructor(e,t){t=t||{},super(t),this.readable=!1,this.writable=!0,this[Sn]=!1,this[gn]=!1,this[fi]=!1,this[zs]=!1,this[Ot]=[],this[qt]=e,this[te]=typeof t.fd=="number"?t.fd:null,this[Ks]=t.mode===void 0?438:t.mode,this[Fr]=typeof t.start=="number"?t.start:null,this[wn]=typeof t.autoClose=="boolean"?t.autoClose:!0;let n=this[Fr]!==null?"r+":"w";this[Xs]=t.flags===void 0,this[ir]=this[Xs]?n:t.flags,this[te]===null&&this[sr]()}emit(e,t){if(e==="error"){if(this[Sn])return;this[Sn]=!0}return super.emit(e,t)}get fd(){return this[te]}get path(){return this[qt]}[vn](e){this[ft](),this[gn]=!0,this.emit("error",e)}[sr](){ze.open(this[qt],this[ir],this[Ks],(e,t)=>this[Rn](e,t))}[Rn](e,t){this[Xs]&&this[ir]==="r+"&&e&&e.code==="ENOENT"?(this[ir]="w",this[sr]()):e?this[vn](e):(this[te]=t,this.emit("open",t),this[ru]())}end(e,t){return e&&this.write(e,t),this[fi]=!0,!this[gn]&&!this[Ot].length&&typeof this[te]=="number"&&this[_n](null,0),this}write(e,t){return typeof e=="string"&&(e=Buffer.from(e,t)),this[fi]?(this.emit("error",new Error("write() after end()")),!1):this[te]===null||this[gn]||this[Ot].length?(this[Ot].push(e),this[zs]=!0,!1):(this[gn]=!0,this[Ws](e),!0)}[Ws](e){ze.write(this[te],e,0,e.length,this[Fr],(t,n)=>this[_n](t,n))}[_n](e,t){e?this[vn](e):(this[Fr]!==null&&(this[Fr]+=t),this[Ot].length?this[ru]():(this[gn]=!1,this[fi]&&!this[em]?(this[em]=!0,this[ft](),this.emit("finish")):this[zs]&&(this[zs]=!1,this.emit("drain"))))}[ru](){if(this[Ot].length===0)this[fi]&&this[_n](null,0);else if(this[Ot].length===1)this[Ws](this[Ot].pop());else{let e=this[Ot];this[Ot]=[],iu(this[te],e,this[Fr],(t,n)=>this[_n](t,n))}}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.close(e,t=>t?this.emit("error",t):this.emit("close"))}}},cu=class extends Js{[sr](){let e;if(this[Xs]&&this[ir]==="r+")try{e=ze.openSync(this[qt],this[ir],this[Ks])}catch(t){if(t.code==="ENOENT")return this[ir]="w",this[sr]();throw t}else e=ze.openSync(this[qt],this[ir],this[Ks]);this[Rn](null,e)}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.closeSync(e),this.emit("close")}}[Ws](e){let t=!0;try{this[_n](null,ze.writeSync(this[te],e,0,e.length,this[Fr])),t=!1}finally{if(t)try{this[ft]()}catch{}}}};hi.ReadStream=Ys;hi.ReadStreamSync=au;hi.WriteStream=Js;hi.WriteStreamSync=cu});var io=E((ED,um)=>{"use strict";var hR=Ns(),dR=mn(),pR=require("events"),mR=zc(),yR=1024*1024,ER=Ts(),nm=Is(),gR=wc(),uu=Buffer.from([31,139]),nt=Symbol("state"),Mr=Symbol("writeEntry"),Bt=Symbol("readEntry"),lu=Symbol("nextEntry"),im=Symbol("processEntry"),it=Symbol("extendedHeader"),di=Symbol("globalExtendedHeader"),or=Symbol("meta"),sm=Symbol("emitMeta"),ae=Symbol("buffer"),jt=Symbol("queue"),qr=Symbol("ended"),om=Symbol("emittedEnd"),Br=Symbol("emit"),Ve=Symbol("unzip"),Zs=Symbol("consumeChunk"),Qs=Symbol("consumeChunkSub"),fu=Symbol("consumeBody"),am=Symbol("consumeMeta"),cm=Symbol("consumeHeader"),eo=Symbol("consuming"),hu=Symbol("bufferConcat"),du=Symbol("maybeEnd"),pi=Symbol("writing"),ar=Symbol("aborted"),to=Symbol("onDone"),jr=Symbol("sawValidEntry"),ro=Symbol("sawNullBlock"),no=Symbol("sawEOF"),_R=r=>!0;um.exports=hR(class extends pR{constructor(e){e=e||{},super(e),this.file=e.file||"",this[jr]=null,this.on(to,t=>{(this[nt]==="begin"||this[jr]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(to,e.ondone):this.on(to,t=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||yR,this.filter=typeof e.filter=="function"?e.filter:_R,this.writable=!0,this.readable=!1,this[jt]=new mR,this[ae]=null,this[Bt]=null,this[Mr]=null,this[nt]="begin",this[or]="",this[it]=null,this[di]=null,this[qr]=!1,this[Ve]=null,this[ar]=!1,this[ro]=!1,this[no]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[cm](e,t){this[jr]===null&&(this[jr]=!1);let n;try{n=new dR(e,t,this[it],this[di])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[ro]?(this[no]=!0,this[nt]==="begin"&&(this[nt]="header"),this[Br]("eof")):(this[ro]=!0,this[Br]("nullBlock"));else if(this[ro]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let s=this[Mr]=new ER(n,this[it],this[di]);if(!this[jr])if(s.remain){let o=()=>{s.invalid||(this[jr]=!0)};s.on("end",o)}else this[jr]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[Br]("ignoredEntry",s),this[nt]="ignore",s.resume()):s.size>0&&(this[or]="",s.on("data",o=>this[or]+=o),this[nt]="meta"):(this[it]=null,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[Br]("ignoredEntry",s),this[nt]=s.remain?"ignore":"header",s.resume()):(s.remain?this[nt]="body":(this[nt]="header",s.end()),this[Bt]?this[jt].push(s):(this[jt].push(s),this[lu]())))}}}[im](e){let t=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Bt]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[lu]()),t=!1)):(this[Bt]=null,t=!1),t}[lu](){do;while(this[im](this[jt].shift()));if(!this[jt].length){let e=this[Bt];!e||e.flowing||e.size===e.remain?this[pi]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[fu](e,t){let n=this[Mr],i=n.blockRemain,s=i>=e.length&&t===0?e:e.slice(t,t+i);return n.write(s),n.blockRemain||(this[nt]="header",this[Mr]=null,n.end()),s.length}[am](e,t){let n=this[Mr],i=this[fu](e,t);return this[Mr]||this[sm](n),i}[Br](e,t,n){!this[jt].length&&!this[Bt]?this.emit(e,t,n):this[jt].push([e,t,n])}[sm](e){switch(this[Br]("meta",this[or]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[it]=nm.parse(this[or],this[it],!1);break;case"GlobalExtendedHeader":this[di]=nm.parse(this[or],this[di],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[it]=this[it]||Object.create(null),this[it].path=this[or].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[it]=this[it]||Object.create(null),this[it].linkpath=this[or].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[ar]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[ar])return;if(this[Ve]===null&&e){if(this[ae]&&(e=Buffer.concat([this[ae],e]),this[ae]=null),e.length<uu.length)return this[ae]=e,!0;for(let n=0;this[Ve]===null&&n<uu.length;n++)e[n]!==uu[n]&&(this[Ve]=!1);if(this[Ve]===null){let n=this[qr];this[qr]=!1,this[Ve]=new gR.Unzip,this[Ve].on("data",s=>this[Zs](s)),this[Ve].on("error",s=>this.abort(s)),this[Ve].on("end",s=>{this[qr]=!0,this[Zs]()}),this[pi]=!0;let i=this[Ve][n?"end":"write"](e);return this[pi]=!1,i}}this[pi]=!0,this[Ve]?this[Ve].write(e):this[Zs](e),this[pi]=!1;let t=this[jt].length?!1:this[Bt]?this[Bt].flowing:!0;return!t&&!this[jt].length&&this[Bt].once("drain",n=>this.emit("drain")),t}[hu](e){e&&!this[ar]&&(this[ae]=this[ae]?Buffer.concat([this[ae],e]):e)}[du](){if(this[qr]&&!this[om]&&!this[ar]&&!this[eo]){this[om]=!0;let e=this[Mr];if(e&&e.blockRemain){let t=this[ae]?this[ae].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e}),this[ae]&&e.write(this[ae]),e.end()}this[Br](to)}}[Zs](e){if(this[eo])this[hu](e);else if(!e&&!this[ae])this[du]();else{if(this[eo]=!0,this[ae]){this[hu](e);let t=this[ae];this[ae]=null,this[Qs](t)}else this[Qs](e);for(;this[ae]&&this[ae].length>=512&&!this[ar]&&!this[no];){let t=this[ae];this[ae]=null,this[Qs](t)}this[eo]=!1}(!this[ae]||this[qr])&&this[du]()}[Qs](e){let t=0,n=e.length;for(;t+512<=n&&!this[ar]&&!this[no];)switch(this[nt]){case"begin":case"header":this[cm](e,t),t+=512;break;case"ignore":case"body":t+=this[fu](e,t);break;case"meta":t+=this[am](e,t);break;default:throw new Error("invalid state: "+this[nt])}t<n&&(this[ae]?this[ae]=Buffer.concat([e.slice(t),this[ae]]):this[ae]=e.slice(t))}end(e){this[ar]||(this[Ve]?this[Ve].end(e):(this[qr]=!0,this.write(e)))}})});var so=E((gD,dm)=>{"use strict";var bR=cn(),fm=io(),On=require("fs"),vR=xn(),lm=require("path"),pu=yn();dm.exports=(r,e,t)=>{typeof r=="function"?(t=r,e=null,r={}):Array.isArray(r)&&(e=r,r={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let n=bR(r);if(n.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&wR(n,e),n.noResume||SR(n),n.file&&n.sync?RR(n):n.file?xR(n,t):hm(n)};var SR=r=>{let e=r.onentry;r.onentry=e?t=>{e(t),t.resume()}:t=>t.resume()},wR=(r,e)=>{let t=new Map(e.map(s=>[pu(s),!0])),n=r.filter,i=(s,o)=>{let a=o||lm.parse(s).root||".",c=s===a?!1:t.has(s)?t.get(s):i(lm.dirname(s),a);return t.set(s,c),c};r.filter=n?(s,o)=>n(s,o)&&i(pu(s)):s=>i(pu(s))},RR=r=>{let e=hm(r),t=r.file,n=!0,i;try{let s=On.statSync(t),o=r.maxReadSize||16*1024*1024;if(s.size<o)e.end(On.readFileSync(t));else{let a=0,c=Buffer.allocUnsafe(o);for(i=On.openSync(t,"r");a<s.size;){let l=On.readSync(i,c,0,o,a);a+=l,e.write(c.slice(0,l))}e.end()}n=!1}finally{if(n&&i)try{On.closeSync(i)}catch{}}},xR=(r,e)=>{let t=new fm(r),n=r.maxReadSize||16*1024*1024,i=r.file,s=new Promise((o,a)=>{t.on("error",a),t.on("end",o),On.stat(i,(c,l)=>{if(c)a(c);else{let u=new vR.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(t)}})});return e?s.then(e,e):s},hm=r=>new fm(r)});var _m=E((_D,gm)=>{"use strict";var OR=cn(),oo=Hs(),pm=xn(),mm=so(),ym=require("path");gm.exports=(r,e,t)=>{if(typeof e=="function"&&(t=e),Array.isArray(r)&&(e=r,r={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=OR(r);if(n.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?TR(n,e):n.file?CR(n,e,t):n.sync?IR(n,e):NR(n,e)};var TR=(r,e)=>{let t=new oo.Sync(r),n=new pm.WriteStreamSync(r.file,{mode:r.mode||438});t.pipe(n),Em(t,e)},CR=(r,e,t)=>{let n=new oo(r),i=new pm.WriteStream(r.file,{mode:r.mode||438});n.pipe(i);let s=new Promise((o,a)=>{i.on("error",a),i.on("close",o),n.on("error",a)});return mu(n,e),t?s.then(t,t):s},Em=(r,e)=>{e.forEach(t=>{t.charAt(0)==="@"?mm({file:ym.resolve(r.cwd,t.substr(1)),sync:!0,noResume:!0,onentry:n=>r.add(n)}):r.add(t)}),r.end()},mu=(r,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return mm({file:ym.resolve(r.cwd,t.substr(1)),noResume:!0,onentry:n=>r.add(n)}).then(n=>mu(r,e));r.add(t)}r.end()},IR=(r,e)=>{let t=new oo.Sync(r);return Em(t,e),t},NR=(r,e)=>{let t=new oo(r);return mu(t,e),t}});var yu=E((bD,Om)=>{"use strict";var AR=cn(),bm=Hs(),Ze=require("fs"),vm=xn(),Sm=so(),wm=require("path"),Rm=mn();Om.exports=(r,e,t)=>{let n=AR(r);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?DR(n,e):LR(n,e,t)};var DR=(r,e)=>{let t=new bm.Sync(r),n=!0,i,s;try{try{i=Ze.openSync(r.file,"r+")}catch(c){if(c.code==="ENOENT")i=Ze.openSync(r.file,"w+");else throw c}let o=Ze.fstatSync(i),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let u=0,f=0;u<512;u+=f){if(f=Ze.readSync(i,a,u,a.length-u,s+u),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new Rm(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(s+l+512>o.size)break;s+=l,r.mtimeCache&&r.mtimeCache.set(c.path,c.mtime)}n=!1,kR(r,t,s,i,e)}finally{if(n)try{Ze.closeSync(i)}catch{}}},kR=(r,e,t,n,i)=>{let s=new vm.WriteStreamSync(r.file,{fd:n,start:t});e.pipe(s),PR(e,i)},LR=(r,e,t)=>{e=Array.from(e);let n=new bm(r),i=(o,a,c)=>{let l=(m,b)=>{m?Ze.close(o,p=>c(m)):c(null,b)},u=0;if(a===0)return l(null,0);let f=0,h=Buffer.alloc(512),d=(m,b)=>{if(m)return l(m);if(f+=b,f<512&&b)return Ze.read(o,h,f,h.length-f,u+f,d);if(u===0&&h[0]===31&&h[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let p=new Rm(h);if(!p.cksumValid)return l(null,u);let w=512*Math.ceil(p.size/512);if(u+w+512>a||(u+=w+512,u>=a))return l(null,u);r.mtimeCache&&r.mtimeCache.set(p.path,p.mtime),f=0,Ze.read(o,h,0,512,u,d)};Ze.read(o,h,0,512,u,d)},s=new Promise((o,a)=>{n.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",Ze.open(r.file,c,l);if(u)return a(u);Ze.fstat(f,(h,d)=>{if(h)return Ze.close(f,()=>a(h));i(f,d.size,(m,b)=>{if(m)return a(m);let p=new vm.WriteStream(r.file,{fd:f,start:b});n.pipe(p),p.on("error",a),p.on("close",o),xm(n,e)})})};Ze.open(r.file,c,l)});return t?s.then(t,t):s},PR=(r,e)=>{e.forEach(t=>{t.charAt(0)==="@"?Sm({file:wm.resolve(r.cwd,t.substr(1)),sync:!0,noResume:!0,onentry:n=>r.add(n)}):r.add(t)}),r.end()},xm=(r,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return Sm({file:wm.resolve(r.cwd,t.substr(1)),noResume:!0,onentry:n=>r.add(n)}).then(n=>xm(r,e));r.add(t)}r.end()}});var Cm=E((vD,Tm)=>{"use strict";var UR=cn(),FR=yu();Tm.exports=(r,e,t)=>{let n=UR(r);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),MR(n),FR(n,e,t)};var MR=r=>{let e=r.filter;r.mtimeCache||(r.mtimeCache=new Map),r.filter=e?(t,n)=>e(t,n)&&!(r.mtimeCache.get(t)>n.mtime):(t,n)=>!(r.mtimeCache.get(t)>n.mtime)}});var Am=E((SD,Nm)=>{"use strict";var{promisify:Im}=require("util"),cr=require("fs"),qR=r=>{if(!r)r={mode:511,fs:cr};else if(typeof r=="object")r={mode:511,fs:cr,...r};else if(typeof r=="number")r={mode:r,fs:cr};else if(typeof r=="string")r={mode:parseInt(r,8),fs:cr};else throw new TypeError("invalid options argument");return r.mkdir=r.mkdir||r.fs.mkdir||cr.mkdir,r.mkdirAsync=Im(r.mkdir),r.stat=r.stat||r.fs.stat||cr.stat,r.statAsync=Im(r.stat),r.statSync=r.statSync||r.fs.statSync||cr.statSync,r.mkdirSync=r.mkdirSync||r.fs.mkdirSync||cr.mkdirSync,r};Nm.exports=qR});var km=E((wD,Dm)=>{"use strict";var BR=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:jR,parse:GR}=require("path"),$R=r=>{if(/\0/.test(r))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:r,code:"ERR_INVALID_ARG_VALUE"});if(r=jR(r),BR==="win32"){let e=/[*|"<>?:]/,{root:t}=GR(r);if(e.test(r.substr(t.length)))throw Object.assign(new Error("Illegal characters in path."),{path:r,code:"EINVAL"})}return r};Dm.exports=$R});var Mm=E((RD,Fm)=>{"use strict";var{dirname:Lm}=require("path"),Pm=(r,e,t=void 0)=>t===e?Promise.resolve():r.statAsync(e).then(n=>n.isDirectory()?t:void 0,n=>n.code==="ENOENT"?Pm(r,Lm(e),e):void 0),Um=(r,e,t=void 0)=>{if(t!==e)try{return r.statSync(e).isDirectory()?t:void 0}catch(n){return n.code==="ENOENT"?Um(r,Lm(e),e):void 0}};Fm.exports={findMade:Pm,findMadeSync:Um}});var _u=E((xD,Bm)=>{"use strict";var{dirname:qm}=require("path"),Eu=(r,e,t)=>{e.recursive=!1;let n=qm(r);return n===r?e.mkdirAsync(r,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(r,e).then(()=>t||r,i=>{if(i.code==="ENOENT")return Eu(n,e).then(s=>Eu(r,e,s));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(r).then(s=>{if(s.isDirectory())return t;throw i},()=>{throw i})})},gu=(r,e,t)=>{let n=qm(r);if(e.recursive=!1,n===r)try{return e.mkdirSync(r,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(r,e),t||r}catch(i){if(i.code==="ENOENT")return gu(r,e,gu(n,e,t));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(r).isDirectory())throw i}catch{throw i}}};Bm.exports={mkdirpManual:Eu,mkdirpManualSync:gu}});var $m=E((OD,Gm)=>{"use strict";var{dirname:jm}=require("path"),{findMade:HR,findMadeSync:zR}=Mm(),{mkdirpManual:VR,mkdirpManualSync:WR}=_u(),XR=(r,e)=>(e.recursive=!0,jm(r)===r?e.mkdirAsync(r,e):HR(e,r).then(n=>e.mkdirAsync(r,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return VR(r,e);throw i}))),KR=(r,e)=>{if(e.recursive=!0,jm(r)===r)return e.mkdirSync(r,e);let n=zR(e,r);try{return e.mkdirSync(r,e),n}catch(i){if(i.code==="ENOENT")return WR(r,e);throw i}};Gm.exports={mkdirpNative:XR,mkdirpNativeSync:KR}});var Wm=E((TD,Vm)=>{"use strict";var Hm=require("fs"),YR=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,bu=YR.replace(/^v/,"").split("."),zm=+bu[0]>10||+bu[0]==10&&+bu[1]>=12,JR=zm?r=>r.mkdir===Hm.mkdir:()=>!1,ZR=zm?r=>r.mkdirSync===Hm.mkdirSync:()=>!1;Vm.exports={useNative:JR,useNativeSync:ZR}});var Qm=E((CD,Zm)=>{"use strict";var Tn=Am(),Cn=km(),{mkdirpNative:Xm,mkdirpNativeSync:Km}=$m(),{mkdirpManual:Ym,mkdirpManualSync:Jm}=_u(),{useNative:QR,useNativeSync:ex}=Wm(),In=(r,e)=>(r=Cn(r),e=Tn(e),QR(e)?Xm(r,e):Ym(r,e)),tx=(r,e)=>(r=Cn(r),e=Tn(e),ex(e)?Km(r,e):Jm(r,e));In.sync=tx;In.native=(r,e)=>Xm(Cn(r),Tn(e));In.manual=(r,e)=>Ym(Cn(r),Tn(e));In.nativeSync=(r,e)=>Km(Cn(r),Tn(e));In.manualSync=(r,e)=>Jm(Cn(r),Tn(e));Zm.exports=In});var oy=E((ID,sy)=>{"use strict";var st=require("fs"),Gr=require("path"),rx=st.lchown?"lchown":"chown",nx=st.lchownSync?"lchownSync":"chownSync",ty=st.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),ey=(r,e,t)=>{try{return st[nx](r,e,t)}catch(n){if(n.code!=="ENOENT")throw n}},ix=(r,e,t)=>{try{return st.chownSync(r,e,t)}catch(n){if(n.code!=="ENOENT")throw n}},sx=ty?(r,e,t,n)=>i=>{!i||i.code!=="EISDIR"?n(i):st.chown(r,e,t,n)}:(r,e,t,n)=>n,vu=ty?(r,e,t)=>{try{return ey(r,e,t)}catch(n){if(n.code!=="EISDIR")throw n;ix(r,e,t)}}:(r,e,t)=>ey(r,e,t),ox=process.version,ry=(r,e,t)=>st.readdir(r,e,t),ax=(r,e)=>st.readdirSync(r,e);/^v4\./.test(ox)&&(ry=(r,e,t)=>st.readdir(r,t));var ao=(r,e,t,n)=>{st[rx](r,e,t,sx(r,e,t,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},ny=(r,e,t,n,i)=>{if(typeof e=="string")return st.lstat(Gr.resolve(r,e),(s,o)=>{if(s)return i(s.code!=="ENOENT"?s:null);o.name=e,ny(r,o,t,n,i)});if(e.isDirectory())Su(Gr.resolve(r,e.name),t,n,s=>{if(s)return i(s);let o=Gr.resolve(r,e.name);ao(o,t,n,i)});else{let s=Gr.resolve(r,e.name);ao(s,t,n,i)}},Su=(r,e,t,n)=>{ry(r,{withFileTypes:!0},(i,s)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return ao(r,e,t,n);let o=s.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--o===0)return ao(r,e,t,n)}};s.forEach(l=>ny(r,l,e,t,c))})},cx=(r,e,t,n)=>{if(typeof e=="string")try{let i=st.lstatSync(Gr.resolve(r,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&iy(Gr.resolve(r,e.name),t,n),vu(Gr.resolve(r,e.name),t,n)},iy=(r,e,t)=>{let n;try{n=ax(r,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return vu(r,e,t);throw i}return n&&n.length&&n.forEach(i=>cx(r,i,e,t)),vu(r,e,t)};sy.exports=Su;Su.sync=iy});var ly=E((ND,wu)=>{"use strict";var ay=Qm(),ot=require("fs"),co=require("path"),cy=oy(),ht=dn(),uo=class extends Error{constructor(e,t){super("Cannot extract through symbolic link"),this.path=t,this.symlink=e}get name(){return"SylinkError"}},lo=class extends Error{constructor(e,t){super(t+": Cannot cd into '"+e+"'"),this.path=e,this.code=t}get name(){return"CwdError"}},fo=(r,e)=>r.get(ht(e)),mi=(r,e,t)=>r.set(ht(e),t),ux=(r,e)=>{ot.stat(r,(t,n)=>{(t||!n.isDirectory())&&(t=new lo(r,t&&t.code||"ENOTDIR")),e(t)})};wu.exports=(r,e,t)=>{r=ht(r);let n=e.umask,i=e.mode|448,s=(i&n)!==0,o=e.uid,a=e.gid,c=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,h=ht(e.cwd),d=(p,w)=>{p?t(p):(mi(f,r,!0),w&&c?cy(w,o,a,k=>d(k)):s?ot.chmod(r,i,t):t())};if(f&&fo(f,r)===!0)return d();if(r===h)return ux(r,d);if(l)return ay(r,{mode:i}).then(p=>d(null,p),d);let b=ht(co.relative(h,r)).split("/");ho(h,b,i,f,u,h,null,d)};var ho=(r,e,t,n,i,s,o,a)=>{if(!e.length)return a(null,o);let c=e.shift(),l=ht(co.resolve(r+"/"+c));if(fo(n,l))return ho(l,e,t,n,i,s,o,a);ot.mkdir(l,t,uy(l,e,t,n,i,s,o,a))},uy=(r,e,t,n,i,s,o,a)=>c=>{c?ot.lstat(r,(l,u)=>{if(l)l.path=l.path&&ht(l.path),a(l);else if(u.isDirectory())ho(r,e,t,n,i,s,o,a);else if(i)ot.unlink(r,f=>{if(f)return a(f);ot.mkdir(r,t,uy(r,e,t,n,i,s,o,a))});else{if(u.isSymbolicLink())return a(new uo(r,r+"/"+e.join("/")));a(c)}}):(o=o||r,ho(r,e,t,n,i,s,o,a))},lx=r=>{let e=!1,t="ENOTDIR";try{e=ot.statSync(r).isDirectory()}catch(n){t=n.code}finally{if(!e)throw new lo(r,t)}};wu.exports.sync=(r,e)=>{r=ht(r);let t=e.umask,n=e.mode|448,i=(n&t)!==0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=ht(e.cwd),h=p=>{mi(u,r,!0),p&&a&&cy.sync(p,s,o),i&&ot.chmodSync(r,n)};if(u&&fo(u,r)===!0)return h();if(r===f)return lx(f),h();if(c)return h(ay.sync(r,n));let m=ht(co.relative(f,r)).split("/"),b=null;for(let p=m.shift(),w=f;p&&(w+="/"+p);p=m.shift())if(w=ht(co.resolve(w)),!fo(u,w))try{ot.mkdirSync(w,n),b=b||w,mi(u,w,!0)}catch{let O=ot.lstatSync(w);if(O.isDirectory()){mi(u,w,!0);continue}else if(l){ot.unlinkSync(w),ot.mkdirSync(w,n),b=b||w,mi(u,w,!0);continue}else if(O.isSymbolicLink())return new uo(w,w+"/"+m.join("/"))}return h(b)}});var xu=E((AD,fy)=>{"use strict";var Ru=Object.create(null),{hasOwnProperty:fx}=Object.prototype;fy.exports=r=>(fx.call(Ru,r)||(Ru[r]=r.normalize("NFKD")),Ru[r])});var my=E((DD,py)=>{"use strict";var hy=require("assert"),hx=xu(),dx=yn(),{join:dy}=require("path"),px=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,mx=px==="win32";py.exports=()=>{let r=new Map,e=new Map,t=l=>l.split("/").slice(0,-1).reduce((f,h)=>(f.length&&(h=dy(f[f.length-1],h)),f.push(h||"/"),f),[]),n=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>r.get(f)),dirs:[...u.dirs].map(f=>r.get(f))}},s=l=>{let{paths:u,dirs:f}=i(l);return u.every(h=>h[0]===l)&&f.every(h=>h[0]instanceof Set&&h[0].has(l))},o=l=>n.has(l)||!s(l)?!1:(n.add(l),l(()=>a(l)),!0),a=l=>{if(!n.has(l))return!1;let{paths:u,dirs:f}=e.get(l),h=new Set;return u.forEach(d=>{let m=r.get(d);hy.equal(m[0],l),m.length===1?r.delete(d):(m.shift(),typeof m[0]=="function"?h.add(m[0]):m[0].forEach(b=>h.add(b)))}),f.forEach(d=>{let m=r.get(d);hy(m[0]instanceof Set),m[0].size===1&&m.length===1?r.delete(d):m[0].size===1?(m.shift(),h.add(m[0])):m[0].delete(l)}),n.delete(l),h.forEach(d=>o(d)),!0};return{check:s,reserve:(l,u)=>{l=mx?["win32 parallelization disabled"]:l.map(h=>hx(dx(dy(h))).toLowerCase());let f=new Set(l.map(h=>t(h)).reduce((h,d)=>h.concat(d)));return e.set(u,{dirs:f,paths:l}),l.forEach(h=>{let d=r.get(h);d?d.push(u):r.set(h,[u])}),f.forEach(h=>{let d=r.get(h);d?d[d.length-1]instanceof Set?d[d.length-1].add(u):d.push(new Set([u])):r.set(h,[new Set([u])])}),o(u)}}}});var gy=E((kD,Ey)=>{"use strict";var yx=process.env.__FAKE_PLATFORM__||process.platform,Ex=yx==="win32",gx=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:_x,O_TRUNC:bx,O_WRONLY:vx,UV_FS_O_FILEMAP:yy=0}=gx.constants,Sx=Ex&&!!yy,wx=512*1024,Rx=yy|bx|_x|vx;Ey.exports=Sx?r=>r<wx?Rx:"w":()=>"w"});var Lu=E((LD,Dy)=>{"use strict";var xx=require("assert"),Ox=io(),Q=require("fs"),Tx=xn(),Gt=require("path"),Iy=ly(),_y=kc(),Cx=my(),Ix=Lc(),Qe=dn(),Nx=yn(),Ax=xu(),by=Symbol("onEntry"),Cu=Symbol("checkFs"),vy=Symbol("checkFs2"),yo=Symbol("pruneCache"),Iu=Symbol("isReusable"),at=Symbol("makeFs"),Nu=Symbol("file"),Au=Symbol("directory"),Eo=Symbol("link"),Sy=Symbol("symlink"),wy=Symbol("hardlink"),Ry=Symbol("unsupported"),xy=Symbol("checkPath"),ur=Symbol("mkdir"),De=Symbol("onError"),po=Symbol("pending"),Oy=Symbol("pend"),Nn=Symbol("unpend"),Ou=Symbol("ended"),Tu=Symbol("maybeClose"),Du=Symbol("skip"),yi=Symbol("doChown"),Ei=Symbol("uid"),gi=Symbol("gid"),_i=Symbol("checkedCwd"),Ny=require("crypto"),Ay=gy(),Dx=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,bi=Dx==="win32",kx=(r,e)=>{if(!bi)return Q.unlink(r,e);let t=r+".DELETE."+Ny.randomBytes(16).toString("hex");Q.rename(r,t,n=>{if(n)return e(n);Q.unlink(t,e)})},Lx=r=>{if(!bi)return Q.unlinkSync(r);let e=r+".DELETE."+Ny.randomBytes(16).toString("hex");Q.renameSync(r,e),Q.unlinkSync(e)},Ty=(r,e,t)=>r===r>>>0?r:e===e>>>0?e:t,Cy=r=>Ax(Nx(Qe(r))).toLowerCase(),Px=(r,e)=>{e=Cy(e);for(let t of r.keys()){let n=Cy(t);(n===e||n.indexOf(e+"/")===0)&&r.delete(t)}},Ux=r=>{for(let e of r.keys())r.delete(e)},vi=class extends Ox{constructor(e){if(e||(e={}),e.ondone=t=>{this[Ou]=!0,this[Tu]()},super(e),this[_i]=!1,this.reservations=Cx(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[po]=0,this[Ou]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||bi,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Qe(Gt.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",t=>this[by](t))}warn(e,t,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,t,n)}[Tu](){this[Ou]&&this[po]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[xy](e){if(this.strip){let t=Qe(e.path).split("/");if(t.length<this.strip)return!1;if(e.path=t.slice(this.strip).join("/"),e.type==="Link"){let n=Qe(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let t=Qe(e.path),n=t.split("/");if(n.includes("..")||bi&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;let[i,s]=Ix(t);i&&(e.path=s,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:t}))}if(Gt.isAbsolute(e.path)?e.absolute=Qe(Gt.resolve(e.path)):e.absolute=Qe(Gt.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Qe(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:t}=Gt.win32.parse(e.absolute);e.absolute=t+_y.encode(e.absolute.substr(t.length));let{root:n}=Gt.win32.parse(e.path);e.path=n+_y.encode(e.path.substr(n.length))}return!0}[by](e){if(!this[xy](e))return e.resume();switch(xx.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Cu](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[Ry](e)}}[De](e,t){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[Nn](),t.resume())}[ur](e,t,n){Iy(Qe(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t,noChmod:this.noChmod},n)}[yi](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Ei](e){return Ty(this.uid,e.uid,this.processUid)}[gi](e){return Ty(this.gid,e.gid,this.processGid)}[Nu](e,t){let n=e.mode&4095||this.fmode,i=new Tx.WriteStream(e.absolute,{flags:Ay(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&Q.close(i.fd,()=>{}),i.write=()=>!0,this[De](c,e),t()});let s=1,o=c=>{if(c){i.fd&&Q.close(i.fd,()=>{}),this[De](c,e),t();return}--s===0&&Q.close(i.fd,l=>{l?this[De](l,e):this[Nn](),t()})};i.on("finish",c=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){s++;let f=e.atime||new Date,h=e.mtime;Q.futimes(u,f,h,d=>d?Q.utimes(l,f,h,m=>o(m&&d)):o())}if(this[yi](e)){s++;let f=this[Ei](e),h=this[gi](e);Q.fchown(u,f,h,d=>d?Q.chown(l,f,h,m=>o(m&&d)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[De](c,e),t()}),e.pipe(a)),a.pipe(i)}[Au](e,t){let n=e.mode&4095||this.dmode;this[ur](e.absolute,n,i=>{if(i){this[De](i,e),t();return}let s=1,o=a=>{--s===0&&(t(),this[Nn](),e.resume())};e.mtime&&!this.noMtime&&(s++,Q.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[yi](e)&&(s++,Q.chown(e.absolute,this[Ei](e),this[gi](e),o)),o()})}[Ry](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[Sy](e,t){this[Eo](e,e.linkpath,"symlink",t)}[wy](e,t){let n=Qe(Gt.resolve(this.cwd,e.linkpath));this[Eo](e,n,"link",t)}[Oy](){this[po]++}[Nn](){this[po]--,this[Tu]()}[Du](e){this[Nn](),e.resume()}[Iu](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&!bi}[Cu](e){this[Oy]();let t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,n=>this[vy](e,n))}[yo](e){e.type==="SymbolicLink"?Ux(this.dirCache):e.type!=="Directory"&&Px(this.dirCache,e.absolute)}[vy](e,t){this[yo](e);let n=a=>{this[yo](e),t(a)},i=()=>{this[ur](this.cwd,this.dmode,a=>{if(a){this[De](a,e),n();return}this[_i]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=Qe(Gt.dirname(e.absolute));if(a!==this.cwd)return this[ur](a,this.dmode,c=>{if(c){this[De](c,e),n();return}o()})}o()},o=()=>{Q.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[Du](e),n();return}if(a||this[Iu](e,c))return this[at](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[at](f,e,n);return l?Q.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return Q.rmdir(e.absolute,l=>this[at](l,e,n))}if(e.absolute===this.cwd)return this[at](null,e,n);kx(e.absolute,l=>this[at](l,e,n))})};this[_i]?s():i()}[at](e,t,n){if(e){this[De](e,t),n();return}switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[Nu](t,n);case"Link":return this[wy](t,n);case"SymbolicLink":return this[Sy](t,n);case"Directory":case"GNUDumpDir":return this[Au](t,n)}}[Eo](e,t,n,i){Q[n](t,e.absolute,s=>{s?this[De](s,e):(this[Nn](),e.resume()),i()})}},mo=r=>{try{return[null,r()]}catch(e){return[e,null]}},ku=class extends vi{[at](e,t){return super[at](e,t,()=>{})}[Cu](e){if(this[yo](e),!this[_i]){let s=this[ur](this.cwd,this.dmode);if(s)return this[De](s,e);this[_i]=!0}if(e.absolute!==this.cwd){let s=Qe(Gt.dirname(e.absolute));if(s!==this.cwd){let o=this[ur](s,this.dmode);if(o)return this[De](o,e)}}let[t,n]=mo(()=>Q.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[Du](e);if(t||this[Iu](e,n))return this[at](null,e);if(n.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=o?mo(()=>{Q.chmodSync(e.absolute,e.mode)}):[];return this[at](a,e)}let[s]=mo(()=>Q.rmdirSync(e.absolute));this[at](s,e)}let[i]=e.absolute===this.cwd?[]:mo(()=>Lx(e.absolute));this[at](i,e)}[Nu](e,t){let n=e.mode&4095||this.fmode,i=a=>{let c;try{Q.closeSync(s)}catch(l){c=l}(a||c)&&this[De](a||c,e),t()},s;try{s=Q.openSync(e.absolute,Ay(e.size),n)}catch(a){return i(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[De](a,e)),e.pipe(o)),o.on("data",a=>{try{Q.writeSync(s,a,0,a.length)}catch(c){i(c)}}),o.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{Q.futimesSync(s,l,u)}catch(f){try{Q.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[yi](e)){let l=this[Ei](e),u=this[gi](e);try{Q.fchownSync(s,l,u)}catch(f){try{Q.chownSync(e.absolute,l,u)}catch{c=c||f}}}i(c)})}[Au](e,t){let n=e.mode&4095||this.dmode,i=this[ur](e.absolute,n);if(i){this[De](i,e),t();return}if(e.mtime&&!this.noMtime)try{Q.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[yi](e))try{Q.chownSync(e.absolute,this[Ei](e),this[gi](e))}catch{}t(),e.resume()}[ur](e,t){try{return Iy.sync(Qe(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(n){return n}}[Eo](e,t,n,i){try{Q[n+"Sync"](t,e.absolute),i(),e.resume()}catch(s){return this[De](s,e)}}};vi.Sync=ku;Dy.exports=vi});var Fy=E((PD,Uy)=>{"use strict";var Fx=cn(),go=Lu(),Ly=require("fs"),Py=xn(),ky=require("path"),Pu=yn();Uy.exports=(r,e,t)=>{typeof r=="function"?(t=r,e=null,r={}):Array.isArray(r)&&(e=r,r={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let n=Fx(r);if(n.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&Mx(n,e),n.file&&n.sync?qx(n):n.file?Bx(n,t):n.sync?jx(n):Gx(n)};var Mx=(r,e)=>{let t=new Map(e.map(s=>[Pu(s),!0])),n=r.filter,i=(s,o)=>{let a=o||ky.parse(s).root||".",c=s===a?!1:t.has(s)?t.get(s):i(ky.dirname(s),a);return t.set(s,c),c};r.filter=n?(s,o)=>n(s,o)&&i(Pu(s)):s=>i(Pu(s))},qx=r=>{let e=new go.Sync(r),t=r.file,n=Ly.statSync(t),i=r.maxReadSize||16*1024*1024;new Py.ReadStreamSync(t,{readSize:i,size:n.size}).pipe(e)},Bx=(r,e)=>{let t=new go(r),n=r.maxReadSize||16*1024*1024,i=r.file,s=new Promise((o,a)=>{t.on("error",a),t.on("close",o),Ly.stat(i,(c,l)=>{if(c)a(c);else{let u=new Py.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(t)}})});return e?s.then(e,e):s},jx=r=>new go.Sync(r),Gx=r=>new go(r)});var My=E(fe=>{"use strict";fe.c=fe.create=_m();fe.r=fe.replace=yu();fe.t=fe.list=so();fe.u=fe.update=Cm();fe.x=fe.extract=Fy();fe.Pack=Hs();fe.Unpack=Lu();fe.Parse=io();fe.ReadEntry=Ts();fe.WriteEntry=Hc();fe.Header=mn();fe.Pax=Is();fe.types=Oc()});var By,ke,$r,jy,qy,_o,lr,fr,bo=q(()=>{"use strict";By=require("crypto"),ke=require("fs"),$r=Sr(require("path")),jy=require("path");_t();re();kt();Zr();qy=Ya(),_o=My(),{output:lr}=Y(),fr=class{constructor(e,t,n,i){this.encryption=e;this.errorReporter=t;this.context=i;this.storedHashes=[];this.axiosConfigBuilder=e=>e;if(n.customProxyConfigPath){let{fileServerProxyConfig:s}=require((0,jy.join)(process.cwd(),n.customProxyConfigPath));this.axiosConfigBuilder=s??this.axiosConfigBuilder}}async retrieve(e,t,n){process.env.NX_CLOUD_DEBUG_URLS=="true"&&lr.note({title:`Nx Cloud: Downloading ${e}`,bodyLines:[`RETRIEVAL URL: ${t}`]});let i=this.createFileName(e,n),s=this.createCommitFilePath(e,n);try{await this.downloadFile(t,i,s),this.createCommitFile(s),L&&lr.note({title:`Nx Cloud: Downloaded ${e}`})}catch(o){let a=o.message||o.toString(),c;throw a.includes("zlib")||a.includes("gzip")||a.includes("TAR_BAD_ARCHIVE")?c="Failed to untar cached artifacts. The artifact may be corrupted. Contact cloud-support@nrwl.io for additional assistance.":a.includes("decrypt")?c="Failed to decrypt artifact. Please review your encryption key.":c="Failed to download cached artifacts. Enable NX_VERBOSE_LOGGING for more details.",L&&lr.note({title:`${c}`,bodyLines:[`- ${o.message}`,`- Affected artifact: ${e} in context ${this.context}.`]}),(this.context==="dte-agent"||this.context==="dte-main")&&(lr.note({title:`An error occurred while trying to retrieve artifacts in the ${this.context} context. Hash: ${e}.`,bodyLines:["- Please update the nx-cloud package to the latest version.","- Please update the nx package to 15.8.9 or higher. You can do it without updating the plugins.","- If you are not able to update the nx package, and you are passing --configuration to a run-many or an affected command, define that configuration for all the projects."]}),process.env.NX_CLOUD_DEBUG_URLS=="true"&&lr.note({title:`URL: ${e}`})),await this.errorReporter.reportError(c),new Error(c)}}async store(e,t,n){process.env.NX_CLOUD_DEBUG_URLS=="true"&&lr.note({title:`Nx Cloud: Storing ${e}`,bodyLines:[`STORAGE URL: ${t}`]});let i;if(process.env.NRWL_INTERNAL_TAR_DEBUG){let o=1,a=!1,c=[];for(;o<=3&&!a;){i=await this.createFile(e,n);let l=`/tmp/${e}/attempt${o}`;(0,ke.mkdirSync)(l,{recursive:!0});try{let u=(0,ke.createReadStream)(i).pipe(_o.x({cwd:l}));await this.convertStreamIntoPromise(u),a=!0}catch(u){console.error(u),await Ge(5e3)}c.push({attempt:o,success:a}),o++}if(c.some(l=>!l.success)){console.error(JSON.stringify(c,null,2));let l=c.filter(u=>!u.success).map(u=>u.attempt).join(", ");throw new Error(`Untar failed for hash ${e} in attempts ${l} out of ${c.length}`)}}else i=await this.createFile(e,n);await this.uploadFile(t,i),this.storedHashes.push(e),L&&lr.note({title:`Nx Cloud: Stored ${e}`})}createFileName(e,t){return $r.join(t,`${e}.tar.gz`)}async downloadFile(e,t,n){var o;let i=Ce("retrieveFile"),s;try{let a=new URL(e),c=a.origin+a.pathname,l={};for(let[u,f]of a.searchParams.entries())l[u]=f;s=await ce(()=>qy(c,this.axiosConfigBuilder({method:"GET",responseType:"stream",maxContentLength:gt?Jn:Zn,maxBodyLength:gt?Jn:Zn,timeout:gt?Yn:6e4,params:l}))),i.recordMetric({...ne(s),payloadSize:s.data.headers["content-length"]})}catch(a){throw i.recordMetric((o=a==null?void 0:a.axiosException)!=null&&o.response?ne(a.axiosException.response):Ie),a}if((0,ke.existsSync)(t)){let a=0;for(;a++<50;){if((0,ke.existsSync)(n))return;await Ge(500)}}if(this.encryption.hasEncryption()){await new Promise(c=>{s.data.pipe((0,ke.createWriteStream)(t)).on("close",()=>c(null))}),this.encryption.decryptFile(t);let a=(0,ke.createReadStream)(t).pipe(_o.x({cwd:$r.dirname(t)}));return this.convertStreamIntoPromise(a)}else{let a=s.data.pipe(_o.x({cwd:$r.dirname(t)}));return this.convertStreamIntoPromise(a)}}convertStreamIntoPromise(e){return new Promise((t,n)=>{e.on("error",i=>{i.tarCode==="TAR_ABORT"&&i.message.indexOf("incorrect header check")>-1?(console.warn("FileStorage: Decompression OK, Trailing garbage ignored."),t(null)):n(i)}),e.on("close",()=>t(null))})}createCommitFile(e){(0,ke.writeFileSync)(e,"true")}createCommitFilePath(e,t){return $r.join(t,`${e}.commit`)}async createFile(e,t){let n=this.createFileName(e,t);try{(0,ke.unlinkSync)($r.join(t,e,"source"))}catch{}return await _o.c({gzip:!0,file:n,cwd:t},[e]),this.encryption.hasEncryption()&&this.encryption.encryptFile(n),n}async uploadFile(e,t){var a;process.env.NX_CLOUD_ECONNABORTED_LOGGING=="true"&&lr.note({title:`Attempting to upload file with path: ${t}`});let n=Ce("storeFile"),i=(0,ke.readFileSync)(t),s=this.generateMD5(i),o=this.getFileUploadHeaders(e,s);try{let c=await ce(()=>qy(e,this.axiosConfigBuilder({method:"PUT",data:i,headers:o,maxContentLength:gt?Jn:Zn,maxBodyLength:gt?Jn:Zn,timeout:gt?Yn:12e4})));n.recordMetric({...ne(c),payloadSize:c.config.headers["Content-Length"]})}catch(c){if(c.message&&c.message.includes("RetentionPolicyNotMet"))return;throw n.recordMetric((a=c==null?void 0:c.axiosException)!=null&&a.response?ne(c.axiosException.response):Ie),c}}generateMD5(e){let t=(0,By.createHash)("md5");return t.update(e),t.digest("base64")}getFileUploadHeaders(e,t){let n=e.includes("/file/"),i={"Content-Type":"application/octet-stream","x-ms-blob-type":"BlockBlob"};return n&&(i["Content-MD5"]=t),i}}});var vo,Gy=q(()=>{"use strict";re();ii();vo=class{constructor(e,t,n){this.runContext=e;this.taskExecutions=t;this.distributedExecutionId=n}printCacheHitsMessage(){if(ut(this.distributedExecutionId)||!this.runContext.runUrl)return;let e=!!this.taskExecutions.find(s=>s.status!==0),t=!!this.taskExecutions.find(s=>s.cacheStatus==="cache-miss"),n=this.taskExecutions.filter(s=>this.runContext.statuses[s.hash]==="remote-cache-hit").map(s=>s.projectName),i=[];if(e)i.push(`View structured, searchable error logs at ${this.runContext.runUrl}`);else if(t)i.push(`View logs and investigate cache misses at ${this.runContext.runUrl}`);else if(n.length>0){let s=n.length===1?n[0]:`${n.length} tasks`;i.push(`Nx Cloud made it possible to reuse ${s}: ${this.runContext.runUrl}`)}else this.runContext.runUrl&&i.push(`View logs and run details at ${this.runContext.runUrl}`);i.length>0&&Kt(i.join(" "))}}});var $x,An,Uu=q(()=>{"use strict";ii();({output:$x}=Y()),An=class{constructor(e){this.options=e;this.cacheError=null;this.apiError=null;this.message=null}get anyErrors(){return this.cacheError||this.apiError}printMessages(){if(this.anyErrors){let e=[];this.cacheError&&e.push(`- ${this.cacheError}`),this.apiError&&this.apiError!==this.cacheError&&e.push(`- ${this.apiError}`),$x.warn({title:"Nx Cloud Problems",bodyLines:e})}this.message&&Kt(this.message)}extractErrorMessage(e,t){if(e.code==="ECONNABORTED")return process.env.NX_CLOUD_ECONNABORTED_LOGGING=="true"&&(console.log("[NX CLOUD DEBUG] Request config without `data`"),delete e.config.data,console.log(JSON.stringify(e.config,null,2))),`Cannot connect to Nx Cloud (scope: ${t}, code: ${e.code}). Try invoking the command with the NX_CLOUD_NO_TIMEOUTS env variable set to 'true'.`;if(e.code==="ECONNREFUSED"||e.code==="EAI_AGAIN"||e.code==="ENOTFOUND"||e.code==="EPROTO")return`Cannot connect to Nx Cloud (scope: ${t}, code: ${e.code}).`;if(e.response&&e.response.status===401)return e.response.data.message?e.response.data.message:e.response.data;if(e.response&&e.response.status===402)return this.options.showUsageWarnings===!1||this.options.showUsageWarnings===void 0?null:e.response.data.message?e.response.data.message:e.response.data;{let n="";e.response&&e.response.data&&e.response.data.message?n=`. ${e.response.data.message}`:e.response&&e.response.data&&(n=`. ${e.response.data}`);let i=e.code?` (code: ${e.code})`:"";return`${e.message}${n}${i}`}}}});var hr,So=q(()=>{"use strict";hr=class{constructor(e=[]){this.normalizedMaskedProperties=[];this.normalizedMaskedProperties=Array.from(new Set(e)).map(this.toCamelCase)}obfuscate(e){return this.normalizedMaskedProperties.length&&(this.normalizedMaskedProperties.forEach(n=>{let i=new RegExp(`(--${n}=)[\\S]*`);e=e.replace(i,"$1********")}),this.normalizedMaskedProperties.filter(n=>n in process.env).map(n=>process.env[n]).forEach(n=>{e=e.replace(n,"********")})),e}toCamelCase(e){return e.indexOf("-")>1?e.toLowerCase().replace(/-(.)/g,(t,n)=>n.toUpperCase()):e}}});function Dn(r){return r.overrides.__overrides_unparsed__?r.overrides.__overrides_unparsed__.join(" "):Fu(r.overrides).join(" ")}function Fu(r){let e=[];for(let t of Object.keys(r)){let n=r[t];$y(t,n,e)}return e}function $y(r,e,t){if(r==="_")t.push(...e);else if(e===!0)t.push(`--${r}`);else if(e===!1)t.push(`--no-${r}`);else if(Array.isArray(e))e.forEach(n=>$y(r,n,t));else if(typeof e=="string"&&Hx(e)){let n=e.replace(/"/g,String.raw`\"`);t.push(`--${r}="${n}"`)}else e!=null&&t.push(`--${r}=${e}`)}function Hx(r){return r.includes(" ")||r.includes("{")||r.includes('"')}var Si=q(()=>{"use strict"});function wo(r,e,t,n,i){let s;r?r.startsWith("./")?s=(0,Bu.join)(Hy,r):s=r:s=(0,Bu.join)(Hy,"node_modules",".cache","nx");try{let o=Xx(s,t),a=e.obfuscate(o);if(hh)return a;let c=n==="cache-miss"?i===0?Vx:zx:Wx;return a.length>c?`TRUNCATED

${a.slice(a.length-c)}`:a}catch(o){return process.env.NX_VERBOSE_LOGGING==="true"&&console.error(o),""}}function Xx(r,e){try{return(0,Mu.readFileSync)(qu.join(r,"terminalOutputs",e)).toString()}catch{try{return(0,Mu.readFileSync)(qu.join(r,e,"terminalOutput")).toString()}catch{return""}}}var Mu,qu,Bu,Hy,zx,Vx,Wx,ju=q(()=>{"use strict";Mu=require("fs"),qu=Sr(require("path")),Bu=require("path");re();({workspaceRoot:Hy}=Y()),zx=2e5,Vx=2e4,Wx=2e4});var zy,Ro,Vy=q(()=>{"use strict";zy=require("crypto");Si();ju();Ro=class{constructor(e,t,n,i,s,o){this.runContext=e;this.cacheDirectory=t;this.collectTerminalOutput=n;this.cacheableOperations=i;this.outputObfuscator=s;this.tasks=o}scheduleTask(e){this.runContext.scheduledTasks.push(e)}startTask(e){this.tasks.push({taskId:e.id,startTime:new Date().toISOString(),target:e.target.target,projectName:e.target.project,hash:e.hash,hashDetails:this.cleanUpHashDetails(e.hashDetails),params:Dn(e),uploadedToStorage:!1})}endTasks(e){for(let t of e){let n,i=t.status==="remote-cache",s=t.status==="cache",o=t.status==="local-cache"||t.status==="local-cache-kept-existing"||s;this.runContext.statuses[t.task.hash]?n=this.runContext.statuses[t.task.hash]:i?n="remote-cache-hit":o?n="local-cache-hit":n="cache-miss",this.updateStartedTask(t,n)}}endCommand(){}updateStartedTask(e,t){let n=this.tasks.find(i=>i.taskId===e.task.id);if(!n)throw new Error(`Cannot find task ${e.task.id}`);e!=null&&e.startTime&&(e!=null&&e.endTime)?(n.startTime=new Date(e.startTime).toISOString(),n.endTime=new Date(e.endTime).toISOString()):n.endTime=new Date().toISOString(),n.status=e.code,n.params=this.outputObfuscator.obfuscate(n.params),n.cacheStatus=t,this.collectTerminalOutput&&(n.terminalOutput=this.getTerminalOutput(e.task.hash,n.cacheStatus,e.code))}getTerminalOutput(e,t,n){return wo(this.cacheDirectory,this.outputObfuscator,e,t,n)}cleanUpHashDetails(e){let t={},n=[];for(let i of Object.keys(e.nodes))i.startsWith("npm:")?n.push(e.nodes[i]):t[i]=e.nodes[i];if(n.sort(),n.length>0){let i=(0,zy.createHash)("md5");i.update(n.join("|")),t.npmDependencies=i.digest("base64")}return{nodes:t,runtime:e.runtime,implicitDeps:e.implicitDeps}}}});var Gu,xo,Wy=q(()=>{"use strict";re();({output:Gu}=Y()),xo=class{constructor(e,t,n,i,s,o){this.messages=e;this.api=t;this.runContext=n;this.fileStorage=i;this.distributedExecutionId=s;this.storeInCurrentProcess=o;this.storeRequests=[];this.delayedStoreRequests=[]}async retrieve(e,t){if(this.messages.cacheError)return!1;let n=await this.hashUrls(e);if(!n||!n.get)return L&&Gu.note({title:`Nx Cloud: Cache miss ${e}.`}),this.runContext.statuses[e]="cache-miss",!1;try{return await this.fileStorage.retrieve(e,n.get,t),this.runContext.statuses[e]="remote-cache-hit",!0}catch(i){let s=i.axiosException??i;return s.response&&s.response.status===404?L&&Gu.note({title:`Nx Cloud: Cache miss ${e}. Status 404.`}):this.messages.cacheError=this.messages.extractErrorMessage(s,"storage"),this.runContext.statuses[e]="cache-miss",!1}}async store(e,t){if(this.messages.cacheError)return!1;let n=Promise.resolve().then(async()=>{let i=await this.hashUrls(e);if(!i)return!1;if(!i.put)return L&&Gu.note({title:`Nx Cloud: Skipping storing ${e}.`,bodyLines:["There are several reasons why this can happen.","Maybe you are using a read-only token or the artifact has already being uploaded."]}),!0;if(!this.storeInCurrentProcess)return this.delayedStoreRequests.push({hash:e,url:i.put}),!0;try{return await this.fileStorage.store(e,i.put,t),!0}catch(s){let o=s.axiosException??s;return this.messages.cacheError=this.messages.extractErrorMessage(o,"storage"),!1}});return this.storeRequests.push(n),n}async hashUrls(e){if(e in this.runContext.requests){let t=(await this.runContext.requests[e])[e];return this.setTaskArtifactIdOnRunContext(e,t==null?void 0:t.artifactId),t==null?void 0:t.artifactUrls}else{let t=this.runContext.scheduledTasks.filter(s=>!this.runContext.requests[s.hash]).map(s=>s.hash);t.indexOf(e)===-1&&t.push(e);let n=this.api.startRun(this.distributedExecutionId,t);t.forEach(s=>{this.runContext.requests[s]=n});let i=(await n)[e];return this.setTaskArtifactIdOnRunContext(e,i==null?void 0:i.artifactId),i==null?void 0:i.artifactUrls}}async waitForStoreRequestsToComplete(){if(!await Promise.all(this.storeRequests).then(t=>t.reduce((n,i)=>n&&i,!0)))throw new Error("Error when storing artifacts")}setTaskArtifactIdOnRunContext(e,t){let n=this.runContext.allTasks.find(i=>i.hash===e);if(n===void 0)throw Error("Could not find task with hash $hash");n.artifactId=t}}});function dr(){for(let r of Object.values(Kx))if(r.detectorFn(process.env)){let e=r.contextRetrieverFn(process.env);return L&&console.log(JSON.stringify(e,null,2)),{...e,inferredFromTaskRunner:!0}}return L&&console.log("[Nx Cloud] Did not identify a VCS platform."),null}function Yx(r){return r.CIRCLECI==="true"}function Jx(r){L&&console.log("[Nx Cloud] Detected Env: CircleCI");let e=n=>{if(n.CIRCLE_PR_NUMBER!==void 0)return n.CIRCLE_PR_NUMBER;if(n.CIRCLE_PULL_REQUEST!==void 0){let i=n.CIRCLE_PULL_REQUEST.split("/");return i[i.length-1]}return n.CIRCLE_BRANCH!==void 0?n.CIRCLE_BRANCH:"unknown"},t=n=>n.CIRCLE_USERNAME!==void 0?n.CIRCLE_USERNAME:n.CIRCLE_PR_USERNAME?n.CIRCLE_PR_USERNAME:null;return{branch:e(r),ref:r.CIRCLE_BRANCH??null,title:Hu(),headSha:r.CIRCLE_SHA1??"unknown",baseSha:null,commitLink:r.CIRCLE_PULL_REQUEST??null,author:t(r),authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.CIRCLE_REPOSITORY_URL??null}}function Zx(r){return r.TRAVIS==="true"}function Qx(r){return L&&console.log("[Nx Cloud] Detected Env: TravisCI"),{branch:(t=>t.TRAVIS_EVENT_TYPE==="pull_request"?t.TRAVIS_PULL_REQUEST:t.TRAVIS_BRANCH)(r),ref:null,title:r.TRAVIS_COMMIT_MESSAGE,headSha:r.TRAVIS_COMMIT??"unknown",baseSha:null,commitLink:null,author:Xy(),authorUrl:null,authorAvatarUrl:null,repositoryUrl:null}}function eO(r){return r.GITHUB_ACTIONS==="true"}function tO(r){L&&console.log("[Nx Cloud] Detected Env: GitHub Actions");let e=i=>{if(i.GITHUB_REF){let s=i.GITHUB_REF.match(/refs\/pull\/(\d+)\/merge/);if(s)return s[1]}return i.GITHUB_HEAD_REF?i.GITHUB_HEAD_REF:i.GITHUB_REF_NAME?i.GITHUB_REF_NAME:"unknown"},t=i=>{let s=`${i.GITHUB_SERVER_URL}/${i.GITHUB_REPOSITORY}`;return i.GITHUB_EVENT_NAME==="pull_request"?`${s}/pull/${e(i)}`:`${s}/commit/${i.GITHUB_SHA}`},n=i=>i.GITHUB_HEAD_REF?i.GITHUB_HEAD_REF:i.GITHUB_REF?i.GITHUB_REF:null;return{branch:e(r),ref:n(r),title:Hu(),headSha:r.GITHUB_SHA??"unknown",baseSha:null,commitLink:t(r),author:r.GITHUB_ACTOR??null,authorUrl:`https://github.com/${r.GITHUB_ACTOR}`,authorAvatarUrl:`https://avatars.githubusercontent.com/u/${r.GITHUB_ACTOR_ID}`,repositoryUrl:`${r.GITHUB_SERVER_URL}/${r.GITHUB_REPOSITORY}`}}function rO(r){return r.BITBUCKET_BUILD_NUMBER!=null}function nO(r){return L&&console.log("[Nx Cloud] Detected Env: BitBucket Pipelines"),{branch:r.BITBUCKET_PR_ID??r.BITBUCKET_BRANCH??"unknown",ref:null,title:Hu(),headSha:r.BITBUCKET_COMMIT??"unknown",baseSha:null,commitLink:null,author:Xy(),authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.BITBUCKET_GIT_HTTP_ORIGIN??null}}function iO(r){return r.BUILD_BUILDID!==void 0&&r.AGENT_NAME!==void 0}function sO(r){return L&&console.log("[Nx Cloud] Detected Env: Azure DevOps"),{branch:r.SYSTEM_PULLREQUEST_PULLREQUESTNUMBER??r.BUILD_SOURCEBRANCHNAME??"unknown",ref:null,title:r.BUILD_SOURCEVERSIONMESSAGE??null,headSha:tt()??"unknown",baseSha:null,commitLink:null,author:r.BUILD_REQUESTEDFOR??null,authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.SYSTEM_PULLREQUEST_SOURCEREPOSITORYURI??r.BUILD_REPOSITORY_URI??null}}function oO(r){return r.GITLAB_CI==="true"}function aO(r){return L&&console.log("[Nx Cloud] Detected Env: GitLab Pipelines"),{branch:(t=>t.CI_MERGE_REQUEST_IID?t.CI_MERGE_REQUEST_IID:t.CI_COMMIT_BRANCH?t.CI_COMMIT_BRANCH:"unknown")(r),ref:r.CI_COMMIT_REF_NAME??null,title:r.CI_COMMIT_MESSAGE??null,headSha:tt()??"unknown",baseSha:null,commitLink:null,author:r.GITLAB_USER_NAME??null,authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.CI_REPOSITORY_URL??null}}function Hu(){try{return(0,$u.execSync)("git log -1 --pretty=%B",{encoding:"utf-8"}).trim()}catch{return null}}function Xy(){try{return(0,$u.execSync)("git log -1 --pretty=%aN",{encoding:"utf-8"}).trim()}catch{return null}}var $u,Kx,Oo=q(()=>{"use strict";$u=require("child_process");re();Kx={CIRCLE_CI:{detectorFn:Yx,contextRetrieverFn:Jx},TRAVIS_CI:{detectorFn:Zx,contextRetrieverFn:Qx},GITHUB_ACTIONS:{detectorFn:eO,contextRetrieverFn:tO},BITBUCKET_PIPELINES:{detectorFn:rO,contextRetrieverFn:nO},AZURE_DEVOPS:{detectorFn:iO,contextRetrieverFn:sO},GITLAB_PIPELINES:{detectorFn:oO,contextRetrieverFn:aO}}});var Ky,Yy,Jy,To,kn,zu=q(()=>{"use strict";Ky=require("fs"),Yy=require("util"),Jy=require("zlib");_t();re();Oo();kt();({output:To}=Y()),kn=class{constructor(e,t,n,i){this.messages=e;this.runContext=t;this.machineInfo=i;this.apiAxiosInstance=Te(n)}async startRun(e,t){var i;if(this.messages.apiError)return{};let n=Ce("startRun");try{let s={meta:{nxCloudVersion:this.nxCloudVersion()},branch:me(),runGroup:ve(),ciExecutionId:je(),ciExecutionEnv:xe(),distributedExecutionId:e,hashes:t,machineInfo:this.machineInfo,vcsContext:dr()};L&&To.note({title:"RunStart",bodyLines:[`
`+JSON.stringify(s,null,2)]});let o=await Qa("RunStart duration",()=>ce(()=>this.apiAxiosInstance.post("/nx-cloud/v2/runs/start",s)));return n.recordMetric(ne(o)),o.data&&o.data.message&&(this.messages.message=o.data.message),!o.data||!o.data.artifacts?(this.messages.apiError=`Invalid Nx Cloud response: ${JSON.stringify(o.data)}`,{}):o.data.artifacts}catch(s){return n.recordMetric((i=s==null?void 0:s.axiosException)!=null&&i.response?ne(s.axiosException.response):Ie),this.messages.apiError=this.messages.extractErrorMessage(s,"api"),{}}}createReqBody(e,t,n,i){let s={meta:{nxCloudVersion:this.nxCloudVersion()},tasks:t,run:e,linkId:i,...n,machineInfo:this.machineInfo,vcsContext:dr()};return JSON.stringify(s)}async endRun(e,t,n,i){var l;if(this.messages.apiError)return!1;e.runGroup=null,e.branch=null;let s=this.createReqBody(e,t,n,i);s.length>20*1e3*1e3&&(s=this.createReqBody(e,t.map(u=>({...u,hashDetails:void 0})),n,i));let o=Buffer.from(s),a=await(0,Yy.promisify)(Jy.gzip)(o),c=Ce("endRun");try{if(L){let f=t.map(h=>({...h,terminalOutput:h.terminalOutput?`${h.terminalOutput.slice(0,20)}...`:void 0}));To.note({title:"RunEnd. Completed tasks",bodyLines:[`
`+JSON.stringify(f,null,2)]})}let u=await Qa("RunEnd duration",()=>ce(()=>this.apiAxiosInstance.post("/nx-cloud/runs/end",a,{headers:{...this.apiAxiosInstance.defaults.headers,"Content-Encoding":"gzip","Content-Type":"application/octet-stream"}})));if(u){if(c.recordMetric(ne(u)),u.data&&u.data.runUrl&&u.data.status==="success")return this.runContext.runUrl=u.data.runUrl,!0;u.data&&u.data.status?this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data.message)}`:u.data&&typeof u.data=="string"?u.data!=="success"&&(this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data)}`):this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data)}`,L&&To.note({title:"Invalid end run response",bodyLines:[JSON.stringify(u.data,null,2)]})}else To.error({title:"Nx Cloud: Unknown Error Occurred",bodyLines:["Run completion responded with `undefined`.","Run Details:",JSON.stringify(e,null,2),"Stack Trace:",JSON.stringify(new Error().stack,null,2)]});return!1}catch(u){c.recordMetric((l=u==null?void 0:u.axiosException)!=null&&l.response?ne(u.axiosException.response):Ie);let f=u.axiosException??u;return this.messages.apiError=this.messages.extractErrorMessage(f,"api"),!1}}nxCloudVersion(){try{let e=JSON.parse((0,Ky.readFileSync)("package.json").toString());return e.devDependencies["nx-cloud"]||e.devDependencies["@nrwl/nx-cloud"]}catch{return"unknown"}}}});function Co(){let r="";for(let e=0;e<10;++e)r+=Zy[Math.floor(Math.random()*Zy.length)];return r}var Qy,cO,uO,Zy,Vu=q(()=>{"use strict";Qy="ABCDEFGHIJKLMNOPQRSTUVWXYZ",cO="0123456789",uO=Qy.toLowerCase(),Zy=Qy+uO+cO});var dt=E(qe=>{"use strict";var Wu=require("path");Rr();try{try{let r;try{r=ie("nx/src/utils/app-root").workspaceRoot}catch{r=ie("nx/src/utils/workspace-root").workspaceRoot}let{getDependencyConfigs:e}=ie("nx/src/tasks-runner/utils"),t=ie("nx/tasks-runners/default").default,{CompositeLifeCycle:n}=ie("nx/src/tasks-runner/life-cycle"),i=null;try{i=ie("nx/src/index").initTasksRunner}catch{}let s;try{s=ie("nx/src/devkit-exports").cacheDir}catch{try{s=ie("nx/src/utils/cache-directory").cacheDir}catch{s=(0,Wu.join)(r,"./node_modules/.cache/nx")}}let o=ie("nx/src/tasks-runner/utils").isCacheableTask;qe.cacheDirectory=s,qe.runnerReturnsPromise=!0,qe.tasksRunner=t,qe.CompositeLifeCycle=n,qe.getDependencyConfigs=e,qe.initTasksRunner=i,qe.isCacheableTask=o}catch{let{appRootPath:e}=ie("@nrwl/tao/src/utils/app-root"),{getDependencyConfigs:t}=ie("@nrwl/workspace/src/tasks-runner/utils"),{tasksRunnerV2:n}=ie("@nrwl/workspace/src/tasks-runner/tasks-runner-v2"),i;try{i=ie("@nrwl/workspace/src/tasks-runner/life-cycle").CompositeLifeCycle}catch{}let s=ie("@nrwl/workspace/src/tasks-runner/utils").isCacheableTask;qe.cacheDirectory=(0,Wu.join)(e,"./node_modules/.cache/nx"),qe.runnerReturnsPromise=!1,qe.tasksRunner=n,qe.CompositeLifeCycle=i,qe.getDependencyConfigs=t,qe.initTasksRunner=null,qe.isCacheableTask=s}}catch(r){process.env.NX_VERBOSE_LOGGING==="true"&&console.log(r),console.error("NX CLOUD ERROR"),console.error("---------------------------------------"),console.error("This version of Nx Cloud is incompatible with the @nrwl/* and @nx/* packages in your workspace, or Nx was not installed properly."),console.error(""),console.error("Verify your install step was successful, and if it was,"),console.error("match your @nrwl/nx-cloud version to the same major version of your @nx/* and @nrwl/* packages and try again."),console.error("---------------------------------------"),process.exit(1)}});var We=E(Xu=>{"use strict";Xu.fromCallback=function(r){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")r.apply(this,arguments);else return new Promise((e,t)=>{arguments[arguments.length]=(n,i)=>{if(n)return t(n);e(i)},arguments.length++,r.apply(this,arguments)})},"name",{value:r.name})};Xu.fromPromise=function(r){return Object.defineProperty(function(){let e=arguments[arguments.length-1];if(typeof e!="function")return r.apply(this,arguments);r.apply(this,arguments).then(t=>e(null,t),e)},"name",{value:r.name})}});var tE=E((dk,eE)=>{"use strict";var pr=require("constants"),lO=process.cwd,Io=null,fO=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Io||(Io=lO.call(process)),Io};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Ku=process.chdir,process.chdir=function(r){Io=null,Ku.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ku));var Ku;eE.exports=hO;function hO(r){pr.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(r),r.lutimes||t(r),r.chown=s(r.chown),r.fchown=s(r.fchown),r.lchown=s(r.lchown),r.chmod=n(r.chmod),r.fchmod=n(r.fchmod),r.lchmod=n(r.lchmod),r.chownSync=o(r.chownSync),r.fchownSync=o(r.fchownSync),r.lchownSync=o(r.lchownSync),r.chmodSync=i(r.chmodSync),r.fchmodSync=i(r.fchmodSync),r.lchmodSync=i(r.lchmodSync),r.stat=a(r.stat),r.fstat=a(r.fstat),r.lstat=a(r.lstat),r.statSync=c(r.statSync),r.fstatSync=c(r.fstatSync),r.lstatSync=c(r.lstatSync),r.chmod&&!r.lchmod&&(r.lchmod=function(u,f,h){h&&process.nextTick(h)},r.lchmodSync=function(){}),r.chown&&!r.lchown&&(r.lchown=function(u,f,h,d){d&&process.nextTick(d)},r.lchownSync=function(){}),fO==="win32"&&(r.rename=typeof r.rename!="function"?r.rename:function(u){function f(h,d,m){var b=Date.now(),p=0;u(h,d,function w(k){if(k&&(k.code==="EACCES"||k.code==="EPERM"||k.code==="EBUSY")&&Date.now()-b<6e4){setTimeout(function(){r.stat(d,function(O,C){O&&O.code==="ENOENT"?u(h,d,w):m(k)})},p),p<100&&(p+=10);return}m&&m(k)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(r.rename)),r.read=typeof r.read!="function"?r.read:function(u){function f(h,d,m,b,p,w){var k;if(w&&typeof w=="function"){var O=0;k=function(C,P,T){if(C&&C.code==="EAGAIN"&&O<10)return O++,u.call(r,h,d,m,b,p,k);w.apply(this,arguments)}}return u.call(r,h,d,m,b,p,k)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(r.read),r.readSync=typeof r.readSync!="function"?r.readSync:function(u){return function(f,h,d,m,b){for(var p=0;;)try{return u.call(r,f,h,d,m,b)}catch(w){if(w.code==="EAGAIN"&&p<10){p++;continue}throw w}}}(r.readSync);function e(u){u.lchmod=function(f,h,d){u.open(f,pr.O_WRONLY|pr.O_SYMLINK,h,function(m,b){if(m){d&&d(m);return}u.fchmod(b,h,function(p){u.close(b,function(w){d&&d(p||w)})})})},u.lchmodSync=function(f,h){var d=u.openSync(f,pr.O_WRONLY|pr.O_SYMLINK,h),m=!0,b;try{b=u.fchmodSync(d,h),m=!1}finally{if(m)try{u.closeSync(d)}catch{}else u.closeSync(d)}return b}}function t(u){pr.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(f,h,d,m){u.open(f,pr.O_SYMLINK,function(b,p){if(b){m&&m(b);return}u.futimes(p,h,d,function(w){u.close(p,function(k){m&&m(w||k)})})})},u.lutimesSync=function(f,h,d){var m=u.openSync(f,pr.O_SYMLINK),b,p=!0;try{b=u.futimesSync(m,h,d),p=!1}finally{if(p)try{u.closeSync(m)}catch{}else u.closeSync(m)}return b}):u.futimes&&(u.lutimes=function(f,h,d,m){m&&process.nextTick(m)},u.lutimesSync=function(){})}function n(u){return u&&function(f,h,d){return u.call(r,f,h,function(m){l(m)&&(m=null),d&&d.apply(this,arguments)})}}function i(u){return u&&function(f,h){try{return u.call(r,f,h)}catch(d){if(!l(d))throw d}}}function s(u){return u&&function(f,h,d,m){return u.call(r,f,h,d,function(b){l(b)&&(b=null),m&&m.apply(this,arguments)})}}function o(u){return u&&function(f,h,d){try{return u.call(r,f,h,d)}catch(m){if(!l(m))throw m}}}function a(u){return u&&function(f,h,d){typeof h=="function"&&(d=h,h=null);function m(b,p){p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),d&&d.apply(this,arguments)}return h?u.call(r,f,h,m):u.call(r,f,m)}}function c(u){return u&&function(f,h){var d=h?u.call(r,f,h):u.call(r,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function l(u){if(!u||u.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var iE=E((pk,nE)=>{"use strict";var rE=require("stream").Stream;nE.exports=dO;function dO(r){return{ReadStream:e,WriteStream:t};function e(n,i){if(!(this instanceof e))return new e(n,i);rE.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,c=o.length;a<c;a++){var l=o[a];this[l]=i[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}r.open(this.path,this.flags,this.mode,function(u,f){if(u){s.emit("error",u),s.readable=!1;return}s.fd=f,s.emit("open",f),s._read()})}function t(n,i){if(!(this instanceof t))return new t(n,i);rE.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var c=s[o];this[c]=i[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var oE=E((mk,sE)=>{"use strict";sE.exports=mO;var pO=Object.getPrototypeOf||function(r){return r.__proto__};function mO(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var e={__proto__:pO(r)};else var e=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}});var ge=E((yk,Zu)=>{"use strict";var ue=require("fs"),yO=tE(),EO=iE(),gO=oE(),No=require("util"),we,Do;typeof Symbol=="function"&&typeof Symbol.for=="function"?(we=Symbol.for("graceful-fs.queue"),Do=Symbol.for("graceful-fs.previous")):(we="___graceful-fs.queue",Do="___graceful-fs.previous");function _O(){}function uE(r,e){Object.defineProperty(r,we,{get:function(){return e}})}var Hr=_O;No.debuglog?Hr=No.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Hr=function(){var r=No.format.apply(No,arguments);r="GFS4: "+r.split(/\n/).join(`
GFS4: `),console.error(r)});ue[we]||(aE=global[we]||[],uE(ue,aE),ue.close=function(r){function e(t,n){return r.call(ue,t,function(i){i||cE(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,Do,{value:r}),e}(ue.close),ue.closeSync=function(r){function e(t){r.apply(ue,arguments),cE()}return Object.defineProperty(e,Do,{value:r}),e}(ue.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Hr(ue[we]),require("assert").equal(ue[we].length,0)}));var aE;global[we]||uE(global,ue[we]);Zu.exports=Yu(gO(ue));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!ue.__patched&&(Zu.exports=Yu(ue),ue.__patched=!0);function Yu(r){yO(r),r.gracefulify=Yu,r.createReadStream=P,r.createWriteStream=T;var e=r.readFile;r.readFile=t;function t(I,N,j){return typeof N=="function"&&(j=N,N=null),X(I,N,j);function X(V,J,B,K){return e(V,J,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Ln([X,[V,J,B],$,K||Date.now(),Date.now()]):typeof B=="function"&&B.apply(this,arguments)})}}var n=r.writeFile;r.writeFile=i;function i(I,N,j,X){return typeof j=="function"&&(X=j,j=null),V(I,N,j,X);function V(J,B,K,$,U){return n(J,B,K,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var s=r.appendFile;s&&(r.appendFile=o);function o(I,N,j,X){return typeof j=="function"&&(X=j,j=null),V(I,N,j,X);function V(J,B,K,$,U){return s(J,B,K,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var a=r.copyFile;a&&(r.copyFile=c);function c(I,N,j,X){return typeof j=="function"&&(X=j,j=0),V(I,N,j,X);function V(J,B,K,$,U){return a(J,B,K,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var l=r.readdir;r.readdir=f;var u=/^v[0-5]\./;function f(I,N,j){typeof N=="function"&&(j=N,N=null);var X=u.test(process.version)?function(B,K,$,U){return l(B,V(B,K,$,U))}:function(B,K,$,U){return l(B,K,V(B,K,$,U))};return X(I,N,j);function V(J,B,K,$){return function(U,H){U&&(U.code==="EMFILE"||U.code==="ENFILE")?Ln([X,[J,B,K],U,$||Date.now(),Date.now()]):(H&&H.sort&&H.sort(),typeof K=="function"&&K.call(this,U,H))}}}if(process.version.substr(0,4)==="v0.8"){var h=EO(r);w=h.ReadStream,O=h.WriteStream}var d=r.ReadStream;d&&(w.prototype=Object.create(d.prototype),w.prototype.open=k);var m=r.WriteStream;m&&(O.prototype=Object.create(m.prototype),O.prototype.open=C),Object.defineProperty(r,"ReadStream",{get:function(){return w},set:function(I){w=I},enumerable:!0,configurable:!0}),Object.defineProperty(r,"WriteStream",{get:function(){return O},set:function(I){O=I},enumerable:!0,configurable:!0});var b=w;Object.defineProperty(r,"FileReadStream",{get:function(){return b},set:function(I){b=I},enumerable:!0,configurable:!0});var p=O;Object.defineProperty(r,"FileWriteStream",{get:function(){return p},set:function(I){p=I},enumerable:!0,configurable:!0});function w(I,N){return this instanceof w?(d.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function k(){var I=this;G(I.path,I.flags,I.mode,function(N,j){N?(I.autoClose&&I.destroy(),I.emit("error",N)):(I.fd=j,I.emit("open",j),I.read())})}function O(I,N){return this instanceof O?(m.apply(this,arguments),this):O.apply(Object.create(O.prototype),arguments)}function C(){var I=this;G(I.path,I.flags,I.mode,function(N,j){N?(I.destroy(),I.emit("error",N)):(I.fd=j,I.emit("open",j))})}function P(I,N){return new r.ReadStream(I,N)}function T(I,N){return new r.WriteStream(I,N)}var z=r.open;r.open=G;function G(I,N,j,X){return typeof j=="function"&&(X=j,j=null),V(I,N,j,X);function V(J,B,K,$,U){return z(J,B,K,function(H,le){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}return r}function Ln(r){Hr("ENQUEUE",r[0].name,r[1]),ue[we].push(r),Ju()}var Ao;function cE(){for(var r=Date.now(),e=0;e<ue[we].length;++e)ue[we][e].length>2&&(ue[we][e][3]=r,ue[we][e][4]=r);Ju()}function Ju(){if(clearTimeout(Ao),Ao=void 0,ue[we].length!==0){var r=ue[we].shift(),e=r[0],t=r[1],n=r[2],i=r[3],s=r[4];if(i===void 0)Hr("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-i>=6e4){Hr("TIMEOUT",e.name,t);var o=t.pop();typeof o=="function"&&o.call(null,n)}else{var a=Date.now()-s,c=Math.max(s-i,1),l=Math.min(c*1.2,100);a>=l?(Hr("RETRY",e.name,t),e.apply(null,t.concat([i]))):ue[we].push(r)}Ao===void 0&&(Ao=setTimeout(Ju,0))}}});var Qu=E(Pn=>{"use strict";var bO=We().fromCallback,Tt=ge(),vO=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(r=>typeof Tt[r]=="function");Object.keys(Tt).forEach(r=>{r!=="promises"&&(Pn[r]=Tt[r])});vO.forEach(r=>{Pn[r]=bO(Tt[r])});Pn.exists=function(r,e){return typeof e=="function"?Tt.exists(r,e):new Promise(t=>Tt.exists(r,t))};Pn.read=function(r,e,t,n,i,s){return typeof s=="function"?Tt.read(r,e,t,n,i,s):new Promise((o,a)=>{Tt.read(r,e,t,n,i,(c,l,u)=>{if(c)return a(c);o({bytesRead:l,buffer:u})})})};Pn.write=function(r,e,...t){return typeof t[t.length-1]=="function"?Tt.write(r,e,...t):new Promise((n,i)=>{Tt.write(r,e,...t,(s,o,a)=>{if(s)return i(s);n({bytesWritten:o,buffer:a})})})}});var tl=E((gk,fE)=>{"use strict";var el=require("path");function lE(r){return r=el.normalize(el.resolve(r)).split(el.sep),r.length>0?r[0]:null}var SO=/[<>:"|?*]/;function wO(r){let e=lE(r);return r=r.replace(e,""),SO.test(r)}fE.exports={getRootPath:lE,invalidWin32Path:wO}});var dE=E((_k,hE)=>{"use strict";var RO=ge(),rl=require("path"),xO=tl().invalidWin32Path,OO=parseInt("0777",8);function nl(r,e,t,n){if(typeof e=="function"?(t=e,e={}):(!e||typeof e!="object")&&(e={mode:e}),process.platform==="win32"&&xO(r)){let o=new Error(r+" contains invalid WIN32 path characters.");return o.code="EINVAL",t(o)}let i=e.mode,s=e.fs||RO;i===void 0&&(i=OO&~process.umask()),n||(n=null),t=t||function(){},r=rl.resolve(r),s.mkdir(r,i,o=>{if(!o)return n=n||r,t(null,n);switch(o.code){case"ENOENT":if(rl.dirname(r)===r)return t(o);nl(rl.dirname(r),e,(a,c)=>{a?t(a,c):nl(r,e,t,c)});break;default:s.stat(r,(a,c)=>{a||!c.isDirectory()?t(o,n):t(null,n)});break}})}hE.exports=nl});var mE=E((bk,pE)=>{"use strict";var TO=ge(),il=require("path"),CO=tl().invalidWin32Path,IO=parseInt("0777",8);function sl(r,e,t){(!e||typeof e!="object")&&(e={mode:e});let n=e.mode,i=e.fs||TO;if(process.platform==="win32"&&CO(r)){let s=new Error(r+" contains invalid WIN32 path characters.");throw s.code="EINVAL",s}n===void 0&&(n=IO&~process.umask()),t||(t=null),r=il.resolve(r);try{i.mkdirSync(r,n),t=t||r}catch(s){if(s.code==="ENOENT"){if(il.dirname(r)===r)throw s;t=sl(il.dirname(r),e,t),sl(r,e,t)}else{let o;try{o=i.statSync(r)}catch{throw s}if(!o.isDirectory())throw s}}return t}pE.exports=sl});var et=E((vk,yE)=>{"use strict";var NO=We().fromCallback,ol=NO(dE()),al=mE();yE.exports={mkdirs:ol,mkdirsSync:al,mkdirp:ol,mkdirpSync:al,ensureDir:ol,ensureDirSync:al}});var cl=E((Sk,gE)=>{"use strict";var Le=ge(),EE=require("os"),ko=require("path");function AO(){let r=ko.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));r=ko.join(EE.tmpdir(),r);let e=new Date(1435410243862);Le.writeFileSync(r,"https://github.com/jprichardson/node-fs-extra/pull/141");let t=Le.openSync(r,"r+");return Le.futimesSync(t,e,e),Le.closeSync(t),Le.statSync(r).mtime>1435410243e3}function DO(r){let e=ko.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));e=ko.join(EE.tmpdir(),e);let t=new Date(1435410243862);Le.writeFile(e,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return r(n);Le.open(e,"r+",(i,s)=>{if(i)return r(i);Le.futimes(s,t,t,o=>{if(o)return r(o);Le.close(s,a=>{if(a)return r(a);Le.stat(e,(c,l)=>{if(c)return r(c);r(null,l.mtime>1435410243e3)})})})})})}function kO(r){if(typeof r=="number")return Math.floor(r/1e3)*1e3;if(r instanceof Date)return new Date(Math.floor(r.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function LO(r,e,t,n){Le.open(r,"r+",(i,s)=>{if(i)return n(i);Le.futimes(s,e,t,o=>{Le.close(s,a=>{n&&n(o||a)})})})}function PO(r,e,t){let n=Le.openSync(r,"r+");return Le.futimesSync(n,e,t),Le.closeSync(n)}gE.exports={hasMillisRes:DO,hasMillisResSync:AO,timeRemoveMillis:kO,utimesMillis:LO,utimesMillisSync:PO}});var ul=E((wk,_E)=>{"use strict";_E.exports=function(r){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(r)}catch{return new Buffer(r)}return new Buffer(r)}});var xE=E((Rk,RE)=>{"use strict";var oe=ge(),$t=require("path"),UO=et().mkdirsSync,FO=cl().utimesMillisSync,Lo=Symbol("notExist");function MO(r,e,t){typeof t=="function"&&(t={filter:t}),t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let n=wE(r,e);if(t.filter&&!t.filter(r,e))return;let i=$t.dirname(e);return oe.existsSync(i)||UO(i),bE(n,r,e,t)}function bE(r,e,t,n){if(!(n.filter&&!n.filter(e,t)))return qO(r,e,t,n)}function qO(r,e,t,n){let s=(n.dereference?oe.statSync:oe.lstatSync)(e);if(s.isDirectory())return $O(s,r,e,t,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return BO(s,r,e,t,n);if(s.isSymbolicLink())return VO(r,e,t,n)}function BO(r,e,t,n,i){return e===Lo?vE(r,t,n,i):jO(r,t,n,i)}function jO(r,e,t,n){if(n.overwrite)return oe.unlinkSync(t),vE(r,e,t,n);if(n.errorOnExist)throw new Error(`'${t}' already exists`)}function vE(r,e,t,n){return typeof oe.copyFileSync=="function"?(oe.copyFileSync(e,t),oe.chmodSync(t,r.mode),n.preserveTimestamps?FO(t,r.atime,r.mtime):void 0):GO(r,e,t,n)}function GO(r,e,t,n){let s=ul()(65536),o=oe.openSync(e,"r"),a=oe.openSync(t,"w",r.mode),c=0;for(;c<r.size;){let l=oe.readSync(o,s,0,65536,c);oe.writeSync(a,s,0,l),c+=l}n.preserveTimestamps&&oe.futimesSync(a,r.atime,r.mtime),oe.closeSync(o),oe.closeSync(a)}function $O(r,e,t,n,i){if(e===Lo)return HO(r,t,n,i);if(e&&!e.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`);return SE(t,n,i)}function HO(r,e,t,n){return oe.mkdirSync(t),SE(e,t,n),oe.chmodSync(t,r.mode)}function SE(r,e,t){oe.readdirSync(r).forEach(n=>zO(n,r,e,t))}function zO(r,e,t,n){let i=$t.join(e,r),s=$t.join(t,r),o=wE(i,s);return bE(o,i,s,n)}function VO(r,e,t,n){let i=oe.readlinkSync(e);if(n.dereference&&(i=$t.resolve(process.cwd(),i)),r===Lo)return oe.symlinkSync(i,t);{let s;try{s=oe.readlinkSync(t)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return oe.symlinkSync(i,t);throw o}if(n.dereference&&(s=$t.resolve(process.cwd(),s)),ll(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(oe.statSync(t).isDirectory()&&ll(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return WO(i,t)}}function WO(r,e){return oe.unlinkSync(e),oe.symlinkSync(r,e)}function ll(r,e){let t=$t.resolve(r).split($t.sep),n=$t.resolve(e).split($t.sep);return t.reduce((i,s,o)=>i&&n[o]===s,!0)}function XO(r,e){let t=oe.statSync(r),n;try{n=oe.statSync(e)}catch(i){if(i.code==="ENOENT")return{srcStat:t,destStat:Lo};throw i}return{srcStat:t,destStat:n}}function wE(r,e){let{srcStat:t,destStat:n}=XO(r,e);if(n.ino&&n.ino===t.ino)throw new Error("Source and destination must not be the same.");if(t.isDirectory()&&ll(r,e))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${e}'.`);return n}RE.exports=MO});var fl=E((xk,OE)=>{"use strict";OE.exports={copySync:xE()}});var Ct=E((Ok,CE)=>{"use strict";var KO=We().fromPromise,TE=Qu();function YO(r){return TE.access(r).then(()=>!0).catch(()=>!1)}CE.exports={pathExists:KO(YO),pathExistsSync:TE.existsSync}});var ME=E((Tk,FE)=>{"use strict";var he=ge(),Ht=require("path"),JO=et().mkdirs,ZO=Ct().pathExists,QO=cl().utimesMillis,Po=Symbol("notExist");function eT(r,e,t,n){typeof t=="function"&&!n?(n=t,t={}):typeof t=="function"&&(t={filter:t}),n=n||function(){},t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),UE(r,e,(i,s)=>i?n(i):t.filter?AE(IE,s,r,e,t,n):IE(s,r,e,t,n))}function IE(r,e,t,n,i){let s=Ht.dirname(t);ZO(s,(o,a)=>{if(o)return i(o);if(a)return hl(r,e,t,n,i);JO(s,c=>c?i(c):hl(r,e,t,n,i))})}function AE(r,e,t,n,i,s){Promise.resolve(i.filter(t,n)).then(o=>o?e?r(e,t,n,i,s):r(t,n,i,s):s(),o=>s(o))}function hl(r,e,t,n,i){return n.filter?AE(NE,r,e,t,n,i):NE(r,e,t,n,i)}function NE(r,e,t,n,i){(n.dereference?he.stat:he.lstat)(e,(o,a)=>{if(o)return i(o);if(a.isDirectory())return iT(a,r,e,t,n,i);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return tT(a,r,e,t,n,i);if(a.isSymbolicLink())return aT(r,e,t,n,i)})}function tT(r,e,t,n,i,s){return e===Po?DE(r,t,n,i,s):rT(r,t,n,i,s)}function rT(r,e,t,n,i){if(n.overwrite)he.unlink(t,s=>s?i(s):DE(r,e,t,n,i));else return n.errorOnExist?i(new Error(`'${t}' already exists`)):i()}function DE(r,e,t,n,i){return typeof he.copyFile=="function"?he.copyFile(e,t,s=>s?i(s):kE(r,t,n,i)):nT(r,e,t,n,i)}function nT(r,e,t,n,i){let s=he.createReadStream(e);s.on("error",o=>i(o)).once("open",()=>{let o=he.createWriteStream(t,{mode:r.mode});o.on("error",a=>i(a)).on("open",()=>s.pipe(o)).once("close",()=>kE(r,t,n,i))})}function kE(r,e,t,n){he.chmod(e,r.mode,i=>i?n(i):t.preserveTimestamps?QO(e,r.atime,r.mtime,n):n())}function iT(r,e,t,n,i,s){return e===Po?sT(r,t,n,i,s):e&&!e.isDirectory()?s(new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`)):LE(t,n,i,s)}function sT(r,e,t,n,i){he.mkdir(t,s=>{if(s)return i(s);LE(e,t,n,o=>o?i(o):he.chmod(t,r.mode,i))})}function LE(r,e,t,n){he.readdir(r,(i,s)=>i?n(i):PE(s,r,e,t,n))}function PE(r,e,t,n,i){let s=r.pop();return s?oT(r,s,e,t,n,i):i()}function oT(r,e,t,n,i,s){let o=Ht.join(t,e),a=Ht.join(n,e);UE(o,a,(c,l)=>{if(c)return s(c);hl(l,o,a,i,u=>u?s(u):PE(r,t,n,i,s))})}function aT(r,e,t,n,i){he.readlink(e,(s,o)=>{if(s)return i(s);if(n.dereference&&(o=Ht.resolve(process.cwd(),o)),r===Po)return he.symlink(o,t,i);he.readlink(t,(a,c)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?he.symlink(o,t,i):i(a):(n.dereference&&(c=Ht.resolve(process.cwd(),c)),dl(o,c)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${c}'.`)):r.isDirectory()&&dl(c,o)?i(new Error(`Cannot overwrite '${c}' with '${o}'.`)):cT(o,t,i)))})}function cT(r,e,t){he.unlink(e,n=>n?t(n):he.symlink(r,e,t))}function dl(r,e){let t=Ht.resolve(r).split(Ht.sep),n=Ht.resolve(e).split(Ht.sep);return t.reduce((i,s,o)=>i&&n[o]===s,!0)}function uT(r,e,t){he.stat(r,(n,i)=>{if(n)return t(n);he.stat(e,(s,o)=>s?s.code==="ENOENT"?t(null,{srcStat:i,destStat:Po}):t(s):t(null,{srcStat:i,destStat:o}))})}function UE(r,e,t){uT(r,e,(n,i)=>{if(n)return t(n);let{srcStat:s,destStat:o}=i;return o.ino&&o.ino===s.ino?t(new Error("Source and destination must not be the same.")):s.isDirectory()&&dl(r,e)?t(new Error(`Cannot copy '${r}' to a subdirectory of itself, '${e}'.`)):t(null,o)})}FE.exports=eT});var pl=E((Ck,qE)=>{"use strict";var lT=We().fromCallback;qE.exports={copy:lT(ME())}});var XE=E((Ik,WE)=>{"use strict";var BE=ge(),HE=require("path"),ee=require("assert"),wi=process.platform==="win32";function zE(r){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{r[t]=r[t]||BE[t],t=t+"Sync",r[t]=r[t]||BE[t]}),r.maxBusyTries=r.maxBusyTries||3}function ml(r,e,t){let n=0;typeof e=="function"&&(t=e,e={}),ee(r,"rimraf: missing path"),ee.strictEqual(typeof r,"string","rimraf: path should be a string"),ee.strictEqual(typeof t,"function","rimraf: callback function required"),ee(e,"rimraf: invalid options argument provided"),ee.strictEqual(typeof e,"object","rimraf: options should be object"),zE(e),jE(r,e,function i(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&n<e.maxBusyTries){n++;let o=n*100;return setTimeout(()=>jE(r,e,i),o)}s.code==="ENOENT"&&(s=null)}t(s)})}function jE(r,e,t){ee(r),ee(e),ee(typeof t=="function"),e.lstat(r,(n,i)=>{if(n&&n.code==="ENOENT")return t(null);if(n&&n.code==="EPERM"&&wi)return GE(r,e,n,t);if(i&&i.isDirectory())return Uo(r,e,n,t);e.unlink(r,s=>{if(s){if(s.code==="ENOENT")return t(null);if(s.code==="EPERM")return wi?GE(r,e,s,t):Uo(r,e,s,t);if(s.code==="EISDIR")return Uo(r,e,s,t)}return t(s)})})}function GE(r,e,t,n){ee(r),ee(e),ee(typeof n=="function"),t&&ee(t instanceof Error),e.chmod(r,438,i=>{i?n(i.code==="ENOENT"?null:t):e.stat(r,(s,o)=>{s?n(s.code==="ENOENT"?null:t):o.isDirectory()?Uo(r,e,t,n):e.unlink(r,n)})})}function $E(r,e,t){let n;ee(r),ee(e),t&&ee(t instanceof Error);try{e.chmodSync(r,438)}catch(i){if(i.code==="ENOENT")return;throw t}try{n=e.statSync(r)}catch(i){if(i.code==="ENOENT")return;throw t}n.isDirectory()?Fo(r,e,t):e.unlinkSync(r)}function Uo(r,e,t,n){ee(r),ee(e),t&&ee(t instanceof Error),ee(typeof n=="function"),e.rmdir(r,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?fT(r,e,n):i&&i.code==="ENOTDIR"?n(t):n(i)})}function fT(r,e,t){ee(r),ee(e),ee(typeof t=="function"),e.readdir(r,(n,i)=>{if(n)return t(n);let s=i.length,o;if(s===0)return e.rmdir(r,t);i.forEach(a=>{ml(HE.join(r,a),e,c=>{if(!o){if(c)return t(o=c);--s===0&&e.rmdir(r,t)}})})})}function VE(r,e){let t;e=e||{},zE(e),ee(r,"rimraf: missing path"),ee.strictEqual(typeof r,"string","rimraf: path should be a string"),ee(e,"rimraf: missing options"),ee.strictEqual(typeof e,"object","rimraf: options should be object");try{t=e.lstatSync(r)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&wi&&$E(r,e,n)}try{t&&t.isDirectory()?Fo(r,e,null):e.unlinkSync(r)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return wi?$E(r,e,n):Fo(r,e,n);if(n.code!=="EISDIR")throw n;Fo(r,e,n)}}function Fo(r,e,t){ee(r),ee(e),t&&ee(t instanceof Error);try{e.rmdirSync(r)}catch(n){if(n.code==="ENOTDIR")throw t;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")hT(r,e);else if(n.code!=="ENOENT")throw n}}function hT(r,e){if(ee(r),ee(e),e.readdirSync(r).forEach(t=>VE(HE.join(r,t),e)),wi){let t=Date.now();do try{return e.rmdirSync(r,e)}catch{}while(Date.now()-t<500)}else return e.rmdirSync(r,e)}WE.exports=ml;ml.sync=VE});var Ri=E((Nk,YE)=>{"use strict";var dT=We().fromCallback,KE=XE();YE.exports={remove:dT(KE),removeSync:KE.sync}});var ig=E((Ak,ng)=>{"use strict";var pT=We().fromCallback,QE=require("fs"),eg=require("path"),tg=et(),rg=Ri(),JE=pT(function(e,t){t=t||function(){},QE.readdir(e,(n,i)=>{if(n)return tg.mkdirs(e,t);i=i.map(o=>eg.join(e,o)),s();function s(){let o=i.pop();if(!o)return t();rg.remove(o,a=>{if(a)return t(a);s()})}})});function ZE(r){let e;try{e=QE.readdirSync(r)}catch{return tg.mkdirsSync(r)}e.forEach(t=>{t=eg.join(r,t),rg.removeSync(t)})}ng.exports={emptyDirSync:ZE,emptydirSync:ZE,emptyDir:JE,emptydir:JE}});var cg=E((Dk,ag)=>{"use strict";var mT=We().fromCallback,sg=require("path"),xi=ge(),og=et(),yT=Ct().pathExists;function ET(r,e){function t(){xi.writeFile(r,"",n=>{if(n)return e(n);e()})}xi.stat(r,(n,i)=>{if(!n&&i.isFile())return e();let s=sg.dirname(r);yT(s,(o,a)=>{if(o)return e(o);if(a)return t();og.mkdirs(s,c=>{if(c)return e(c);t()})})})}function gT(r){let e;try{e=xi.statSync(r)}catch{}if(e&&e.isFile())return;let t=sg.dirname(r);xi.existsSync(t)||og.mkdirsSync(t),xi.writeFileSync(r,"")}ag.exports={createFile:mT(ET),createFileSync:gT}});var dg=E((kk,hg)=>{"use strict";var _T=We().fromCallback,lg=require("path"),zr=ge(),fg=et(),ug=Ct().pathExists;function bT(r,e,t){function n(i,s){zr.link(i,s,o=>{if(o)return t(o);t(null)})}ug(e,(i,s)=>{if(i)return t(i);if(s)return t(null);zr.lstat(r,o=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),t(o);let a=lg.dirname(e);ug(a,(c,l)=>{if(c)return t(c);if(l)return n(r,e);fg.mkdirs(a,u=>{if(u)return t(u);n(r,e)})})})})}function vT(r,e){if(zr.existsSync(e))return;try{zr.lstatSync(r)}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let n=lg.dirname(e);return zr.existsSync(n)||fg.mkdirsSync(n),zr.linkSync(r,e)}hg.exports={createLink:_T(bT),createLinkSync:vT}});var mg=E((Lk,pg)=>{"use strict";var mr=require("path"),Oi=ge(),ST=Ct().pathExists;function wT(r,e,t){if(mr.isAbsolute(r))return Oi.lstat(r,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),t(n)):t(null,{toCwd:r,toDst:r}));{let n=mr.dirname(e),i=mr.join(n,r);return ST(i,(s,o)=>s?t(s):o?t(null,{toCwd:i,toDst:r}):Oi.lstat(r,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),t(a)):t(null,{toCwd:r,toDst:mr.relative(n,r)})))}}function RT(r,e){let t;if(mr.isAbsolute(r)){if(t=Oi.existsSync(r),!t)throw new Error("absolute srcpath does not exist");return{toCwd:r,toDst:r}}else{let n=mr.dirname(e),i=mr.join(n,r);if(t=Oi.existsSync(i),t)return{toCwd:i,toDst:r};if(t=Oi.existsSync(r),!t)throw new Error("relative srcpath does not exist");return{toCwd:r,toDst:mr.relative(n,r)}}}pg.exports={symlinkPaths:wT,symlinkPathsSync:RT}});var gg=E((Pk,Eg)=>{"use strict";var yg=ge();function xT(r,e,t){if(t=typeof e=="function"?e:t,e=typeof e=="function"?!1:e,e)return t(null,e);yg.lstat(r,(n,i)=>{if(n)return t(null,"file");e=i&&i.isDirectory()?"dir":"file",t(null,e)})}function OT(r,e){let t;if(e)return e;try{t=yg.lstatSync(r)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}Eg.exports={symlinkType:xT,symlinkTypeSync:OT}});var xg=E((Uk,Rg)=>{"use strict";var TT=We().fromCallback,bg=require("path"),Un=ge(),vg=et(),CT=vg.mkdirs,IT=vg.mkdirsSync,Sg=mg(),NT=Sg.symlinkPaths,AT=Sg.symlinkPathsSync,wg=gg(),DT=wg.symlinkType,kT=wg.symlinkTypeSync,_g=Ct().pathExists;function LT(r,e,t,n){n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,_g(e,(i,s)=>{if(i)return n(i);if(s)return n(null);NT(r,e,(o,a)=>{if(o)return n(o);r=a.toDst,DT(a.toCwd,t,(c,l)=>{if(c)return n(c);let u=bg.dirname(e);_g(u,(f,h)=>{if(f)return n(f);if(h)return Un.symlink(r,e,l,n);CT(u,d=>{if(d)return n(d);Un.symlink(r,e,l,n)})})})})})}function PT(r,e,t){if(Un.existsSync(e))return;let i=AT(r,e);r=i.toDst,t=kT(i.toCwd,t);let s=bg.dirname(e);return Un.existsSync(s)||IT(s),Un.symlinkSync(r,e,t)}Rg.exports={createSymlink:TT(LT),createSymlinkSync:PT}});var Tg=E((Fk,Og)=>{"use strict";var Mo=cg(),qo=dg(),Bo=xg();Og.exports={createFile:Mo.createFile,createFileSync:Mo.createFileSync,ensureFile:Mo.createFile,ensureFileSync:Mo.createFileSync,createLink:qo.createLink,createLinkSync:qo.createLinkSync,ensureLink:qo.createLink,ensureLinkSync:qo.createLinkSync,createSymlink:Bo.createSymlink,createSymlinkSync:Bo.createSymlinkSync,ensureSymlink:Bo.createSymlink,ensureSymlinkSync:Bo.createSymlinkSync}});var Ag=E((Mk,Ng)=>{"use strict";var Fn;try{Fn=ge()}catch{Fn=require("fs")}function UT(r,e,t){t==null&&(t=e,e={}),typeof e=="string"&&(e={encoding:e}),e=e||{};var n=e.fs||Fn,i=!0;"throws"in e&&(i=e.throws),n.readFile(r,e,function(s,o){if(s)return t(s);o=Ig(o);var a;try{a=JSON.parse(o,e?e.reviver:null)}catch(c){return i?(c.message=r+": "+c.message,t(c)):t(null,null)}t(null,a)})}function FT(r,e){e=e||{},typeof e=="string"&&(e={encoding:e});var t=e.fs||Fn,n=!0;"throws"in e&&(n=e.throws);try{var i=t.readFileSync(r,e);return i=Ig(i),JSON.parse(i,e.reviver)}catch(s){if(n)throw s.message=r+": "+s.message,s;return null}}function Cg(r,e){var t,n=`
`;typeof e=="object"&&e!==null&&(e.spaces&&(t=e.spaces),e.EOL&&(n=e.EOL));var i=JSON.stringify(r,e?e.replacer:null,t);return i.replace(/\n/g,n)+n}function MT(r,e,t,n){n==null&&(n=t,t={}),t=t||{};var i=t.fs||Fn,s="";try{s=Cg(e,t)}catch(o){n&&n(o,null);return}i.writeFile(r,s,t,n)}function qT(r,e,t){t=t||{};var n=t.fs||Fn,i=Cg(e,t);return n.writeFileSync(r,i,t)}function Ig(r){return Buffer.isBuffer(r)&&(r=r.toString("utf8")),r=r.replace(/^\uFEFF/,""),r}var BT={readFile:UT,readFileSync:FT,writeFile:MT,writeFileSync:qT};Ng.exports=BT});var Go=E((qk,kg)=>{"use strict";var Dg=We().fromCallback,jo=Ag();kg.exports={readJson:Dg(jo.readFile),readJsonSync:jo.readFileSync,writeJson:Dg(jo.writeFile),writeJsonSync:jo.writeFileSync}});var Ug=E((Bk,Pg)=>{"use strict";var jT=require("path"),GT=et(),$T=Ct().pathExists,Lg=Go();function HT(r,e,t,n){typeof t=="function"&&(n=t,t={});let i=jT.dirname(r);$T(i,(s,o)=>{if(s)return n(s);if(o)return Lg.writeJson(r,e,t,n);GT.mkdirs(i,a=>{if(a)return n(a);Lg.writeJson(r,e,t,n)})})}Pg.exports=HT});var Mg=E((jk,Fg)=>{"use strict";var zT=ge(),VT=require("path"),WT=et(),XT=Go();function KT(r,e,t){let n=VT.dirname(r);zT.existsSync(n)||WT.mkdirsSync(n),XT.writeJsonSync(r,e,t)}Fg.exports=KT});var Bg=E((Gk,qg)=>{"use strict";var YT=We().fromCallback,Be=Go();Be.outputJson=YT(Ug());Be.outputJsonSync=Mg();Be.outputJSON=Be.outputJson;Be.outputJSONSync=Be.outputJsonSync;Be.writeJSON=Be.writeJson;Be.writeJSONSync=Be.writeJsonSync;Be.readJSON=Be.readJson;Be.readJSONSync=Be.readJsonSync;qg.exports=Be});var Hg=E(($k,$g)=>{"use strict";var Xe=ge(),Vr=require("path"),JT=fl().copySync,yl=Ri().removeSync,ZT=et().mkdirsSync,QT=ul();function Gg(r,e,t){t=t||{};let n=t.overwrite||t.clobber||!1;if(r=Vr.resolve(r),e=Vr.resolve(e),r===e)return Xe.accessSync(r);if(rC(r,e))throw new Error(`Cannot move '${r}' into itself '${e}'.`);ZT(Vr.dirname(e)),i();function i(){if(n)try{return Xe.renameSync(r,e)}catch(s){if(s.code==="ENOTEMPTY"||s.code==="EEXIST"||s.code==="EPERM")return yl(e),t.overwrite=!1,Gg(r,e,t);if(s.code!=="EXDEV")throw s;return jg(r,e,n)}else try{return Xe.linkSync(r,e),Xe.unlinkSync(r)}catch(s){if(s.code==="EXDEV"||s.code==="EISDIR"||s.code==="EPERM"||s.code==="ENOTSUP")return jg(r,e,n);throw s}}}function jg(r,e,t){return Xe.statSync(r).isDirectory()?tC(r,e,t):eC(r,e,t)}function eC(r,e,t){let i=QT(65536),s=t?"w":"wx",o=Xe.openSync(r,"r"),a=Xe.fstatSync(o),c=Xe.openSync(e,s,a.mode),l=0;for(;l<a.size;){let u=Xe.readSync(o,i,0,65536,l);Xe.writeSync(c,i,0,u),l+=u}return Xe.closeSync(o),Xe.closeSync(c),Xe.unlinkSync(r)}function tC(r,e,t){let n={overwrite:!1};t&&yl(e),i();function i(){return JT(r,e,n),yl(r)}}function rC(r,e){try{return Xe.statSync(r).isDirectory()&&r!==e&&e.indexOf(r)>-1&&e.split(Vr.dirname(r)+Vr.sep)[1].split(Vr.sep)[0]===Vr.basename(r)}catch{return!1}}$g.exports={moveSync:Gg}});var Xg=E((Hk,Wg)=>{"use strict";var nC=We().fromCallback,El=ge(),Ti=require("path"),iC=pl().copy,Vg=Ri().remove,sC=et().mkdirp,oC=Ct().pathExists;function aC(r,e,t,n){typeof t=="function"&&(n=t,t={});let i=t.overwrite||t.clobber||!1;if(r=Ti.resolve(r),e=Ti.resolve(e),r===e)return El.access(r,n);El.stat(r,(s,o)=>{if(s)return n(s);if(o.isDirectory()&&lC(r,e))return n(new Error(`Cannot move '${r}' to a subdirectory of itself, '${e}'.`));sC(Ti.dirname(e),a=>a?n(a):cC(r,e,i,n))})}function cC(r,e,t,n){if(t)return Vg(e,i=>i?n(i):zg(r,e,t,n));oC(e,(i,s)=>i?n(i):s?n(new Error("dest already exists.")):zg(r,e,t,n))}function zg(r,e,t,n){El.rename(r,e,i=>i?i.code!=="EXDEV"?n(i):uC(r,e,t,n):n())}function uC(r,e,t,n){iC(r,e,{overwrite:t,errorOnExist:!0},s=>s?n(s):Vg(r,n))}function lC(r,e){let t=r.split(Ti.sep),n=e.split(Ti.sep);return t.reduce((i,s,o)=>i&&n[o]===s,!0)}Wg.exports={move:nC(aC)}});var Zg=E((zk,Jg)=>{"use strict";var fC=We().fromCallback,Ci=ge(),Kg=require("path"),Yg=et(),hC=Ct().pathExists;function dC(r,e,t,n){typeof t=="function"&&(n=t,t="utf8");let i=Kg.dirname(r);hC(i,(s,o)=>{if(s)return n(s);if(o)return Ci.writeFile(r,e,t,n);Yg.mkdirs(i,a=>{if(a)return n(a);Ci.writeFile(r,e,t,n)})})}function pC(r,...e){let t=Kg.dirname(r);if(Ci.existsSync(t))return Ci.writeFileSync(r,...e);Yg.mkdirsSync(t),Ci.writeFileSync(r,...e)}Jg.exports={outputFile:fC(dC),outputFileSync:pC}});var $o=E((Vk,gl)=>{"use strict";gl.exports=Object.assign({},Qu(),fl(),pl(),ig(),Tg(),Bg(),et(),Hg(),Xg(),Zg(),Ct(),Ri());var Qg=require("fs");Object.getOwnPropertyDescriptor(Qg,"promises")&&Object.defineProperty(gl.exports,"promises",{get(){return Qg.promises}})});var bl=E(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});function mC(r){return typeof r=="function"}_l.isFunction=mC});var Ho=E(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var vl=!1;Sl.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var e=new Error;console.warn(`DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: 
`+e.stack)}else vl&&console.log("RxJS: Back to a better error behavior. Thank you. <3");vl=r},get useDeprecatedSynchronousErrorHandling(){return vl}}});var zo=E(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});function yC(r){setTimeout(function(){throw r},0)}wl.hostReportError=yC});var xl=E(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});var EC=Ho(),gC=zo();Rl.empty={closed:!0,next:function(r){},error:function(r){if(EC.config.useDeprecatedSynchronousErrorHandling)throw r;gC.hostReportError(r)},complete:function(){}}});var e_=E(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.isArray=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}()});var Cl=E(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});function _C(r){return r!==null&&typeof r=="object"}Tl.isObject=_C});var t_=E(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});var bC=function(){function r(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return r.prototype=Object.create(Error.prototype),r}();Il.UnsubscriptionError=bC});var yr=E(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});var vC=e_(),SC=Cl(),wC=bl(),Vo=t_(),RC=function(){function r(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return r.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,n=t._parentOrParents,i=t._unsubscribe,s=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var o=0;o<n.length;++o){var a=n[o];a.remove(this)}if(wC.isFunction(i))try{i.call(this)}catch(u){e=u instanceof Vo.UnsubscriptionError?r_(u.errors):[u]}if(vC.isArray(s))for(var o=-1,c=s.length;++o<c;){var l=s[o];if(SC.isObject(l))try{l.unsubscribe()}catch(f){e=e||[],f instanceof Vo.UnsubscriptionError?e=e.concat(r_(f.errors)):e.push(f)}}if(e)throw new Vo.UnsubscriptionError(e)}},r.prototype.add=function(e){var t=e;if(!e)return r.EMPTY;switch(typeof e){case"function":t=new r(e);case"object":if(t===this||t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof r)){var n=t;t=new r,t._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=t._parentOrParents;if(i===null)t._parentOrParents=this;else if(i instanceof r){if(i===this)return t;t._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return t;var s=this._subscriptions;return s===null?this._subscriptions=[t]:s.push(t),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},r.EMPTY=function(e){return e.closed=!0,e}(new r),r}();Nl.Subscription=RC;function r_(r){return r.reduce(function(e,t){return e.concat(t instanceof Vo.UnsubscriptionError?t.errors:t)},[])}});var Wo=E(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}();Ii.$$rxSubscriber=Ii.rxSubscriber});var Wr=E(qn=>{"use strict";var i_=qn&&qn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qn,"__esModule",{value:!0});var n_=bl(),Al=xl(),xC=yr(),OC=Wo(),Mn=Ho(),Xo=zo(),s_=function(r){i_(e,r);function e(t,n,i){var s=r.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=Al.empty;break;case 1:if(!t){s.destination=Al.empty;break}if(typeof t=="object"){t instanceof e?(s.syncErrorThrowable=t.syncErrorThrowable,s.destination=t,t.add(s)):(s.syncErrorThrowable=!0,s.destination=new Dl(s,t));break}default:s.syncErrorThrowable=!0,s.destination=new Dl(s,t,n,i);break}return s}return e.prototype[OC.rxSubscriber]=function(){return this},e.create=function(t,n,i){var s=new e(t,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(xC.Subscription);qn.Subscriber=s_;var Dl=function(r){i_(e,r);function e(t,n,i,s){var o=r.call(this)||this;o._parentSubscriber=t;var a,c=o;return n_.isFunction(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==Al.empty&&(c=Object.create(n),n_.isFunction(c.unsubscribe)&&o.add(c.unsubscribe.bind(c)),c.unsubscribe=o.unsubscribe.bind(o))),o._context=c,o._next=a,o._error=i,o._complete=s,o}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Mn.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,t):this.__tryOrSetError(n,this._next,t)&&this.unsubscribe()}},e.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,i=Mn.config.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,t),this.unsubscribe()):(this.__tryOrSetError(n,this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=t,n.syncErrorThrown=!0):Xo.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;Xo.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};!Mn.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(i){if(this.unsubscribe(),Mn.config.useDeprecatedSynchronousErrorHandling)throw i;Xo.hostReportError(i)}},e.prototype.__tryOrSetError=function(t,n,i){if(!Mn.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return Mn.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=s,t.syncErrorThrown=!0,!0):(Xo.hostReportError(s),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(s_);qn.SafeSubscriber=Dl});var o_=E(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});var TC=Wr();function CC(r){for(;r;){var e=r,t=e.closed,n=e.destination,i=e.isStopped;if(t||i)return!1;n&&n instanceof TC.Subscriber?r=n:r=null}return!0}kl.canReportError=CC});var c_=E(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});var Ll=Wr(),a_=Wo(),IC=xl();function NC(r,e,t){if(r){if(r instanceof Ll.Subscriber)return r;if(r[a_.rxSubscriber])return r[a_.rxSubscriber]()}return!r&&!e&&!t?new Ll.Subscriber(IC.empty):new Ll.Subscriber(r,e,t)}Pl.toSubscriber=NC});var Bn=E(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var u_=E(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});function AC(r){return r}Fl.identity=AC});var f_=E(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});var DC=u_();function kC(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return l_(r)}Ko.pipe=kC;function l_(r){return r.length===0?DC.identity:r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}}Ko.pipeFromArray=l_});var Er=E(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var LC=o_(),PC=c_(),UC=Bn(),FC=f_(),Yo=Ho(),MC=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this.operator,s=PC.toSubscriber(e,t,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Yo.config.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Yo.config.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Yo.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),LC.canReportError(e)?e.error(t):console.warn(t)}},r.prototype.forEach=function(e,t){var n=this;return t=h_(t),new t(function(i,s){var o;o=n.subscribe(function(a){try{e(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})},r.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},r.prototype[UC.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?this:FC.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=h_(e),new e(function(n,i){var s;t.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},r.create=function(e){return new r(e)},r}();Ml.Observable=MC;function h_(r){if(r||(r=Yo.config.Promise||Promise),!r)throw new Error("no Promise impl found");return r}});var d_=E(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});var qC=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}();ql.ObjectUnsubscribedError=qC});var p_=E(Ni=>{"use strict";var BC=Ni&&Ni.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ni,"__esModule",{value:!0});var jC=yr(),GC=function(r){BC(e,r);function e(t,n){var i=r.call(this)||this;return i.subject=t,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;if(this.subject=null,!(!n||n.length===0||t.isStopped||t.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(jC.Subscription);Ni.SubjectSubscription=GC});var g_=E(Xr=>{"use strict";var Gl=Xr&&Xr.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Xr,"__esModule",{value:!0});var m_=Er(),$C=Wr(),Bl=yr(),Ai=d_(),HC=p_(),zC=Wo(),y_=function(r){Gl(e,r);function e(t){var n=r.call(this,t)||this;return n.destination=t,n}return e}($C.Subscriber);Xr.SubjectSubscriber=y_;var E_=function(r){Gl(e,r);function e(){var t=r.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype[zC.rxSubscriber]=function(){return new y_(this)},e.prototype.lift=function(t){var n=new jl(this,this);return n.operator=t,n},e.prototype.next=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Ai.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;return r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),Bl.Subscription.EMPTY):this.isStopped?(t.complete(),Bl.Subscription.EMPTY):(this.observers.push(t),new HC.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new m_.Observable;return t.source=this,t},e.create=function(t,n){return new jl(t,n)},e}(m_.Observable);Xr.Subject=E_;var jl=function(r){Gl(e,r);function e(t,n){var i=r.call(this)||this;return i.destination=t,i.source=n,i}return e.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},e.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var n=this.source;return n?this.source.subscribe(t):Bl.Subscription.EMPTY},e}(E_);Xr.AnonymousSubject=jl});function XC(r,e,t){let n=Jr();return new kn(r,t,e,n)}function KC(r,e,t){let n=JSON.stringify(r.map(i=>({taskId:i.taskId,hash:i.hash})));L&&Jo.note({title:`Executed tasks with hashes: ${n}`}),(0,__.writeFileSync)(b_.join(e,`tasks-hashes-${t}`),n)}function YC(r,e,t){r.filter(i=>i.cacheStatus==="local-cache-hit").map(i=>i.hash).forEach(i=>e.store(i,t))}async function $l({daemon:r,options:e,fileStorage:t,remoteCache:n,api:i,outputObfuscator:s,runStartTime:o,messages:a,endOfRunMessage:c,taskExecutions:l,versionOfNxBefore133:u,inner:f,encryptionKey:h,storeInCurrentProcess:d,distributedExecutionId:m,runContext:b}){let p=new Date().toISOString(),w=me(),k={command:s.obfuscate(Ji()),startTime:o,endTime:p,distributedExecutionId:m,branch:w,runGroup:ve(),sha:w?tt():void 0,inner:f},O={branch:w,runGroup:ve(),ciExecutionId:je(),ciExecutionEnv:xe()};if(d){ut(m)&&(KC(l,Zo,m),YC(l,n,Zo));try{await n.waitForStoreRequestsToComplete()}catch{return Jo.error({title:"Nx Cloud wasn't able to store artifacts."}),a.printMessages(),!1}for(let C of t.storedHashes){let P=l.find(T=>T.hash===C);if(!P)throw new Error(`Task with hash ${C} isn't recorded`);P.uploadedToStorage=!0}l.forEach(C=>{var P;C.artifactId=(P=b.allTasks.find(T=>T.hash==C.hash))==null?void 0:P.artifactId});try{await i.endRun(k,l,O)}catch{return Jo.error({title:"Nx Cloud wasn't able to record its run."}),a.printMessages(),!1}await sn(e)}else try{let C=Et?Et:e.accessToken,P=Co(),T=require.resolve("./lib/daemon/process-run-end");await r.processInBackground(T,{encryptionKey:h,runnerOptions:{...e,accessToken:C},delayedStoreRequests:n.delayedStoreRequests,ciExecutionContext:O,runEnd:{runData:k,taskExecutions:l,allTasks:b.allTasks,linkId:P},lightRunnerResolutionPaths:wr}),b.runUrl=`${ys(e.url||"https://nx.app")}/runs/${P}`}catch(C){return Jo.warn({title:"Nx Cloud Problems",bodyLines:[C.message||C.toString()]}),!1}return u?setTimeout(()=>{a.printMessages(),!a.anyErrors&&!f&&c.printCacheHitsMessage()},0):(a.printMessages(),!a.anyErrors&&!f&&c.printCacheHitsMessage()),!0}function JC(r,e,t,n){let i=new Ro(r,Zo,!0,e.cacheableOperations||[],t,n);try{let{CompositeLifeCycle:s}=dt();return s?new s([e.lifeCycle,i]):i}catch{return i}}async function ZC(r,e,t,n,i){if(n.skipNxCache)return;let s=t.map(c=>c.hash).filter(c=>!!c),o=await Promise.all(s.map(c=>{let l=(0,v_.join)(Zo,`${c}.commit`);return WC(l)})),a=[];for(let c=0;c<o.length;++c)o[c]||a.push(s[c]);if(a.length>0){let c=r.startRun(i,a);for(let l of a)e.requests[l]=c}}function Di(r,e,t,n=!1){var P;let i=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID,s={statuses:{},scheduledTasks:[],requests:{},allTasks:r},o=e.lifeCycle===void 0,a=[],c=new An(e),l=XC(c,e,s),u=new vo(s,a,i),f=new hr(e.maskedProperties),h=new Date().toISOString(),d=JC(s,e,f,a),m=Or||e.encryptionKey,b=new Jt(m),p=new Yt(e),w=ut(i)||!((P=t.daemon)!=null&&P.enabled()),k=new fr(b,p,e,"cloud-enabled-runner"),O=new xo(c,l,s,k,i,w);ZC(l,s,r,e,i),delete process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID;let C=VC(r,{...e,remoteCache:O,lifeCycle:d},t);if(C.subscribe){let{Subject:T}=g_(),z=new T;return C.subscribe({next:G=>z.next(G),error:G=>z.error(G),complete:async()=>{!await $l({daemon:t.daemon,options:e,fileStorage:k,remoteCache:O,api:l,outputObfuscator:f,runStartTime:h,messages:c,endOfRunMessage:u,taskExecutions:a,versionOfNxBefore133:o,inner:n,encryptionKey:m,storeInCurrentProcess:w,runContext:s,distributedExecutionId:i})&&ut(i)&&process.exit(Wt),z.complete()}}),z}else return C.then(async T=>(!await $l({daemon:t.daemon,options:e,fileStorage:k,remoteCache:O,api:l,outputObfuscator:f,runStartTime:h,messages:c,endOfRunMessage:u,taskExecutions:a,versionOfNxBefore133:o,inner:n,encryptionKey:m,storeInCurrentProcess:w,runContext:s,distributedExecutionId:i})&&ut(i)&&process.exit(Wt),T)).catch(async T=>{throw!await $l({daemon:t.daemon,options:e,fileStorage:k,remoteCache:O,api:l,outputObfuscator:f,runStartTime:h,messages:c,endOfRunMessage:u,taskExecutions:a,versionOfNxBefore133:o,inner:n,encryptionKey:m,storeInCurrentProcess:w,runContext:s,distributedExecutionId:i})&&ut(i)&&process.exit(Wt),T})}var __,b_,v_,Jo,VC,Zo,WC,S_=q(()=>{"use strict";__=require("fs"),b_=Sr(require("path")),v_=require("path");re();Rr();kt();rc();Es();gs();bo();Gy();Uu();So();Vy();Wy();zu();Vu();({output:Jo}=Y()),{tasksRunner:VC,cacheDirectory:Zo}=dt(),{pathExists:WC}=$o()});function ki(r){return(0,R_.join)((0,w_.tmpdir)(),`run-group-${r}-marker.lock`)}function x_(r){(0,Qo.mkdirSync)(ki(r))}function O_(r,e){if(e===void 0)return;let t=ki(r);(0,Qo.writeFileSync)(`${t}/pid`,e.toString())}var Qo,w_,R_,T_=q(()=>{"use strict";Qo=require("fs"),w_=require("os"),R_=require("path")});async function ta(){if(me()==null)return;let r=ve();L&&jn.note({title:`Trying to create heartbeat background process for run group: ${r}`});try{x_(r)}catch{let t=await eI(r);L&&(t===void 0?jn.note({title:"Heartbeat marker exists, but no process could be found."}):jn.note({title:`Heartbeat marker exists, process expected with pid ${t}`})),I_(r,t);return}await QC(r).catch(()=>{jn.error({title:"Took longer than 3 seconds to hear from heartbeat process",bodyLines:["The heartbeat process may have not started properly. This CIPE could have inconsistent status reporting."]})})}async function QC(r){let e=process.env.NX_CLOUD_HEARTBEAT_INHERIT_STDIO=="true"?"inherit":"pipe";return new Promise((t,n)=>{let i=(0,C_.spawn)(process.execPath,[require.resolve("./lib/heartbeat/heartbeat-process.js")],{detached:!0,windowsHide:!0,stdio:e,env:{...process.env,NX_CLOUD_LIGHT_CLIENT_RESOLUTION_PATHS:JSON.stringify(wr)}});e==="pipe"?(i.stdout.on("data",s=>{s=="heartbeat-ready"&&(L&&jn.note({title:`Heartbeat process started successfully with PID ${i.pid}`}),O_(r,i.pid),I_(r,i.pid),i.unref(),t())}),setTimeout(()=>n(),3e3)):t()})}async function eI(r){let e=ki(r),t=1;for(;t<=3;)try{let n=(0,Pi.readFileSync)(`${e}/pid`,{encoding:"utf-8"});return Number(n)}catch{await Ge(1e3),t+=1}}function I_(r,e){e!==void 0&&(ea||(ea=setInterval(()=>{if(!tI(e)){let t=ki(r),n;try{n=(0,Pi.readFileSync)(`${t}/logs`,{encoding:"utf-8"})}catch{n="Unable to find shutdown logs, likely the heartbeat process was sent a SIGKILL"}Li(),jn.error({title:"Nx Cloud Heartbeat missing",bodyLines:[`Expected to find process with PID ${e} but none was found.`,"Output:",...n.split(`
`)]}),(0,Pi.rmdirSync)(t,{recursive:!0})}},1e3),process.on("SIGINT",Li),process.on("SIGTERM",Li),process.on("uncaughtException",Li),process.on("exit",Li)))}function Li(){clearInterval(ea),ea=void 0}function tI(r){try{return process.kill(r,0),!0}catch{return!1}}var C_,Pi,jn,ea,Hl=q(()=>{"use strict";C_=require("child_process"),Pi=require("fs");re();Rr();Zr();T_();({output:jn}=Y())});function k_(){rI(A_),nI(D_,"true")}function L_(r){if(r===!0)return!0;if(r===!1)return!1;let e=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION;if(e==="false"||e==="FALSE"||e==="0")return!1;if(e==="true"||e==="TRUE"||e==="1")return!0;try{return(0,N_.readFileSync)(D_),!0}catch{return!1}}var N_,zl,rI,nI,iI,A_,D_,Vl=q(()=>{"use strict";N_=require("fs"),zl=require("path"),{ensureDirSync:rI,writeFileSync:nI}=$o(),iI=process.env.NX_CACHE_DIRECTORY?[process.env.NX_CACHE_DIRECTORY]:["node_modules",".cache","nx"],A_=(0,zl.join)(process.cwd(),...iI),D_=(0,zl.join)(A_,"NX_CLOUD_DISTRIBUTED_EXECUTION")});async function Ui(r){let e=Te(r);return await ce(()=>e.get("/nx-cloud/executions/workspace-status"))}var Wl=q(()=>{"use strict";_t()});var P_=E(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.subscribeToArray=function(r){return function(e){for(var t=0,n=r.length;t<n&&!e.closed;t++)e.next(r[t]);e.complete()}}});var U_=E(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});var sI=zo();Kl.subscribeToPromise=function(r){return function(e){return r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,sI.hostReportError),e}}});var Fi=E(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});function F_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Gn.getSymbolIterator=F_;Gn.iterator=F_();Gn.$$iterator=Gn.iterator});var M_=E(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});var oI=Fi();Yl.subscribeToIterable=function(r){return function(e){var t=r[oI.iterator]();do{var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof t.return=="function"&&e.add(function(){t.return&&t.return()}),e}}});var q_=E(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});var aI=Bn();Jl.subscribeToObservable=function(r){return function(e){var t=r[aI.observable]();if(typeof t.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)}}});var Ql=E(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"}});var tf=E(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});function cI(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}ef.isPromise=cI});var nf=E(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});var uI=P_(),lI=U_(),fI=M_(),hI=q_(),dI=Ql(),pI=tf(),mI=Cl(),yI=Fi(),EI=Bn();rf.subscribeTo=function(r){if(r&&typeof r[EI.observable]=="function")return hI.subscribeToObservable(r);if(dI.isArrayLike(r))return uI.subscribeToArray(r);if(pI.isPromise(r))return lI.subscribeToPromise(r);if(r&&typeof r[yI.iterator]=="function")return fI.subscribeToIterable(r);var e=mI.isObject(r)?"an invalid object":"'"+r+"'",t="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(t)}});var B_=E(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});var gI=Er(),_I=yr(),bI=Bn();function vI(r,e){return new gI.Observable(function(t){var n=new _I.Subscription;return n.add(e.schedule(function(){var i=r[bI.observable]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return t.next(s)}))},error:function(s){n.add(e.schedule(function(){return t.error(s)}))},complete:function(){n.add(e.schedule(function(){return t.complete()}))}}))})),n})}sf.scheduleObservable=vI});var j_=E(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});var SI=Er(),wI=yr();function RI(r,e){return new SI.Observable(function(t){var n=new wI.Subscription;return n.add(e.schedule(function(){return r.then(function(i){n.add(e.schedule(function(){t.next(i),n.add(e.schedule(function(){return t.complete()}))}))},function(i){n.add(e.schedule(function(){return t.error(i)}))})})),n})}of.schedulePromise=RI});var G_=E(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});var xI=Er(),OI=yr();function TI(r,e){return new xI.Observable(function(t){var n=new OI.Subscription,i=0;return n.add(e.schedule(function(){if(i===r.length){t.complete();return}t.next(r[i++]),t.closed||n.add(this.schedule())})),n})}af.scheduleArray=TI});var $_=E(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});var CI=Er(),II=yr(),NI=Fi();function AI(r,e){if(!r)throw new Error("Iterable cannot be null");return new CI.Observable(function(t){var n=new II.Subscription,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=r[NI.iterator](),n.add(e.schedule(function(){if(!t.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(c){t.error(c);return}o?t.complete():(t.next(s),this.schedule())}}))})),n})}cf.scheduleIterable=AI});var H_=E(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});var DI=Bn();function kI(r){return r&&typeof r[DI.observable]=="function"}uf.isInteropObservable=kI});var z_=E(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});var LI=Fi();function PI(r){return r&&typeof r[LI.iterator]=="function"}lf.isIterable=PI});var V_=E(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});var UI=B_(),FI=j_(),MI=G_(),qI=$_(),BI=H_(),jI=tf(),GI=Ql(),$I=z_();function HI(r,e){if(r!=null){if(BI.isInteropObservable(r))return UI.scheduleObservable(r,e);if(jI.isPromise(r))return FI.schedulePromise(r,e);if(GI.isArrayLike(r))return MI.scheduleArray(r,e);if($I.isIterable(r)||typeof r=="string")return qI.scheduleIterable(r,e)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}ff.scheduled=HI});var df=E(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});var W_=Er(),zI=nf(),VI=V_();function WI(r,e){return e?VI.scheduled(r,e):r instanceof W_.Observable?r:new W_.Observable(zI.subscribeTo(r))}hf.from=WI});var X_=E(Mi=>{"use strict";var XI=Mi&&Mi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mi,"__esModule",{value:!0});var KI=Wr(),YI=function(r){XI(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.notifyNext=function(t,n,i,s,o){this.destination.next(n)},e.prototype.notifyError=function(t,n){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(KI.Subscriber);Mi.OuterSubscriber=YI});var pf=E(qi=>{"use strict";var JI=qi&&qi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qi,"__esModule",{value:!0});var ZI=Wr(),QI=function(r){JI(e,r);function e(t,n,i){var s=r.call(this)||this;return s.parent=t,s.outerValue=n,s.outerIndex=i,s.index=0,s}return e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(ZI.Subscriber);qi.InnerSubscriber=QI});var K_=E(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});var e0=pf(),t0=nf(),r0=Er();function n0(r,e,t,n,i){if(i===void 0&&(i=new e0.InnerSubscriber(r,t,n)),!i.closed)return e instanceof r0.Observable?e.subscribe(i):t0.subscribeTo(e)(i)}mf.subscribeToResult=n0});var J_=E($n=>{"use strict";var i0=$n&&$n.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty($n,"__esModule",{value:!0});var s0=Wr();function o0(r,e){return function(n){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Y_(r,e))}}$n.map=o0;var Y_=function(){function r(e,t){this.project=e,this.thisArg=t}return r.prototype.call=function(e,t){return t.subscribe(new a0(e,this.project,this.thisArg))},r}();$n.MapOperator=Y_;var a0=function(r){i0(e,r);function e(t,n,i){var s=r.call(this,t)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(t){var n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(s0.Subscriber)});var Q_=E(Bi=>{"use strict";var c0=Bi&&Bi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Bi,"__esModule",{value:!0});var u0=X_(),l0=pf(),f0=K_(),h0=J_(),d0=df();function Z_(r,e){return typeof e=="function"?function(t){return t.pipe(Z_(function(n,i){return d0.from(r(n,i)).pipe(h0.map(function(s,o){return e(n,s,i,o)}))}))}:function(t){return t.lift(new p0(r))}}Bi.switchMap=Z_;var p0=function(){function r(e){this.project=e}return r.prototype.call=function(e,t){return t.subscribe(new m0(e,this.project))},r}(),m0=function(r){c0(e,r);function e(t,n){var i=r.call(this,t)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(t){var n,i=this.index++;try{n=this.project(t,i)}catch(s){this.destination.error(s);return}this._innerSub(n,t,i)},e.prototype._innerSub=function(t,n,i){var s=this.innerSubscription;s&&s.unsubscribe();var o=new l0.InnerSubscriber(this,n,i),a=this.destination;a.add(o),this.innerSubscription=f0.subscribeToResult(this,t,void 0,void 0,o),this.innerSubscription!==o&&a.add(this.innerSubscription)},e.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&r.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(t){var n=this.destination;n.remove(t),this.innerSubscription=null,this.isStopped&&r.prototype._complete.call(this)},e.prototype.notifyNext=function(t,n,i,s,o){this.destination.next(n)},e}(u0.OuterSubscriber)});var yf,y0,E0,g0,eb,tb,Hn,Ef=q(()=>{"use strict";yf=require("path");re();({readFile:y0,copy:E0,mkdirSync:g0}=$o()),{output:eb,workspaceRoot:tb}=Y(),Hn=class{constructor(e,t){this.fileStorage=e;this.cacheDirectory=t;g0(t,{recursive:!0})}async retrieveAndExtract(e,t){process.env.NX_CLOUD_DEBUG_URLS=="true"&&eb.note({title:`Retrieving artifacts from ${t}`}),await this.fileStorage.retrieve(e,t,this.cacheDirectory);let n=(0,yf.join)(this.cacheDirectory,e,"outputs");return L&&eb.note({title:"Extracting artifacts",bodyLines:[`from: ${n}`,`to: ${tb}`]}),await E0(n,tb),(await y0((0,yf.join)(this.cacheDirectory,e,"terminalOutput"))).toString()}}});function gr(r,e){return!!r||!!e}function _r(){_0.error({title:"Unable to determine the context for running Nx in CI",bodyLines:["- Nx tried to determine the context automatically but wasn't able to do it.","- Use the NX_CI_EXECUTION_ID env variable to set it manually.","- NX_CI_EXECUTION_ID must be a unique value for every CI execution/run."]})}var _0,ji=q(()=>{"use strict";({output:_0}=Y())});function rb(r,e,t,n,i,s,o){let a=i.map(l=>l.map(u=>({taskId:u.id,hash:u.hash,projectName:u.target.project,target:u.target.target,configuration:u.target.configuration||null,params:Dn(u),projectRoot:u.projectRoot,cache:u.cache}))),c={command:Ji(),branch:r,runGroup:e,ciExecutionId:t,ciExecutionEnv:n,tasks:a,maxParallel:b0(s),commitSha:o};return ga&&(c.agentCount=ga),dh||(c.stopAgentsOnFailure=!1),c}function b0(r){return r.parallel==="false"||r.parallel===!1?1:r.parallel==="true"||r.parallel===!0?Number(r.maxParallel||3):r.parallel===void 0?r.maxParallel?Number(r.maxParallel):3:Number(r.parallel)||3}var gf,zn,_f=q(()=>{"use strict";_t();re();Oo();kt();Si();({output:gf}=Y()),zn=class{constructor(e){this.apiAxiosInstance=Te(e,6e4)}async start(e){var i;let t=Ce("dteStart"),n;L&&gf.note({title:"Starting a distributed execution",bodyLines:[JSON.stringify(e,null,2)]});try{n=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/start",e)),t.recordMetric(ne(n))}catch(s){throw t.recordMetric((i=s==null?void 0:s.axiosException)!=null&&i.response?ne(s.axiosException.response):Ie),s}if(!n.data.enabled)throw new Error("Workspace is disabled. Cannot perform distributed task executions.");if(n.data.error)throw new Error(n.data.error);return n.data.id}async status(e,t){var i;let n=Ce("dteStatus");try{let s=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/status",{id:e,prevUpdatedAt:t}));return n.recordMetric(ne(s)),s.data}catch(s){n.recordMetric((i=s==null?void 0:s.axiosException)!=null&&i.response?ne(s.axiosException.response):Ie),gf.error({title:s.message}),process.exit(1)}}async completeRunGroupWithError(e,t,n,i,s){var a;let o=Ce("completeRunGroup");L&&gf.note({title:"Completing with an error",bodyLines:[`ciExecutionId: ${n}`,`ciExecutionEnv: ${i}`,`runGroup: ${t}`,`error: ${s}`]});try{let c=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/complete-run-group",{branch:e,runGroup:t,ciExecutionId:n,ciExecutionEnv:i,criticalErrorMessage:s,vcsContext:dr()}),3);o.recordMetric(ne(c))}catch(c){o.recordMetric((a=c==null?void 0:c.axiosException)!=null&&a.response?ne(c.axiosException.response):Ie)}}}});function ra(r){let e=new Object,t;return n=>{e!==n?(e=n,t=new Date):new Date().getTime()-t.getTime()>r.timeout&&(v0.error({title:r.title}),process.exit(1))}}var v0,bf=q(()=>{"use strict";({output:v0}=Y())});async function nb(r,e,t){L&&vf.note({title:`Processing task ${t.taskId}`});let n=e.find(s=>t.taskId===s.id);if(!n)throw new Error(`Found unknown task: ${t.taskId}`);let i=await r.retrieveAndExtract(t.hash,t.url);vf.logCommand(S0(n)),process.stdout.write(i),vf.addVerticalSeparator()}function S0(r){let e=r.target.configuration?`:${r.target.configuration}`:"";return["nx","run",`${r.target.project}:${r.target.target}${e}`,Dn(r)].join(" ")}var vf,ib=q(()=>{"use strict";re();Si();({output:vf}=Y())});async function sb(r,e,t,n){let i=null,s={},o=ra({title:`No new completed tasks after ${Ea/1e3} seconds.`,timeout:Ea});for(await Ge(1e3);;){L&&Sf.note({title:"Waiting..."});let a=await r.status(t,i);L&&Sf.note({title:"Status update",bodyLines:[`executionId: ${t}`,`executionStatus: ${a.executionStatus}`,`number of completed tasks: ${a.completedTasks.length}`,`error: ${a.criticalErrorMessage}`]}),a.criticalErrorMessage&&(Sf.error({title:"Distributed Execution Terminated",bodyLines:["Error:",a.criticalErrorMessage]}),process.exit(1)),a.updatedAt||await Ge(5e3),i=a.updatedAt,o(a.completedTasks.length);for(let c of a.completedTasks)s[c.taskId]||(await nb(e,n,c),s[c.taskId]=!0);if(a.executionStatus==="COMPLETED")return{commandStatus:a.commandStatus,runUrl:a.runUrl}}}var Sf,ob=q(()=>{"use strict";bf();re();Zr();ib();({output:Sf}=Y())});function ab(r){let e=[],t=new Set(Object.values(r.tasks).map(i=>i.id)),n=0;for(;t.size>0;){let i=e[n]=[];for(let s of t){let o=!0;for(let c of r.dependencies[s])if(t.has(c)){o=!1;break}if(!o)continue;let a=r.tasks[s];i.push(a)}for(let s of i)t.delete(s.id);n++}return e}var cb=q(()=>{"use strict"});var na=E((S1,lb)=>{"use strict";var wf=Symbol("singleComment"),ub=Symbol("multiComment"),w0=()=>"",R0=(r,e,t)=>r.slice(e,t).replace(/\S/g," "),x0=(r,e)=>{let t=e-1,n=0;for(;r[t]==="\\";)t-=1,n+=1;return!!(n%2)};lb.exports=(r,e={})=>{if(typeof r!="string")throw new TypeError(`Expected argument \`jsonString\` to be a \`string\`, got \`${typeof r}\``);let t=e.whitespace===!1?w0:R0,n=!1,i=!1,s=0,o="";for(let a=0;a<r.length;a++){let c=r[a],l=r[a+1];if(!i&&c==='"'&&(x0(r,a)||(n=!n)),!n){if(!i&&c+l==="//")o+=r.slice(s,a),s=a,i=wf,a++;else if(i===wf&&c+l===`\r
`){a++,i=!1,o+=t(r,s,a),s=a;continue}else if(i===wf&&c===`
`)i=!1,o+=t(r,s,a),s=a;else if(!i&&c+l==="/*"){o+=r.slice(s,a),s=a,i=ub,a++;continue}else if(i===ub&&c+l==="*/"){a++,i=!1,o+=t(r,s,a+1),s=a+1;continue}}}return o+(i?t(r.slice(s)):r.slice(s))}});function hb(r,e,t){let n=JSON.parse(C0((0,fb.readFileSync)(`${O0}/nx.json`).toString()));return new Rf(e,I0(n,r)).createTaskGraph(t)}function I0(r,e){let t=r.targetDependencies??{},n=e?e.strictlyOrderedTargets??["build"]:[];for(let i of n)t[i]=t[i]||[],t[i].push({target:i,projects:"dependencies"});return t}var fb,O0,T0,C0,Rf,db=q(()=>{"use strict";fb=require("fs"),{workspaceRoot:O0}=Y(),{getDependencyConfigs:T0}=dt(),C0=na();Rf=class{constructor(e,t){this.projectGraph=e;this.defaultTargetDependencies=t}createTaskGraph(e){let t={roots:[],tasks:{},dependencies:{}};for(let n of e){this.addTaskToGraph(n,t);let i=T0(n.target,this.defaultTargetDependencies,this.projectGraph);i&&this.addTaskDependencies(n,i,e,t)}return t.roots=Object.keys(t.dependencies).filter(n=>t.dependencies[n].length===0),t}addTaskDependencies(e,t,n,i){for(let s of t)if(s.projects==="self")for(let o of n)o.target.project===e.target.project&&o.target.target===s.target&&i.dependencies[e.id].push(o.id);else if(s.projects==="dependencies"){let o=new Set;this.addDependencies(e.target.project,s.target,n,i,e.id,o)}}addDependencies(e,t,n,i,s,o){o.add(e);let a=this.projectGraph.dependencies[e];if(a){let c=a.map(l=>l.target);for(let l of c){if(o.has(l))continue;let u=this.findTask({project:l,target:t},n);u?i.dependencies[s].indexOf(u.id)===-1&&i.dependencies[s].push(u.id):this.addDependencies(l,t,n,i,s,o)}}}findTask({project:e,target:t},n){return n.find(i=>i.target.project===e&&i.target.target===t)}addTaskToGraph(e,t){t.tasks[e.id]=e,t.dependencies[e.id]=[]}}});var Of={};Dt(Of,{nxCloudDistributedTasksRunner:()=>A0});function D0(r,e,t){return r.taskGraph?r.taskGraph:hb(t,r.projectGraph,e)}function k0(r,e,t,n,i){process.on("SIGINT",async()=>{await r.completeRunGroupWithError(e,t,n,i,"Main job was terminated via SIGINT"),process.exit(1)}),process.on("SIGTERM",async()=>{await r.completeRunGroupWithError(e,t,n,i,"Main job was terminated via SIGTERM"),process.exit(1)})}async function L0(r,e,t,n,i,s,o,a,c,l){let u=await r.start(rb(n,i,s,o,ab(a),e,c));return await sb(r,t,u,Object.values(a.tasks))}var Gi,N0,xf,A0,Tf=q(()=>{"use strict";Ef();re();kt();Es();ji();gs();bo();_f();ob();cb();db();({output:Gi}=Y()),{cacheDirectory:N0}=dt(),xf=class{scheduleTask(e){}startTask(e){}endTasks(e){}},A0=async(r,e,t)=>{e.skipNxCache&&Gi.warn({title:"--skip-nx-cache is ignored when using distributed tasks execution (DTE).",bodyLine:["DTE needs the cache to share files between agents."]}),L&&Gi.note({title:"Starting distributed command execution"}),e.lifeCycle=new xf;let n=me(),i=ve(),s=je(),o=xe(),a=tt(),c=Yi();gr(i,s)||(_r(),process.exit(1));let l=new Jt(Or||e.encryptionKey),u=new Yt(e),f=new Hn(new fr(l,u,e,"dte-main"),N0),h=new zn(e);k0(h,n,i,s,o);try{let d=D0(t,r,e),m=await L0(h,e,f,n,i,s,o,d,a,c);m.commandStatus===0?Gi.success({title:"Successfully completed running the command.",bodyLines:[`See run details at ${m.runUrl}`]}):Gi.error({title:"Command execution failed.",bodyLines:[`See run details at ${m.runUrl}`]}),await sn(e),process.exit(m.commandStatus)}catch(d){Gi.error({title:"Unable to complete a run.",bodyLines:[d.message]}),d.axiosException?console.log(d.axiosException):console.log(d);try{await h.completeRunGroupWithError(n,i,s,o,`Main job terminated with an error: "${d.message}"`)}finally{process.exit(1)}}}});var mb={};Dt(mb,{default:()=>G0});function F0(r,e,t){let{from:n}=df(),{switchMap:i}=Q_();return n(Ui(e)).pipe(i(s=>s.data.enabled?(Tf(),be(Of)).nxCloudDistributedTasksRunner(r,e,t):(Kr.warn({title:"Nx Cloud: Workspace Disabled",bodyLines:["This run and following runs will not use distributed task execution until","the outstanding balance is paid or additional coupons are added for this","workspace. If you believe you are receiving this message in error, please","contact support at cloud-support@nrwl.io.","","Execution will now continue using this machine only."]}),process.env.NX_INVOKED_BY_RUNNER="true",Di(r,e,t))))}async function M0(r,e,t){return(await Ui(e)).data.enabled?(Tf(),be(Of)).nxCloudDistributedTasksRunner(r,e,t):(Kr.warn({title:"Nx Cloud: Workspace Disabled",bodyLines:["This run and following runs will not use distributed task execution until","the outstanding balance is paid.","","If you believe you are receiving this message in error, please","contact support at cloud-support@nrwl.io.","","Execution will now continue using this machine only."]}),process.env.NX_INVOKED_BY_RUNNER="true",Di(r,e,t))}function q0(r,e){let t=e.cacheableOperations||[];return r.some(n=>Cf(n,{cacheableOperations:t}))}function B0(r,e){let t=e.cacheableOperations||[];for(let n of r)Cf(n,{cacheableOperations:t})||(Kr.error({title:"Distributed task execution only works for cacheable targets",bodyLines:[`Target '${n.target.project}:${n.target.target}' cannot be executed.`,"To be able to replay the output of the target, distributed task execution only supports cacheable targets.",`You can verify that '${n.target.target}' is part of the list of cacheable targets in the 'nx.json' file.`,'You can invoke this command without distribution by doing "NX_CLOUD_DISTRIBUTED_EXECUTION=false nx ...".']}),process.exit(1))}function j0(r,e){let t=e.cacheableOperations||[];for(let n of r)Cf(n,{cacheableOperations:t})||(Kr.error({title:"Distributed task execution only works for cacheable targets",bodyLines:[`Target ${n.target.project}:${n.target.target} cannot be executed.`,"To be able to replay the output of the target, distributed task execution only supports cacheable targets.",`You can still invoke "nx ${n.target.target} ${n.target.project}" from within a cacheable target when using "nx:run-commands".`]}),process.exit(Wt))}var Kr,pb,P0,Cf,U0,G0,yb=q(()=>{"use strict";S_();Hl();Vl();re();Wl();({output:Kr}=Y()),{tasksRunner:pb,runnerReturnsPromise:P0,isCacheableTask:Cf}=dt(),U0=async(r,e,t={})=>{let n=t.nxArgs||{},i=!Et&&!e.accessToken,s=n.cloud===!1||mh;return i||s||e.skipNxCache?(i&&Kr.warn({title:"No access token found",bodyLines:["Nx will continue running, but nothing will be written or read from the remote cache.","Run details will also not be available in the Nx Cloud UI."]}),s&&Kr.warn({title:"Nx Cloud Manually Disabled",bodyLines:["Nx will continue running, but nothing will be written or read from the remote cache.","Run details will also not be available in the Nx Cloud UI.","","If this wasn't intentional, check for the NX_NO_CLOUD environment variable, the --no-cloud flag"]}),e.skipNxCache&&Kr.warn({title:"--skip-nx-cache disables the connection to Nx Cloud for the current run.",bodyLines:["The remote cache will not be read from or written to during this run."]}),pb(r,e,t)):yh()?q0(r,e)?Di(r,e,t,!0):pb(r,e,t):(ut(process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID)?j0(r,e):await ta(),L_(n.dte)&&!ut(process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID)?(B0(r,e),P0?M0(r,e,t):F0(r,e,t)):(process.env.NX_INVOKED_BY_RUNNER="true",Di(r,e,t)))};G0=U0});var If={};Dt(If,{cleanUpAgents:()=>z0});async function z0(){let r=`${H0}/lockfiles`;return L&&$0.note({title:"Cleaning up agent metadata for this workspace."}),(0,Eb.rm)(r,{recursive:!0,force:!0},e=>{if(e)throw e})}var Eb,$0,H0,Nf=q(()=>{"use strict";Eb=require("fs");re();({output:$0}=Y()),{cacheDirectory:H0}=dt()});function It(){var n,i;let r=JSON.parse(V0((0,gb.readFileSync)(`${W0}/nx.json`).toString())),e={},t=[];for(let s in r.targetDefaults)r.targetDefaults[s].cache&&t.push(s);return r.nxCloudAccessToken&&(e.accessToken??(e.accessToken=r.nxCloudAccessToken)),r.nxCloudUrl&&(e.url??(e.url=r.nxCloudUrl)),r.nxCloudEncryptionKey&&(e.encryptionKey=r.nxCloudEncryptionKey),r.parallel&&(e.parallel??(e.parallel=r.parallel)),r.cacheDirectory&&(e.cacheDirectory??(e.cacheDirectory=r.cacheDirectory)),t.length&&(e.cacheableOperations??(e.cacheableOperations=t)),{nxJson:r,nxCloudOptions:{...e,...(i=(n=r.tasksRunnerOptions)==null?void 0:n.default)==null?void 0:i.options}}}var gb,V0,W0,Vn=q(()=>{"use strict";gb=require("fs"),V0=na(),{workspaceRoot:W0}=Y()});var Af={};Dt(Af,{runCommandAndStoreInCloud:()=>X0});async function X0(){let{nxCloudOptions:r}=It(),e=Te(r),t=new zn(r),n=new hr(r.maskedProperties),i=me(),s=ve(),o=je(),a=xe(),c=K0(process.argv),[l,...u]=c,f=new Date().toISOString(),{statusCode:h,terminalOutput:d}=await Y0(l,u),m=new Date().toISOString(),b={statusCode:h,terminalOutput:d,userCommandAndArgsString:c.join(" "),startTime:f,endTime:m,branch:i,runGroup:s,ciExecutionId:o,ciExecutionEnv:a};await Z0(e,n,r,b,t),process.exit(h)}function K0(r){let e=r.findIndex(n=>n==="record")+1,t;if(e<process.argv.length){let n=process.argv[e]==="--"?1:0;t=process.argv.slice(e+n)}else console.log("Invalid command. Use `nx-cloud record [my command] [my arg1] [my arg...]`"),process.exit(1);return t}function Y0(r,e){return new Promise((t,n)=>{try{let i=vb.spawn(r,e,{stdio:["inherit","pipe","pipe","ipc"]}),s=[];i.stdout.on("data",o=>{process.stdout.write(o),s.push(o.toString())}),i.stderr.on("data",o=>{process.stderr.write(o),s.push(o.toString())}),i.on("exit",(o,a)=>{let c=o??eN(a||""),l=s.join("");t({statusCode:c,terminalOutput:l})})}catch(i){n(i)}})}function J0(r,e){let t=r.obfuscate(e.terminalOutput),n=t.length>bb?`TRUNCATED

${t.slice(t.length-bb)}`:t;return{taskId:"nx-cloud-tasks-runner:record-command",target:"record-command",projectName:"nx-cloud-tasks-runner",hash:"",startTime:e.startTime,endTime:e.endTime,hashDetails:{},params:e.userCommandAndArgsString,cacheStatus:"n/a",status:e.statusCode,terminalOutput:n}}async function Z0(r,e,t,n,i){let s=`nx-cloud record -- ${n.userCommandAndArgsString}`,o={meta:{nxCloudVersion:"0.0.0"},tasks:[J0(e,n)],run:{command:s,startTime:n.startTime,endTime:n.endTime,branch:n.branch,runGroup:n.runGroup,sha:n.branch?tt():void 0},branch:n.branch,runGroup:n.runGroup,ciExecutionId:n.ciExecutionId,ciExecutionEnv:n.ciExecutionEnv,machineInfo:Jr()},a=Buffer.from(JSON.stringify(o)),c=await(0,Sb.promisify)(wb.gzip)(a),l=await ce(()=>r.post("/nx-cloud/runs/end",c,{headers:{...r.defaults.headers,"Content-Encoding":"gzip","Content-Type":"application/octet-stream"}}));process.env.NX_CLOUD_SILENT_RECORD!=="true"&&Q0(l.data.runUrl),n.statusCode!==0&&(n.ciExecutionId||n.runGroup)&&await i.completeRunGroupWithError(n.branch,n.runGroup,n.ciExecutionId,n.ciExecutionEnv,null)}function Q0(r){_b.addVerticalSeparator(),_b.note({title:"Nx Cloud: Successfully recorded command output"}),Kt(`You can view or share your output by visiting ${r}`)}function eN(r){return r==="SIGHUP"?129:r==="SIGINT"?130:r==="SIGTERM"?143:128}var vb,Sb,wb,_b,bb,Df=q(()=>{"use strict";vb=Sr(require("child_process")),Sb=require("util"),wb=require("zlib");_t();re();Vn();ii();_f();So();({output:_b}=Y()),bb=2e5});function Rb(){tN.error({title:"Invalid Task Runner Configuration",bodyLines:["To use Distributed Task Execution, your default task runner configuration must",'use the "nx-cloud" task runner.',"",'This can be adjusted in "nx.json".']})}var tN,xb=q(()=>{"use strict";({output:tN}=Y())});var Ob,ia,Tb=q(()=>{"use strict";_t();re();kt();({output:Ob}=Y()),ia=class{constructor(e,t,n,i,s,o){this.branch=t;this.runGroup=n;this.ciExecutionId=i;this.ciExecutionEnv=s;this.agentName=o;this.apiAxiosInstance=Te(e,6e4)}async tasks(e,t,n,i){var o;let s=Ce("dtePollTasks");try{let a=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/tasks",{runGroup:this.runGroup,ciExecutionId:this.ciExecutionId,ciExecutionEnv:this.ciExecutionEnv,agentName:this.agentName,executionId:e,statusCode:t,completedTasks:n,targets:i}));return s.recordMetric(ne(a)),a.data}catch(a){throw s.recordMetric((o=a==null?void 0:a.axiosException)!=null&&o.response?ne(a.axiosException.response):Ie),a}}async completeRunGroupWithError(e){var n;L&&Ob.note({title:"Completing with an error",bodyLines:[`ciExecutionId: ${this.ciExecutionId}`,`ciExecutionEnv: ${this.ciExecutionEnv}`,`runGroup: ${this.runGroup}`,`error: ${e}`]});let t=Ce("completeRunGroup");try{let i=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/complete-run-group",{branch:this.branch,runGroup:this.runGroup,ciExecutionId:this.ciExecutionId,ciExecutionEnv:this.ciExecutionEnv,agentName:this.agentName,criticalErrorMessage:e}));L&&Ob.note({title:"Completed run group with an error"}),t.recordMetric(ne(i))}catch(i){t.recordMetric((n=i==null?void 0:i.axiosException)!=null&&n.response?ne(i.axiosException.response):Ie),console.error(i)}}}});async function Cb(r,e,t,n,i){let s=0,o=null,a=ra({title:`No new messages received after ${ya/1e3} seconds`,timeout:ya}),c=[],l=new Date,u=!1,f={};for(;;){if(L&&$i.note({title:`${r} fetching tasks...`}),o=await e.tasks(o?o.executionId:null,s,c,i),L&&$i.note({title:`${r} received an API Response`,bodyLines:[`completed: ${o.completed}`,`status: ${o.status}`,`retryDuring: ${o.retryDuring}`,`executionId: ${o.executionId}`,`number of tasks: ${o.tasks.length}`,`error: ${o.criticalErrorMessage}`,`maxParallel: ${o.maxParallel}`]}),o.criticalErrorMessage&&($i.error({title:"Distributed Execution Terminated",bodyLines:["Error:",o.criticalErrorMessage]}),process.exit(1)),o!=null&&o.retryDuring&&(o==null?void 0:o.retryDuring)!==0&&!u&&new Date().getTime()-l.getTime()>o.retryDuring){await Ge(2e4);continue}if((o==null?void 0:o.status)!==void 0){if(o.status==="RUN_GROUP_COMPLETED"||o.status==="NO_FURTHER_TASKS_TO_RUN")return}else if(o.completed)return;if(a(o.tasks.map(d=>d.taskId).join("")),!o.executionId){L&&$i.note({title:`${r} waiting...`}),await Ge(5e3),s=0,c=[];continue}if(u=!0,o.completedTasks)for(let d of o.completedTasks)f[d.taskId]||($i.note({title:`${r} downloading artifacts for ${d.taskId} Hash: ${d.hash}}`}),await t.retrieveAndExtract(d.hash,d.url),f[d.taskId]=!0);let h=await n(o.executionId,o.tasks,o.maxParallel);for(let d of h.completedTasks)f[d.taskId]=!0;s=h.completedStatusCode,c=h.completedTasks}}var $i,Ib=q(()=>{"use strict";bf();re();Zr();({output:$i}=Y())});var sa=E((nP,Fb)=>{"use strict";var rN=require("util"),Nb=require("path"),nN=require("fs");function Hi(r){if(r!==r.toLowerCase()&&r!==r.toUpperCase()||(r=r.toLowerCase()),r.indexOf("-")===-1&&r.indexOf("_")===-1)return r;{let t="",n=!1,i=r.match(/^-+/);for(let s=i?i[0].length:0;s<r.length;s++){let o=r.charAt(s);n&&(n=!1,o=o.toUpperCase()),s!==0&&(o==="-"||o==="_")?n=!0:o!=="-"&&o!=="_"&&(t+=o)}return t}}function Lb(r,e){let t=r.toLowerCase();e=e||"-";let n="";for(let i=0;i<r.length;i++){let s=t.charAt(i),o=r.charAt(i);s!==o&&i>0?n+=`${e}${t.charAt(i)}`:n+=o}return n}function Pb(r){return r==null?!1:typeof r=="number"||/^0x[0-9a-f]+$/i.test(r)?!0:/^0[^.]/.test(r)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(r)}function iN(r){if(Array.isArray(r))return r.map(o=>typeof o!="string"?o+"":o);r=r.trim();let e=0,t=null,n=null,i=null,s=[];for(let o=0;o<r.length;o++){if(t=n,n=r.charAt(o),n===" "&&!i){t!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),s[e]||(s[e]=""),s[e]+=n}return s}var pt;(function(r){r.BOOLEAN="boolean",r.STRING="string",r.NUMBER="number",r.ARRAY="array"})(pt||(pt={}));var zt,Ff=class{constructor(e){zt=e}parse(e,t){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},t),i=iN(e),s=typeof e=="string",o=sN(Object.assign(Object.create(null),n.alias)),a=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),c=Object.assign(Object.create(null),n.default),l=n.configObjects||[],u=n.envPrefix,f=a["populate--"],h=f?"--":"_",d=Object.create(null),m=Object.create(null),b=n.__||zt.format,p={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},w=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,k=new RegExp("^--"+a["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(y){let _=typeof y=="object"?y.key:y,x=Object.keys(y).map(function(v){return{boolean:"bools",string:"strings",number:"numbers"}[v]}).filter(Boolean).pop();x&&(p[x][_]=!0),p.arrays[_]=!0,p.keys.push(_)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(y){p.bools[y]=!0,p.keys.push(y)}),[].concat(n.string||[]).filter(Boolean).forEach(function(y){p.strings[y]=!0,p.keys.push(y)}),[].concat(n.number||[]).filter(Boolean).forEach(function(y){p.numbers[y]=!0,p.keys.push(y)}),[].concat(n.count||[]).filter(Boolean).forEach(function(y){p.counts[y]=!0,p.keys.push(y)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(y){p.normalize[y]=!0,p.keys.push(y)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([y,_])=>{typeof _=="number"&&(p.nargs[y]=_,p.keys.push(y))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([y,_])=>{typeof _=="function"&&(p.coercions[y]=_,p.keys.push(y))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(y){p.configs[y]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([y,_])=>{(typeof _=="boolean"||typeof _=="function")&&(p.configs[y]=_)})),A(n.key,o,n.default,p.arrays),Object.keys(c).forEach(function(y){(p.aliases[y]||[]).forEach(function(_){c[_]=c[y]})});let O=null;Vt();let C=[],P=Object.assign(Object.create(null),{_:[]}),T={};for(let y=0;y<i.length;y++){let _=i[y],x=_.replace(/^-{3,}/,"---"),v,g,F,D,M,pe;if(_!=="--"&&/^-/.test(_)&&ct(_))z(_);else if(x.match(/^---+(=|$)/)){z(_);continue}else if(_.match(/^--.+=/)||!a["short-option-groups"]&&_.match(/^-.+=/))D=_.match(/^--?([^=]+)=([\s\S]*)$/),D!==null&&Array.isArray(D)&&D.length>=3&&(S(D[1],p.arrays)?y=I(y,D[1],i,D[2]):S(D[1],p.nargs)!==!1?y=G(y,D[1],i,D[2]):N(D[1],D[2],!0));else if(_.match(k)&&a["boolean-negation"])D=_.match(k),D!==null&&Array.isArray(D)&&D.length>=2&&(g=D[1],N(g,S(g,p.arrays)?[!1]:!1));else if(_.match(/^--.+/)||!a["short-option-groups"]&&_.match(/^-[^-]+/))D=_.match(/^--?(.+)/),D!==null&&Array.isArray(D)&&D.length>=2&&(g=D[1],S(g,p.arrays)?y=I(y,g,i):S(g,p.nargs)!==!1?y=G(y,g,i):(M=i[y+1],M!==void 0&&(!M.match(/^-/)||M.match(w))&&!S(g,p.bools)&&!S(g,p.counts)||/^(true|false)$/.test(M)?(N(g,M),y++):N(g,_e(g))));else if(_.match(/^-.\..+=/))D=_.match(/^-([^=]+)=([\s\S]*)$/),D!==null&&Array.isArray(D)&&D.length>=3&&N(D[1],D[2]);else if(_.match(/^-.\..+/)&&!_.match(w))M=i[y+1],D=_.match(/^-(.\..+)/),D!==null&&Array.isArray(D)&&D.length>=2&&(g=D[1],M!==void 0&&!M.match(/^-/)&&!S(g,p.bools)&&!S(g,p.counts)?(N(g,M),y++):N(g,_e(g)));else if(_.match(/^-[^-]+/)&&!_.match(w)){F=_.slice(1,-1).split(""),v=!1;for(let Ue=0;Ue<F.length;Ue++){if(M=_.slice(Ue+2),F[Ue+1]&&F[Ue+1]==="="){pe=_.slice(Ue+3),g=F[Ue],S(g,p.arrays)?y=I(y,g,i,pe):S(g,p.nargs)!==!1?y=G(y,g,i,pe):N(g,pe),v=!0;break}if(M==="-"){N(F[Ue],M);continue}if(/[A-Za-z]/.test(F[Ue])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(M)&&S(M,p.bools)===!1){N(F[Ue],M),v=!0;break}if(F[Ue+1]&&F[Ue+1].match(/\W/)){N(F[Ue],M),v=!0;break}else N(F[Ue],_e(F[Ue]))}g=_.slice(-1)[0],!v&&g!=="-"&&(S(g,p.arrays)?y=I(y,g,i):S(g,p.nargs)!==!1?y=G(y,g,i):(M=i[y+1],M!==void 0&&(!/^(-|--)[^-]/.test(M)||M.match(w))&&!S(g,p.bools)&&!S(g,p.counts)||/^(true|false)$/.test(M)?(N(g,M),y++):N(g,_e(g))))}else if(_.match(/^-[0-9]$/)&&_.match(w)&&S(_.slice(1),p.bools))g=_.slice(1),N(g,_e(g));else if(_==="--"){C=i.slice(y+1);break}else if(a["halt-at-non-option"]){C=i.slice(y);break}else z(_)}$(P,!0),$(P,!1),J(P),K(),le(P,p.aliases,c,!0),U(P),a["set-placeholder-key"]&&H(P),Object.keys(p.counts).forEach(function(y){Re(P,y.split("."))||N(y,0)}),f&&C.length&&(P[h]=[]),C.forEach(function(y){P[h].push(y)}),a["camel-case-expansion"]&&a["strip-dashed"]&&Object.keys(P).filter(y=>y!=="--"&&y.includes("-")).forEach(y=>{delete P[y]}),a["strip-aliased"]&&[].concat(...Object.keys(o).map(y=>o[y])).forEach(y=>{a["camel-case-expansion"]&&y.includes("-")&&delete P[y.split(".").map(_=>Hi(_)).join(".")],delete P[y]});function z(y){let _=V("_",y);(typeof _=="string"||typeof _=="number")&&P._.push(_)}function G(y,_,x,v){let g,F=S(_,p.nargs);if(F=typeof F!="number"||isNaN(F)?1:F,F===0)return Pe(v)||(O=Error(b("Argument unexpected for: %s",_))),N(_,_e(_)),y;let D=Pe(v)?0:1;if(a["nargs-eats-options"])x.length-(y+1)+D<F&&(O=Error(b("Not enough arguments following: %s",_))),D=F;else{for(g=y+1;g<x.length&&(!x[g].match(/^-[^0-9]/)||x[g].match(w)||ct(x[g]));g++)D++;D<F&&(O=Error(b("Not enough arguments following: %s",_)))}let M=Math.min(D,F);for(!Pe(v)&&M>0&&(N(_,v),M--),g=y+1;g<M+y+1;g++)N(_,x[g]);return y+M}function I(y,_,x,v){let g=[],F=v||x[y+1],D=S(_,p.nargs);if(S(_,p.bools)&&!/^(true|false)$/.test(F))g.push(!0);else if(Pe(F)||Pe(v)&&/^-/.test(F)&&!w.test(F)&&!ct(F)){if(c[_]!==void 0){let M=c[_];g=Array.isArray(M)?M:[M]}}else{Pe(v)||g.push(X(_,v,!0));for(let M=y+1;M<x.length&&!(!a["greedy-arrays"]&&g.length>0||D&&typeof D=="number"&&g.length>=D||(F=x[M],/^-/.test(F)&&!w.test(F)&&!ct(F)));M++)y=M,g.push(X(_,F,s))}return typeof D=="number"&&(D&&g.length<D||isNaN(D)&&g.length===0)&&(O=Error(b("Not enough arguments following: %s",_))),N(_,g),y}function N(y,_,x=s){if(/-/.test(y)&&a["camel-case-expansion"]){let F=y.split(".").map(function(D){return Hi(D)}).join(".");j(y,F)}let v=X(y,_,x),g=y.split(".");R(P,g,v),p.aliases[y]&&p.aliases[y].forEach(function(F){let D=F.split(".");R(P,D,v)}),g.length>1&&a["dot-notation"]&&(p.aliases[g[0]]||[]).forEach(function(F){let D=F.split("."),M=[].concat(g);M.shift(),D=D.concat(M),(p.aliases[y]||[]).includes(D.join("."))||R(P,D,v)}),S(y,p.normalize)&&!S(y,p.arrays)&&[y].concat(p.aliases[y]||[]).forEach(function(D){Object.defineProperty(T,D,{enumerable:!0,get(){return _},set(M){_=typeof M=="string"?zt.normalize(M):M}})})}function j(y,_){p.aliases[y]&&p.aliases[y].length||(p.aliases[y]=[_],d[_]=!0),p.aliases[_]&&p.aliases[_].length||j(_,y)}function X(y,_,x){x&&(_=oN(_)),(S(y,p.bools)||S(y,p.counts))&&typeof _=="string"&&(_=_==="true");let v=Array.isArray(_)?_.map(function(g){return V(y,g)}):V(y,_);return S(y,p.counts)&&(Pe(v)||typeof v=="boolean")&&(v=kf()),S(y,p.normalize)&&S(y,p.arrays)&&(Array.isArray(_)?v=_.map(g=>zt.normalize(g)):v=zt.normalize(_)),v}function V(y,_){return!a["parse-positional-numbers"]&&y==="_"||!S(y,p.strings)&&!S(y,p.bools)&&!Array.isArray(_)&&(Pb(_)&&a["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${_}`)))||!Pe(_)&&S(y,p.numbers))&&(_=Number(_)),_}function J(y){let _=Object.create(null);le(_,p.aliases,c),Object.keys(p.configs).forEach(function(x){let v=y[x]||_[x];if(v)try{let g=null,F=zt.resolve(zt.cwd(),v),D=p.configs[x];if(typeof D=="function"){try{g=D(F)}catch(M){g=M}if(g instanceof Error){O=g;return}}else g=zt.require(F);B(g)}catch(g){g.name==="PermissionDenied"?O=g:y[x]&&(O=Error(b("Invalid JSON config file: %s",v)))}})}function B(y,_){Object.keys(y).forEach(function(x){let v=y[x],g=_?_+"."+x:x;typeof v=="object"&&v!==null&&!Array.isArray(v)&&a["dot-notation"]?B(v,g):(!Re(P,g.split("."))||S(g,p.arrays)&&a["combine-arrays"])&&N(g,v)})}function K(){typeof l<"u"&&l.forEach(function(y){B(y)})}function $(y,_){if(typeof u>"u")return;let x=typeof u=="string"?u:"",v=zt.env();Object.keys(v).forEach(function(g){if(x===""||g.lastIndexOf(x,0)===0){let F=g.split("__").map(function(D,M){return M===0&&(D=D.substring(x.length)),Hi(D)});(_&&p.configs[F.join(".")]||!_)&&!Re(y,F)&&N(F.join("."),v[g])}})}function U(y){let _,x=new Set;Object.keys(y).forEach(function(v){if(!x.has(v)&&(_=S(v,p.coercions),typeof _=="function"))try{let g=V(v,_(y[v]));[].concat(p.aliases[v]||[],v).forEach(F=>{x.add(F),y[F]=g})}catch(g){O=g}})}function H(y){return p.keys.forEach(_=>{~_.indexOf(".")||typeof y[_]>"u"&&(y[_]=void 0)}),y}function le(y,_,x,v=!1){Object.keys(x).forEach(function(g){Re(y,g.split("."))||(R(y,g.split("."),x[g]),v&&(m[g]=!0),(_[g]||[]).forEach(function(F){Re(y,F.split("."))||R(y,F.split("."),x[g])}))})}function Re(y,_){let x=y;a["dot-notation"]||(_=[_.join(".")]),_.slice(0,-1).forEach(function(g){x=x[g]||{}});let v=_[_.length-1];return typeof x!="object"?!1:v in x}function R(y,_,x){let v=y;a["dot-notation"]||(_=[_.join(".")]),_.slice(0,-1).forEach(function(pe){pe=Ab(pe),typeof v=="object"&&v[pe]===void 0&&(v[pe]={}),typeof v[pe]!="object"||Array.isArray(v[pe])?(Array.isArray(v[pe])?v[pe].push({}):v[pe]=[v[pe],{}],v=v[pe][v[pe].length-1]):v=v[pe]});let g=Ab(_[_.length-1]),F=S(_.join("."),p.arrays),D=Array.isArray(x),M=a["duplicate-arguments-array"];!M&&S(g,p.nargs)&&(M=!0,(!Pe(v[g])&&p.nargs[g]===1||Array.isArray(v[g])&&v[g].length===p.nargs[g])&&(v[g]=void 0)),x===kf()?v[g]=kf(v[g]):Array.isArray(v[g])?M&&F&&D?v[g]=a["flatten-duplicate-arrays"]?v[g].concat(x):(Array.isArray(v[g][0])?v[g]:[v[g]]).concat([x]):!M&&!!F==!!D?v[g]=x:v[g]=v[g].concat([x]):v[g]===void 0&&F?v[g]=D?x:[x]:M&&!(v[g]===void 0||S(g,p.counts)||S(g,p.bools))?v[g]=[v[g],x]:v[g]=x}function A(...y){y.forEach(function(_){Object.keys(_||{}).forEach(function(x){p.aliases[x]||(p.aliases[x]=[].concat(o[x]||[]),p.aliases[x].concat(x).forEach(function(v){if(/-/.test(v)&&a["camel-case-expansion"]){let g=Hi(v);g!==x&&p.aliases[x].indexOf(g)===-1&&(p.aliases[x].push(g),d[g]=!0)}}),p.aliases[x].concat(x).forEach(function(v){if(v.length>1&&/[A-Z]/.test(v)&&a["camel-case-expansion"]){let g=Lb(v,"-");g!==x&&p.aliases[x].indexOf(g)===-1&&(p.aliases[x].push(g),d[g]=!0)}}),p.aliases[x].forEach(function(v){p.aliases[v]=[x].concat(p.aliases[x].filter(function(g){return v!==g}))}))})})}function S(y,_){let x=[].concat(p.aliases[y]||[],y),v=Object.keys(_),g=x.find(F=>v.includes(F));return g?_[g]:!1}function W(y){let _=Object.keys(p);return[].concat(_.map(v=>p[v])).some(function(v){return Array.isArray(v)?v.includes(y):v[y]})}function de(y,..._){return[].concat(..._).some(function(v){let g=y.match(v);return g&&W(g[1])})}function At(y){if(y.match(w)||!y.match(/^-[^-]+/))return!1;let _=!0,x,v=y.slice(1).split("");for(let g=0;g<v.length;g++){if(x=y.slice(g+2),!W(v[g])){_=!1;break}if(v[g+1]&&v[g+1]==="="||x==="-"||/[A-Za-z]/.test(v[g])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(x)||v[g+1]&&v[g+1].match(/\W/))break}return _}function ct(y){return a["unknown-options-as-args"]&&yt(y)}function yt(y){return y=y.replace(/^-{3,}/,"--"),y.match(w)||At(y)?!1:!de(y,/^-+([^=]+?)=[\s\S]*$/,k,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function _e(y){return!S(y,p.bools)&&!S(y,p.counts)&&`${y}`in c?c[y]:Yr(vr(y))}function Yr(y){return{[pt.BOOLEAN]:!0,[pt.STRING]:"",[pt.NUMBER]:void 0,[pt.ARRAY]:[]}[y]}function vr(y){let _=pt.BOOLEAN;return S(y,p.strings)?_=pt.STRING:S(y,p.numbers)?_=pt.NUMBER:S(y,p.bools)?_=pt.BOOLEAN:S(y,p.arrays)&&(_=pt.ARRAY),_}function Pe(y){return y===void 0}function Vt(){Object.keys(p.counts).find(y=>S(y,p.arrays)?(O=Error(b("Invalid configuration: %s, opts.count excludes opts.array.",y)),!0):S(y,p.nargs)?(O=Error(b("Invalid configuration: %s, opts.count excludes opts.narg.",y)),!0):!1)}return{aliases:Object.assign({},p.aliases),argv:Object.assign(T,P),configuration:a,defaulted:Object.assign({},m),error:O,newAliases:Object.assign({},d)}}};function sN(r){let e=[],t=Object.create(null),n=!0;for(Object.keys(r).forEach(function(i){e.push([].concat(r[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let s=i+1;s<e.length;s++)if(e[i].filter(function(a){return e[s].indexOf(a)!==-1}).length){e[i]=e[i].concat(e[s]),e.splice(s,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(o,a,c){return c.indexOf(o)===a});let s=i.pop();s!==void 0&&typeof s=="string"&&(t[s]=i)}),t}function kf(r){return r!==void 0?r+1:1}function Ab(r){return r==="__proto__"?"___proto___":r}function oN(r){return typeof r=="string"&&(r[0]==="'"||r[0]==='"')&&r[r.length-1]===r[0]?r.substring(1,r.length-1):r}var Lf,Pf,Uf,Db=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,kb=(Pf=(Lf=process==null?void 0:process.versions)===null||Lf===void 0?void 0:Lf.node)!==null&&Pf!==void 0?Pf:(Uf=process==null?void 0:process.version)===null||Uf===void 0?void 0:Uf.slice(1);if(kb&&Number(kb.match(/^([^.]+)/)[1])<Db)throw Error(`yargs parser supports a minimum Node.js version of ${Db}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var aN=process?process.env:{},Ub=new Ff({cwd:process.cwd,env:()=>aN,format:rN.format,normalize:Nb.normalize,resolve:Nb.resolve,require:r=>{if(typeof require<"u")return require(r);if(r.match(/\.json$/))return JSON.parse(nN.readFileSync(r,"utf8"));throw Error("only .json config files are supported in ESM")}}),zi=function(e,t){return Ub.parse(e.slice(),t).argv};zi.detailed=function(r,e){return Ub.parse(r.slice(),e)};zi.camelCase=Hi;zi.decamelize=Lb;zi.looksLikeNumber=Pb;Fb.exports=zi});async function Mb(r){let e=await cN(r);return async(t,n,i)=>{let s=n.map(c=>{let l=uN(c.params,{configuration:{"camel-case-expansion":!1,"dot-notation":!0}}),u=Fu(l);return l._.length==0&&delete l._,{id:c.taskId,target:{project:c.projectName,target:c.target,configuration:c.configuration},overrides:{...l,__overrides_unparsed__:u},projectRoot:c.projectRoot,cache:c.cache}});process.env.NX_CACHE_FAILURES="true",process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID=t,process.env.NX_STREAM_OUTPUT="true",process.env.NX_PREFIX_OUTPUT="true";let o=await e.invoke({tasks:s,parallel:i});return{completedTasks:Object.values(o.taskGraph.tasks).map(c=>({taskId:c.id,hash:c.hash})),completedStatusCode:o.status}}}var cN,uN,qb=q(()=>{"use strict";Si();({initTasksRunner:cN}=dt()),uN=sa()});async function jb(){let r=dN();return async function(t,n,i){let s=0,o=[];for(let a of hN(n)){let c=a.configuration?`--configuration=${a.configuration}`:"",l=i>1?` --parallel --max-parallel=${i}`:"",u=`npx nx run-many --target=${a.target} ${c} --projects=${a.projects.join(",")} ${a.params}${l}`;L&&lN.note({title:`Executing: '${u}'`});try{(0,Bb.execSync)(u,{stdio:["ignore","inherit","inherit"],env:{...process.env,NX_CACHE_FAILURES:"true",NX_CLOUD_DISTRIBUTED_EXECUTION_ID:t,NX_STREAM_OUTPUT:"true",NX_PREFIX_OUTPUT:"true"}}),o.push(...r(t))}catch(f){if(f.status===Wt)throw f;s=1,o.push(...r(t))}}return{completedStatusCode:s,completedTasks:o}}}function hN(r){let e=[];return r.forEach(t=>{let n=e.find(i=>i.target===t.target&&i.configuration===t.configuration);n?n.projects.push(t.projectName):e.push({target:t.target,projects:[t.projectName],params:t.params,configuration:t.configuration})}),e}function dN(){return r=>{let e=`Command execution failed (distributed task execution: ${r}). Tasks hashes haven't been recorded.`,t;try{let n=`${fN}/tasks-hashes-${r}`;t=JSON.parse((0,oa.readFileSync)(n).toString()),(0,oa.unlinkSync)(n)}catch{throw new Error(e)}if(t.length==0)throw new Error(e);return t}}var Bb,oa,lN,fN,Gb=q(()=>{"use strict";Bb=require("child_process"),oa=require("fs");re();({output:lN}=Y()),{cacheDirectory:fN}=dt()});var qf={};Dt(qf,{startAgent:()=>yN});async function yN(){let r=me(),e=ve(),t=je(),n=xe(),i=EN();gr(e,t)||(_r(),process.exit(1)),br.targets&&br.targets.length?Vi.note({title:`Starting an agent for running Nx target(s) [${br.targets.join(", ")}]`}):Vi.note({title:`Starting Agent '${i}' for running Nx tasks`});let{nxJson:s,nxCloudOptions:o}=It();function a(){var b;let m=(b=s.tasksRunnerOptions)==null?void 0:b.default;return s.nxCloudAccessToken&&!m?!0:!(m!=null&&m.runner)&&process.env.NX_CLOUD_ACCESS_TOKEN||!(m!=null&&m.runner)&&s.nxCloudAccessToken||(m==null?void 0:m.runner)==="nx-cloud"||(m==null?void 0:m.runner)==="@nrwl/nx-cloud"}if(!a())return Rb(),process.exit(1);await Ui(o)||(Vi.error({title:"Nx Cloud: Workspace is disabled",bodyLines:["Distributed Task Execution is disabled when your workspace is disabled","","Organization administrators can find more information on the 'Billing' page in the Nx Cloud Webapp"]}),process.exit(1));let l=new ia(o,r,e,t,n,i);gN(l,o,i);let u=new Jt(Or||o.encryptionKey),f=new Yt(o),h=new Hn(new fr(u,f,o,"dte-agent"),$b),d=mN?await Mb(o):await jb();return Cb(i,l,h,d,br.targets).then(async m=>(await sn(o),m)).catch(async m=>{throw await l.completeRunGroupWithError(`Critical Error in Agent: "${m.message}"`),m})}function EN(){return process.env.NX_AGENT_NAME!==void 0?process.env.NX_AGENT_NAME:process.env.CIRCLECI!==void 0&&process.env.CIRCLE_STAGE?process.env.CIRCLE_STAGE:process.env.CIRCLECI!==void 0&&process.env.CIRCLE_JOB?process.env.CIRCLE_JOB:`Agent ${Math.floor(Math.random()*1e5)}`}function gN(r,e,t){let n=`${$b}/lockfiles`,i=`${n}/${t}.lock`;(0,mt.existsSync)(n)||(0,mt.mkdirSync)(n,{recursive:!0});let s=(0,mt.readdirSync)(n);s.length&&(s.includes(`${t}.lock`)&&(Vi.error({title:"Duplicate Agent ID Detected",bodyLines:["We have detected another agent with this ID running in this workspace. This should not happen.","",'End all currently running agents, run "npx nx-cloud clean-up-agents", and try again.']}),process.exit(1)),Vi.warn({title:"Other Nx Cloud Agents Detected",bodyLines:["We have detected other agents running in this workspace. This can cause unexpected behavior.","","This can also be a false positive caused by agents that did not shut down correctly.",'If you believe this is the case, run "npx nx-cloud clean-up-agents".']})),(0,mt.writeFileSync)(i,""),process.on("exit",o=>{Mf(i,o)}),process.on("SIGTERM",async()=>{await r.completeRunGroupWithError("Agent was terminated via SIGTERM"),Mf(i,1)}),process.on("SIGINT",async()=>{await r.completeRunGroupWithError("Agent was terminated via SIGINT"),Mf(i,1)})}function Mf(r,e){(0,mt.existsSync)(r)&&((0,mt.unlinkSync)(r),process.exit(e))}var mt,pN,SP,Vi,wP,mN,$b,br,Bf=q(()=>{"use strict";mt=require("fs");Ef();re();Vn();Wl();kt();Es();xb();ji();gs();bo();Tb();Ib();qb();Gb();pN=sa(),SP=na(),{output:Vi,workspaceRoot:wP}=Y(),{initTasksRunner:mN,cacheDirectory:$b}=dt(),br=pN(process.argv,{array:["targets"],default:{}});br.targets&&br.targets.length===1&&(br.targets=br.targets[0].split(",").map(r=>r.trim()))});function Hb(r,e){if([".yml",".yaml"].some(i=>r==null?void 0:r.endsWith(i)))try{let i=u=>(0,jf.execSync)(`${u}`,{stdio:"pipe"}).toString().trim().split(`
`).filter(Boolean),s=process.env.NX_BASE??(0,jf.execSync)(`git rev-parse ${e}~1`,{stdio:"pipe"}).toString().trim()??e,o=i(`npx nx show projects --affected --base=${s}`),a=i("npx nx show projects"),c=o.length/a.length,l=Math.round(c*100);L&&_N.note({title:`Affected project ratio: ${l}%`})}catch(i){L&&console.error("Error calculating affected project ratio: ",i);return}}var jf,_N,zb=q(()=>{"use strict";jf=require("child_process");re();({output:_N}=Y())});var Vb,Wn,Gf=q(()=>{"use strict";_t();Oo();kt();({output:Vb}=Y()),Wn=class{constructor(e){this.apiAxiosInstance=Te(e)}async createRunGroup(e,t,n,i,s,o,a,c,l,u,f,h,d=!1){var b;let m=Ce("createRunGroup");try{let p=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/create-run-group",{branch:e,runGroup:t,ciExecutionId:n,ciExecutionEnv:i,stopAgentsOnFailure:s,agentCount:o,stopAgentsAfter:a,commitSha:l,distributesOn:c,affectedProjectRatio:f,vcsContext:dr(),envVars:h,requireExplicitCompletion:d}));m.recordMetric(ne(p))}catch(p){m.recordMetric((b=p==null?void 0:p.axiosException)!=null&&b.response?ne(p.axiosException.response):Ie),Vb.error({title:p.message}),process.exit(1)}}async completeRunGroup(e,t,n,i){var o;let s=Ce("completeRunGroup");try{let a=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/complete-run-group",{branch:e,runGroup:t,ciExecutionId:n,ciExecutionEnv:i,vcsContext:dr()}));s.recordMetric(ne(a))}catch(a){s.recordMetric((o=a==null?void 0:a.axiosException)!=null&&o.response?ne(a.axiosException.response):Ie),Vb.error({title:a.message}),process.exit(1)}}async sendHeartbeat(e,t){await this.apiAxiosInstance.post("/nx-cloud/heartbeat",{ciExecutionId:e,runGroup:t})}}});var $f={};Dt($f,{startCiRun:()=>vN});async function vN(){var u;let{nxCloudOptions:r}=It(),e=me(),t=ve(),n=je(),i=xe(),s=tt(),o=Yi(),a=Hb(Nt.distributesOn,((u=r.affected)==null?void 0:u.defaultBase)??"main"),c=gh(Nt.withEnvVars,r.accessToken);gr(t,n)||(_r(),process.exit(1)),L&&Wb.note({title:`Creating run group. branch: ${e}, ciExecutionId: ${n}, ciExecutionEnv: ${i}, runGroup: ${t}, commitSha: ${s}, requireExplicitCompletion: ${Nt.requireExplicitCompletion}`}),Nt.commandCount&&(Wb.error({title:"--command-count is deprecated. Use --stop-agents-after instead.",bodyLines:['E.g., npx nx-cloud start-ci-run --stop-agents-after="e2e"']}),process.exit(1)),await new Wn(r).createRunGroup(e,t,n,i,Nt.stopAgentsOnFailure,Nt.agentCount,Nt.stopAgentsAfter,Nt.distributesOn,s,o,a,c,Nt.requireExplicitCompletion),await ta(),Nt.useDteByDefault&&k_()}var bN,Wb,FP,Nt,Hf=q(()=>{"use strict";Hl();Vl();re();zb();Vn();Gf();ji();bN=sa(),{output:Wb,workspaceRoot:FP}=Y(),Nt=bN(process.argv,{boolean:["stop-agents-on-failure","use-dte-by-default","require-explicit-completion"],number:["agent-count","command-count"],string:["stop-agents-after"],default:{useDteByDefault:!0}})});var aa={};Dt(aa,{stopAllAgents:()=>wN});async function wN(){let r=me(),e=ve(),t=je(),n=xe();gr(e,t)||(_r(),process.exit(1)),L&&SN.note({title:`Stopping all agents running tasks for run group. branch: ${r}, ciExecutionId: ${t}, ciExecutionEnv: ${n}, runGroup: ${e}`});let{nxCloudOptions:i}=It();await new Wn(i).completeRunGroup(r,e,t,n)}var SN,ca=q(()=>{"use strict";re();Vn();Gf();ji();({output:SN}=Y())});var Vf=E((GP,Kb)=>{"use strict";var Xb=require("fs"),zf;function RN(){try{return Xb.statSync("/.dockerenv"),!0}catch{return!1}}function xN(){try{return Xb.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}Kb.exports=()=>(zf===void 0&&(zf=RN()||xN()),zf)});var Zb=E(($P,Wf)=>{"use strict";var ON=require("os"),TN=require("fs"),Yb=Vf(),Jb=()=>{if(process.platform!=="linux")return!1;if(ON.release().toLowerCase().includes("microsoft"))return!Yb();try{return TN.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Yb():!1}catch{return!1}};process.env.__IS_WSL_TEST__?Wf.exports=Jb:Wf.exports=Jb()});var ev=E((HP,Qb)=>{"use strict";Qb.exports=(r,e,t)=>{let n=i=>Object.defineProperty(r,e,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get(){let i=t();return n(i),i},set(i){n(i)}}),r}});var av=E((zP,ov)=>{"use strict";var CN=require("path"),IN=require("child_process"),{promises:la,constants:sv}=require("fs"),ua=Zb(),NN=Vf(),Kf=ev(),tv=CN.join(__dirname,"xdg-open"),{platform:Xn,arch:rv}=process,AN=()=>{try{return la.statSync("/run/.containerenv"),!0}catch{return!1}},Xf;function DN(){return Xf===void 0&&(Xf=AN()||NN()),Xf}var kN=(()=>{let r="/mnt/",e;return async function(){if(e)return e;let t="/etc/wsl.conf",n=!1;try{await la.access(t,sv.F_OK),n=!0}catch{}if(!n)return r;let i=await la.readFile(t,{encoding:"utf8"}),s=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return s?(e=s.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):r}})(),nv=async(r,e)=>{let t;for(let n of r)try{return await e(n)}catch(i){t=i}throw t},fa=async r=>{if(r={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...r},Array.isArray(r.app))return nv(r.app,a=>fa({...r,app:a}));let{name:e,arguments:t=[]}=r.app||{};if(t=[...t],Array.isArray(e))return nv(e,a=>fa({...r,app:{name:a,arguments:t}}));let n,i=[],s={};if(Xn==="darwin")n="open",r.wait&&i.push("--wait-apps"),r.background&&i.push("--background"),r.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Xn==="win32"||ua&&!DN()&&!e){let a=await kN();n=ua?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),ua||(s.windowsVerbatimArguments=!0);let c=["Start"];r.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`,"-ArgumentList"),r.target&&t.unshift(r.target)):r.target&&c.push(`"${r.target}"`),t.length>0&&(t=t.map(l=>`"\`"${l}\`""`),c.push(t.join(","))),r.target=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let a=!__dirname||__dirname==="/",c=!1;try{await la.access(tv,sv.X_OK),c=!0}catch{}n=process.versions.electron||Xn==="android"||a||!c?"xdg-open":tv}t.length>0&&i.push(...t),r.wait||(s.stdio="ignore",s.detached=!0)}r.target&&i.push(r.target),Xn==="darwin"&&t.length>0&&i.push("--args",...t);let o=IN.spawn(n,i,s);return r.wait?new Promise((a,c)=>{o.once("error",c),o.once("close",l=>{if(!r.allowNonzeroExitCode&&l>0){c(new Error(`Exited with code ${l}`));return}a(o)})}):(o.unref(),o)},Yf=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a `target`");return fa({...e,target:r})},LN=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a `name`");let{arguments:t=[]}=e||{};if(t!=null&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return fa({...e,app:{name:r,arguments:t}})};function iv(r){if(typeof r=="string"||Array.isArray(r))return r;let{[rv]:e}=r;if(!e)throw new Error(`${rv} is not supported`);return e}function Jf({[Xn]:r},{wsl:e}){if(e&&ua)return iv(e);if(!r)throw new Error(`${Xn} is not supported`);return iv(r)}var ha={};Kf(ha,"chrome",()=>Jf({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Kf(ha,"firefox",()=>Jf({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Kf(ha,"edge",()=>Jf({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));Yf.apps=ha;Yf.openApp=LN;ov.exports=Yf});function cv(){let{output:r}=Y();r.error({title:"Connections to Nx Cloud are disabled for this workspace",bodyLines:["This was an intentional decision by someone on your team.","Nx Cloud cannot and will not be enabled.","","To allow connections to Nx Cloud again, remove the 'neverConnectToCloud'","property in nx.json."]})}var uv=q(()=>{"use strict"});var Zf={};Dt(Zf,{uploadAndShowRunDetails:()=>FN});async function UN(r){let e=new An(r),t={},n=Jr(),i=new kn(e,t,r,n),s=new hr(r.maskedProperties),o=JSON.parse((0,fv.readFileSync)((0,dv.join)(lv,"run.json")).toString()),a=o.tasks.map(l=>({...l,terminalOutput:wo(lv,s,l.hash,l.cacheStatus,l.status)})),c=Co();return await i.endRun(o.run,a,{branch:null,runGroup:null,ciExecutionId:null,ciExecutionEnv:null},c),`${ys(r.url||"https://nx.app")}/runs/${c}`}async function FN(){let{nxJson:r,nxCloudOptions:e}=It();r.neverConnectToCloud&&(cv(),process.exit(1));let t=await UN(e);PN.success({title:"Successfully uploaded the run details",bodyLines:[`View run details at ${t}`]}),(0,hv.default)(t)}var fv,hv,dv,PN,lv,Qf=q(()=>{"use strict";fv=require("fs"),hv=Sr(av()),dv=require("path");re();Vn();uv();rc();zu();Vu();Uu();So();ju();({output:PN}=Y()),{cacheDirectory:lv}=dt()});exports.nxCloudTasksRunner=(...r)=>(yb(),be(mb)).default(...r);exports.configureLightClientRequire=()=>(Rr(),be(ch)).configureLightClientRequire;var MN={"clean-up-agents":()=>(Nf(),be(If)).cleanUpAgents(),record:()=>(Df(),be(Af)).runCommandAndStoreInCloud(),"start-agent":()=>(Bf(),be(qf)).startAgent(),"start-ci-run":()=>(Hf(),be($f)).startCiRun(),"stop-all-agents":()=>(ca(),be(aa)).stopAllAgents(),"complete-ci-run":()=>(ca(),be(aa)).stopAllAgents(),"upload-and-show-run-details":()=>(Qf(),be(Zf)).uploadAndShowRunDetails()};exports.commands=MN;exports.cleanUpAgents=()=>(Nf(),be(If)).cleanUpAgents();exports.runCommandAndStoreInCloud=()=>(Df(),be(Af)).runCommandAndStoreInCloud();exports.startAgent=()=>(Bf(),be(qf)).startAgent();exports.startCiRun=()=>(Hf(),be($f)).startCiRun();exports.stopAllAgents=()=>(ca(),be(aa)).stopAllAgents();exports.uploadAndShowRunDetails=()=>(Qf(),be(Zf)).uploadAndShowRunDetails();
